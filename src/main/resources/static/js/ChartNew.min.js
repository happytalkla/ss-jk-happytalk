function lineStyleFn(a){return"object"==typeof chartJSLineStyle[a]?chartJSLineStyle[a]:chartJSLineStyle.solid}function roundToWithThousands(a,b,c){var d=1*unFormat(a,b);if("number"==typeof d&&"none"!=c){var e;if(c<=0)e=-c,d=+(Math.round(d+"e+"+e)+"e-"+e);else{e=c;var f="1e+"+e;d=+Math.round(d/f)*f}}return d=fmtChartJS(a,d,"none")}function unFormat(a,b){if("."==a.decimalSeparator&&""==a.thousandSeparator||"string"!=typeof b)return b;var c=""+b;if(""!=a.thousandSeparator)for(;c.indexOf(a.thousandSeparator)>=0;)c=""+c.replace(a.thousandSeparator,"");return"."!=a.decimalSeparator&&(c=""+c.replace(a.decimalSeparator,".")),1*c}function fmtChartJSPerso(a,b,c){switch(c){case"SampleJS_Format":return_value="number"==typeof b?"My Format : "+b.toString()+" $":b+"XX";break;case"Change_Month":return_value="string"==typeof b?b.toString()+" 2014":b.toString()+"YY";break;default:return_value=b}return return_value}function fmtChartJS(a,b,c){var d;if("notformatted"==c)d=b;else if("none"==c&&"number"==typeof b){if("none"!=a.roundNumber){var e;if(a.roundNumber<=0)e=-a.roundNumber,b=+(Math.round(b+"e+"+e)+"e-"+e);else{e=a.roundNumber;var f="1e+"+e;b=+Math.round(b/f)*f}}if("."!=a.decimalSeparator||""!=a.thousandSeparator){if(d=b.toString().replace(/\./g,a.decimalSeparator),""!=a.thousandSeparator){var g=d,h="",i=g.indexOf(a.decimalSeparator);i>=0&&(h=g.substring(i+1,g.length),h=h.split("").reverse().join(""),g=g.substring(0,i)),g=g.toString().replace(/\B(?=(\d{3})+(?!\d))/g,a.thousandSeparator),h=h.split("").reverse().join(""),d=g,""!=h&&(d=d+a.decimalSeparator+h)}}else d=b}else d="none"!=c&&"notformatted"!=c?fmtChartJSPerso(a,b,c):b;return d}function addParameters2Function(data,fctName,fctList){var mathFunctions={mean:{data:data.data,datasetNr:data.v11},varianz:{data:data.data,datasetNr:data.v11},stddev:{data:data.data,datasetNr:data.v11},cv:{data:data.data,datasetNr:data.v11},median:{data:data.data,datasetNr:data.v11}};if(dif=!1,"Dif"==fctName.substr(-3)&&(fctName=fctName.substr(0,fctName.length-3),dif=!0),"function"==typeof eval(fctName)){var parameter=eval(fctList+"."+fctName);return dif?data.v3-window[fctName](parameter):window[fctName](parameter)}return null}function isNumber(a){return!isNaN(parseFloat(a))&&isFinite(a)}function tmplbis(a,b,c){return newstr=a,newstr.substr(0,c.templatesOpenTag.length)==c.templatesOpenTag&&(newstr="<%="+newstr.substr(c.templatesOpenTag.length,newstr.length-c.templatesOpenTag.length)),newstr.substr(newstr.length-c.templatesCloseTag.length,c.templatesCloseTag.length)==c.templatesCloseTag&&(newstr=newstr.substr(0,newstr.length-c.templatesCloseTag.length)+"%>"),tmplter(newstr,b)}function tmplter(a,b){for(var c=["mean","varianz","stddev","cv","median"],d=new RegExp("<%=((?:(?:.*?)\\W)??)((?:"+c.join("|")+")(?:Dif)?)\\(([0-9]*?)\\)(.*?)%>","g");d.test(a);)a=a.replace(d,function(a,c,d,e,f){var g;g=e||2;var h=addParameters2Function(b,d,"mathFunctions");return isNumber(h)?"<%="+c+Math.round(Math.pow(10,g)*h)/Math.pow(10,g)+f+"%>":"<%= %>"});var e=/^[A-Za-z][-A-Za-z0-9_:.]*$/.test(a)?cachebis[a]=cachebis[a]||tmplter(document.getElementById(a).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+a.replace(/[\r\n]/g,"\\n").replace(/[\t]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return b?e(b):e}function createCursorDiv(){if(0==cursorDivCreated){var a=document.createElement("divCursor");a.id="divCursor",a.style.position="absolute",document.body.appendChild(a),cursorDivCreated=!0}}function addResponsiveChart(a,b,c,d){initChartResize();var e=resizeGraph(b,d);void 0!==b.prevWidth?(resizeCtx(b,e.newWidth,e.newHeight,d),b.prevWidth=e.newWidth):d.responsiveScaleContent&&d.responsiveWindowInitialWidth&&(b.initialWidth=e.newWidth),b.prevWidth=e.newWidth,b.prevHeight=e.newHeight,jsGraphResize[jsGraphResize.length]=[a,b.tpchart,b,c,d]}function initChartResize(){0==initChartJsResize&&(window.addEventListener?window.addEventListener("resize",chartJsResize):window.attachEvent("resize",chartJsResize))}function getMaximumWidth(a){return null!=a.parentNode&&void 0!=a.parentNode&&(container=a.parentNode),container.clientWidth}function getMaximumHeight(a){return null!=a.parentNode&&void 0!=a.parentNode&&(container=a.parentNode),container.clientHeight}function resizeCtx(a,b,c,d){void 0===a.DefaultchartTextScale&&(a.DefaultchartTextScale=d.chartTextScale),void 0===a.DefaultchartLineScale&&(a.DefaultchartLineScale=d.chartLineScale),void 0===a.DefaultchartSpaceScale&&(a.DefaultchartSpaceScale=d.chartSpaceScale),a.canvas.height=c,a.canvas.width=b,void 0!==a.chartTextScale&&d.responsiveScaleContent&&(a.chartTextScale=a.DefaultchartTextScale*(b/a.initialWidth),a.chartLineScale=a.DefaultchartLineScale*(b/a.initialWidth),a.chartSpaceScale=a.DefaultchartSpaceScale*(b/a.initialWidth))}function resizeGraph(a,b){void 0===b.maintainAspectRatio&&(b.maintainAspectRatio=!0),void 0===b.responsiveMinWidth&&(b.responsiveMinWidth=0),void 0===b.responsiveMinHeight&&(b.responsiveMinHeight=0),void 0===b.responsiveMaxWidth&&(b.responsiveMaxWidth=9999999),void 0===b.responsiveMaxHeight&&(b.responsiveMaxHeight=9999999);var c=a.canvas;void 0===a.aspectRatio&&(a.aspectRatio=c.width/c.height);var d=getMaximumWidth(c),e=b.maintainAspectRatio?d/a.aspectRatio:getMaximumHeight(c);return d=Math.min(b.responsiveMaxWidth,Math.max(b.responsiveMinWidth,d)),e=Math.min(b.responsiveMaxHeight,Math.max(b.responsiveMinHeight,e)),{newWidth:parseInt(d),newHeight:parseInt(e)}}function chartJsResize(){for(var a=0;a<jsGraphResize.length;a++)void 0!==jsGraphResize[a][2].firstPass&&5==jsGraphResize[a][2].firstPass&&(jsGraphResize[a][2].firstPass=6),subUpdateChart(jsGraphResize[a][2],jsGraphResize[a][3],jsGraphResize[a][4])}function testRedraw(a,b,c){return 2==a.firstPass||4==a.firstPass||9==a.firstPass?(a.firstPass=6,subUpdateChart(a,b,c),!0):(a.firstPass=5,!1)}function updateChart(a,b,c,d,e){if(5==a.firstPass){if(window.devicePixelRatio&&(a.canvas.width=a.canvas.width/window.devicePixelRatio,a.canvas.height=a.canvas.height/window.devicePixelRatio),a.runanimationcompletefunction=e,d?a.firstPass=0:(c.responsive,a.firstPass=7),c.responsive)for(var f=0;f<jsGraphResize.length;f++)jsGraphResize[f][2].ChartNewId==a.ChartNewId&&(jsGraphResize[f][3]=b,jsGraphResize[f][4]=c);subUpdateChart(a,b,c)}}function subUpdateChart(a,b,c){if(dynamicFunction(b,c,a)){var d;void 0===a.firstPass?(a.firstPass=1,d=resizeGraph(a,c),c.responsive?(resizeCtx(a,d.newWidth,d.newHeight,c),a.prevWidth=d.newWidth,a.prevHeight=d.newHeight):(a.prevWidth=0,a.prevHeight=0),a.runanimationcompletefunction=!0,redrawGraph(a,b,c)):0==a.firstPass?(a.firstPass=1,d=resizeGraph(a,c),c.responsive?(resizeCtx(a,d.newWidth,d.newHeight,c),a.prevWidth=d.newWidth,a.prevHeight=d.newHeight):(a.prevWidth=0,a.prevHeight=0),redrawGraph(a,b,c)):1==a.firstPass||2==a.firstPass?a.firstPass=2:3==a.firstPass||4==a.firstPass?a.firstPass=4:5==a.firstPass?(a.firstPass=1,redrawGraph(a,b,c)):6==a.firstPass?(d=resizeGraph(a,c),d.newWidth!=a.prevWidth||d.newHeight!=a.prevHeight?(a.firstPass=3,a.clearRect(0,0,a.canvas.width,a.canvas.height),c.responsive?(resizeCtx(a,d.newWidth,d.newHeight,c),a.prevWidth=d.newWidth,a.prevHeight=d.newHeight):(a.prevWidth=0,a.prevHeight=0),redrawGraph(a,b,c)):a.firstPass=5):7==a.firstPass&&(d=resizeGraph(a,c),a.firstPass=3,a.clearRect(0,0,a.canvas.width,a.canvas.height),c.responsive?(resizeCtx(a,d.newWidth,d.newHeight,c),a.prevWidth=d.newWidth,a.prevHeight=d.newHeight):(a.prevWidth=0,a.prevHeight=0),redrawGraph(a,b,c))}}function redrawGraph(a,b,c){var d=new Chart(a);switch(a.tpchart){case"Bar":d.Bar(b,c);break;case"Pie":d.Pie(b,c);break;case"Doughnut":d.Doughnut(b,c);break;case"Radar":d.Radar(b,c);break;case"PolarArea":d.PolarArea(b,c);break;case"HorizontalBar":d.HorizontalBar(b,c);break;case"StackedBar":d.StackedBar(b,c);break;case"HorizontalStackedBar":d.HorizontalStackedBar(b,c);break;case"Line":d.Line(b,c)}}function checkBrowser(){return this.ver=navigator.appVersion,this.dom=document.getElementById?1:0,this.ie5=this.ver.indexOf("MSIE 5")>-1&&this.dom?1:0,this.ie4=document.all&&!this.dom?1:0,this.ns5=this.dom&&parseInt(this.ver)>=5?1:0,this.ns4=document.layers&&!this.dom?1:0,this.bw=this.ie5||this.ie4||this.ns4||this.ns5,this}function cursorInit(){scrolled=bw.ns4||bw.ns5?"window.pageYOffset":"document.body.scrollTop",bw.ns4&&document.captureEvents(Event.MOUSEMOVE)}function makeCursorObj(obj,nest){return createCursorDiv(),nest=nest?"document."+nest+".":"",this.css=bw.dom?document.getElementById(obj).style:bw.ie4?document.all[obj].style:bw.ns4?eval(nest+"document.layers."+obj):0,this.moveIt=b_moveIt,cursorInit(),this}function b_moveIt(a,b){this.x=a,this.y=b,this.css.left=this.x+"px",this.css.top=this.y+"px"}function isIE(){var a=navigator.userAgent.toLowerCase();return-1!=a.indexOf("msie")&&parseInt(a.split("msie")[1])}function mergeChartConfig(a,b){var c={};for(var d in a)c[d]=a[d];for(var e in b)c[e]=b[e];return c}function sleep(a){var b=new Date;for(b.setTime(b.getTime()+a);(new Date).getTime()<b.getTime(););}function saveCanvas(a,b,c){cvSave=a.getImageData(0,0,a.canvas.width,a.canvas.height);var d={savePng:!1,annotateDisplay:!1,animation:!1,dynamicDisplay:!1},e=mergeChartConfig(c,d);e.clearRect=!1,redrawGraph(a,b,e);var f;if("NewWindow"==c.savePngOutput&&(f=a.canvas.toDataURL(),a.putImageData(cvSave,0,0),window.open(f,"_blank")),"CurrentWindow"==c.savePngOutput&&(f=a.canvas.toDataURL(),a.putImageData(cvSave,0,0),window.location.href=f),"Save"==c.savePngOutput){f=a.canvas.toDataURL();var g=document.createElement("a");g.href=f,g.download=c.savePngName+".png",document.body.appendChild(g),g.click(),document.body.removeChild(g)}}function dynamicFunction(a,b,c){if(isIE()<9&&0!=isIE())return!0;if(b.dynamicDisplay){if(""==c.canvas.id){var d=new Date,e=d.getTime();c.canvas.id="Canvas_"+e}if(void 0===dynamicDisplay[c.canvas.id]?(dynamicDisplayList[dynamicDisplayList.length]=c.canvas.id,dynamicDisplay[c.canvas.id]=[c,!1,!1,a,b,c.canvas],dynamicDisplay[c.canvas.id][1]=isScrolledIntoView(c.canvas),window.onscroll=scrollFunction):0==dynamicDisplay[c.canvas.id][2]&&(dynamicDisplay[c.canvas.id][1]=isScrolledIntoView(c.canvas)),0==dynamicDisplay[c.canvas.id][1]&&0==dynamicDisplay[c.canvas.id][2])return!1;dynamicDisplay[c.canvas.id][2]=!0}return!0}function isScrolledIntoView(a){var b=0,c=0;for(elem=a;elem;)b+=elem.offsetLeft-elem.scrollLeft+elem.clientLeft,c+=elem.offsetTop-elem.scrollTop+elem.clientTop,elem=elem.offsetParent;return b+a.width/2>=window.pageXOffset&&b+a.width/2<=window.pageXOffset+window.innerWidth&&c+a.height/2>=window.pageYOffset&&c+a.height/2<=window.pageYOffset+window.innerHeight}function scrollFunction(){for(var a=0;a<dynamicDisplayList.length;a++)isScrolledIntoView(dynamicDisplay[dynamicDisplayList[a]][5])&&0==dynamicDisplay[dynamicDisplayList[a]][2]&&(dynamicDisplay[dynamicDisplayList[a]][1]=!0,redrawGraph(dynamicDisplay[dynamicDisplayList[a]][0],dynamicDisplay[dynamicDisplayList[a]][3],dynamicDisplay[dynamicDisplayList[a]][4]))}function clearAnnotate(a){jsGraphAnnotate[a]=[],jsTextMousePos[a]=[]}function getMousePos(a,b){var c=a.getBoundingClientRect();return{x:b.clientX-c.left,y:b.clientY-c.top}}function doMouseAction(config,ctx,event,data,action,funct){var onData=!1,topY,bottomY,leftX,rightX,textMsr;if("annotate"==action){var annotateDIV=document.getElementById("divCursor"),show=!1;annotateDIV.className=config.annotateClassName?config.annotateClassName:"",annotateDIV.style.border=config.annotateClassName?"":config.annotateBorder,annotateDIV.style.padding=config.annotateClassName?"":config.annotatePadding,annotateDIV.style.borderRadius=config.annotateClassName?"":config.annotateBorderRadius,annotateDIV.style.backgroundColor=config.annotateClassName?"":config.annotateBackgroundColor,annotateDIV.style.color=config.annotateClassName?"":config.annotateFontColor,annotateDIV.style.fontFamily=config.annotateClassName?"":config.annotateFontFamily,annotateDIV.style.fontSize=config.annotateClassName?"":Math.ceil(ctx.chartTextScale*config.annotateFontSize).toString()+"pt",annotateDIV.style.fontStyle=config.annotateClassName?"":config.annotateFontStyle,annotateDIV.style.zIndex=999,ctx.save(),ctx.font=annotateDIV.style.fontStyle+" "+annotateDIV.style.fontSize+" "+annotateDIV.style.fontFamily;var rect=ctx.canvas.getBoundingClientRect()}"annotate"==action&&(show=!1,annotateDIV.style.display=show?"":"none");for(var canvas_pos=getMousePos(ctx.canvas,event),i=0;i<jsGraphAnnotate[ctx.ChartNewId].length&&!show;i++){if("ARC"==jsGraphAnnotate[ctx.ChartNewId][i][0]){if(myStatData=jsGraphAnnotate[ctx.ChartNewId][i][3][jsGraphAnnotate[ctx.ChartNewId][i][1]],(distance=Math.sqrt((canvas_pos.x-myStatData.midPosX)*(canvas_pos.x-myStatData.midPosX)+(canvas_pos.y-myStatData.midPosY)*(canvas_pos.y-myStatData.midPosY)))>myStatData.int_radius&&distance<myStatData.radiusOffset&&(angle=(Math.acos((canvas_pos.x-myStatData.midPosX)/distance)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),canvas_pos.y<myStatData.midPosY&&(angle=-angle),angle=((angle+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),myStatData.startAngle=((myStatData.startAngle+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),myStatData.endAngle=((myStatData.endAngle+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),myStatData.endAngle<myStatData.startAngle&&(myStatData.endAngle+=2*Math.PI),(angle>myStatData.startAngle&&angle<myStatData.endAngle||angle>myStatData.startAngle-2*Math.PI&&angle<myStatData.endAngle-2*Math.PI||angle>myStatData.startAngle+2*Math.PI&&angle<myStatData.endAngle+2*Math.PI)&&(myStatData.graphPosX=canvas_pos.x,myStatData.graphPosY=canvas_pos.y,onData=!0,"annotate"==action&&jsGraphAnnotate[ctx.ChartNewId][i][4]?(dispString=tmplbis(setOptionValue(1,"ANNOTATELABEL",ctx,data,jsGraphAnnotate[ctx.ChartNewId][i][3],void 0,config.annotateLabel,jsGraphAnnotate[ctx.ChartNewId][i][1],-1,{otherVal:!0}),myStatData,config),textMsr=ctx.measureTextMultiLine(dispString,1*annotateDIV.style.fontSize.replace("pt","")),ctx.restore(),annotateDIV.innerHTML=dispString,show=!0):funct(event,ctx,config,data,myStatData),"annotate"==action&&jsGraphAnnotate[ctx.ChartNewId][i][4])))if(x=bw.ns4||bw.ns5?event.pageX:event.x,y=bw.ns4||bw.ns5?event.pageY:event.y,(bw.ie4||bw.ie5)&&(y+=eval(scrolled)),!0===config.annotateRelocate){var relocateX,relocateY;relocateX=0,relocateY=0,x+fromLeft+textMsr.textWidth>window.innerWidth-rect.left-fromLeft&&(relocateX=-textMsr.textWidth),y+fromTop+textMsr.textHeight>1*window.innerHeight-1*rect.top+fromTop&&(relocateY-=textMsr.textHeight+2*fromTop),oCursor.moveIt(Math.max(8-rect.left,x+fromLeft+relocateX),Math.max(8-rect.top,y+fromTop+relocateY))}else oCursor.moveIt(x+fromLeft,y+fromTop)}else if("RECT"==jsGraphAnnotate[ctx.ChartNewId][i][0]){if(myStatData=jsGraphAnnotate[ctx.ChartNewId][i][3][jsGraphAnnotate[ctx.ChartNewId][i][1]][jsGraphAnnotate[ctx.ChartNewId][i][2]],topY=Math.max(myStatData.yPosBottom,myStatData.yPosTop),bottomY=Math.min(myStatData.yPosBottom,myStatData.yPosTop),topY-bottomY<config.annotateBarMinimumDetectionHeight&&(topY=(topY+bottomY+config.annotateBarMinimumDetectionHeight)/2,bottomY=topY-config.annotateBarMinimumDetectionHeight),leftX=Math.min(myStatData.xPosLeft,myStatData.xPosRight),rightX=Math.max(myStatData.xPosLeft,myStatData.xPosRight),rightX-leftX<config.annotateBarMinimumDetectionHeight&&(rightX=(rightX+leftX+config.annotateBarMinimumDetectionHeight)/2,leftX=rightX-config.annotateBarMinimumDetectionHeight),canvas_pos.x>leftX&&canvas_pos.x<rightX&&canvas_pos.y<topY&&canvas_pos.y>bottomY&&(myStatData.graphPosX=canvas_pos.x,myStatData.graphPosY=canvas_pos.y,onData=!0,"annotate"==action&&jsGraphAnnotate[ctx.ChartNewId][i][4]?(dispString=tmplbis(setOptionValue(1,"ANNOTATELABEL",ctx,data,jsGraphAnnotate[ctx.ChartNewId][i][3],void 0,config.annotateLabel,jsGraphAnnotate[ctx.ChartNewId][i][1],jsGraphAnnotate[ctx.ChartNewId][i][2],{otherVal:!0}),myStatData,config),textMsr=ctx.measureTextMultiLine(dispString,1*annotateDIV.style.fontSize.replace("pt","")),ctx.restore(),annotateDIV.innerHTML=dispString,show=!0):funct(event,ctx,config,data,myStatData),"annotate"==action&&jsGraphAnnotate[ctx.ChartNewId][i][4]))if(x=bw.ns4||bw.ns5?event.pageX:event.x,y=bw.ns4||bw.ns5?event.pageY:event.y,(bw.ie4||bw.ie5)&&(y+=eval(scrolled)),!0===config.annotateRelocate){var relocateX,relocateY;relocateX=0,relocateY=0,x+fromLeft+textMsr.textWidth>window.innerWidth-rect.left-fromLeft&&(relocateX=-textMsr.textWidth),y+fromTop+textMsr.textHeight>1*window.innerHeight-1*rect.top+fromTop&&(relocateY-=textMsr.textHeight+2*fromTop),oCursor.moveIt(Math.max(8-rect.left,x+fromLeft+relocateX),Math.max(8-rect.top,y+fromTop+relocateY))}else oCursor.moveIt(x+fromLeft,y+fromTop)}else if("POINT"==jsGraphAnnotate[ctx.ChartNewId][i][0]){myStatData=jsGraphAnnotate[ctx.ChartNewId][i][3][jsGraphAnnotate[ctx.ChartNewId][i][1]][jsGraphAnnotate[ctx.ChartNewId][i][2]];var distance;if(config.detectAnnotateOnFullLine)if(canvas_pos.x<Math.min(myStatData.annotateStartPosX,myStatData.annotateEndPosX)-Math.ceil(ctx.chartSpaceScale*config.pointHitDetectionRadius)||canvas_pos.x>Math.max(myStatData.annotateStartPosX,myStatData.annotateEndPosX)+Math.ceil(ctx.chartSpaceScale*config.pointHitDetectionRadius)||canvas_pos.y<Math.min(myStatData.annotateStartPosY,myStatData.annotateEndPosY)-Math.ceil(ctx.chartSpaceScale*config.pointHitDetectionRadius)||canvas_pos.y>Math.max(myStatData.annotateStartPosY,myStatData.annotateEndPosY)+Math.ceil(ctx.chartSpaceScale*config.pointHitDetectionRadius))distance=Math.ceil(ctx.chartSpaceScale*config.pointHitDetectionRadius)+1;else if(void 0===myStatData.D1A)distance=Math.abs(canvas_pos.x-myStatData.posX);else if(void 0===myStatData.D2A)distance=Math.abs(canvas_pos.y-myStatData.posY);else{var D2B=-myStatData.D2A*canvas_pos.x+canvas_pos.y,g=-(myStatData.D1B-D2B)/(myStatData.D1A-myStatData.D2A),h=myStatData.D2A*g+D2B;distance=Math.sqrt((canvas_pos.x-g)*(canvas_pos.x-g)+(canvas_pos.y-h)*(canvas_pos.y-h))}else distance=Math.sqrt((canvas_pos.x-myStatData.posX)*(canvas_pos.x-myStatData.posX)+(canvas_pos.y-myStatData.posY)*(canvas_pos.y-myStatData.posY));if(distance<Math.ceil(ctx.chartSpaceScale*config.pointHitDetectionRadius)&&(myStatData.graphPosX=canvas_pos.x,myStatData.graphPosY=canvas_pos.y,onData=!0,"annotate"==action&&jsGraphAnnotate[ctx.ChartNewId][i][4]?(dispString=tmplbis(setOptionValue(1,"ANNOTATELABEL",ctx,data,jsGraphAnnotate[ctx.ChartNewId][i][3],void 0,config.annotateLabel,jsGraphAnnotate[ctx.ChartNewId][i][1],jsGraphAnnotate[ctx.ChartNewId][i][2],{otherVal:!0}),myStatData,config),textMsr=ctx.measureTextMultiLine(dispString,1*annotateDIV.style.fontSize.replace("pt","")),ctx.restore(),annotateDIV.innerHTML=dispString,show=!0):funct(event,ctx,config,data,myStatData),"annotate"==action&&jsGraphAnnotate[ctx.ChartNewId][i][4]))if(x=bw.ns4||bw.ns5?event.pageX:event.x,y=bw.ns4||bw.ns5?event.pageY:event.y,(bw.ie4||bw.ie5)&&(y+=eval(scrolled)),!0===config.annotateRelocate){var relocateX,relocateY;relocateX=0,relocateY=0,x+fromLeft+textMsr.textWidth>window.innerWidth-rect.left-fromLeft&&(relocateX=-textMsr.textWidth),y+fromTop+textMsr.textHeight>1*window.innerHeight-1*rect.top+fromTop&&(relocateY-=textMsr.textHeight+2*fromTop),oCursor.moveIt(Math.max(8-rect.left,x+fromLeft+relocateX),Math.max(8-rect.top,y+fromTop+relocateY))}else oCursor.moveIt(x+fromLeft,y+fromTop)}"annotate"==action&&jsGraphAnnotate[ctx.ChartNewId][i][4]&&(annotateDIV.style.display=show?"":"none",show&&annotatePrevShow!=i&&(annotatePrevShow>=0&&"function"==typeof config.annotateFunctionOut&&("ARC"==jsGraphAnnotate[ctx.ChartNewId][annotatePrevShow][0]?config.annotateFunctionOut("OUTANNOTATE",ctx,data,jsGraphAnnotate[ctx.ChartNewId][annotatePrevShow][3],jsGraphAnnotate[ctx.ChartNewId][annotatePrevShow][1],-1,null):config.annotateFunctionOut("OUTANNOTATE",ctx,data,jsGraphAnnotate[ctx.ChartNewId][annotatePrevShow][3],jsGraphAnnotate[ctx.ChartNewId][annotatePrevShow][1],jsGraphAnnotate[ctx.ChartNewId][annotatePrevShow][2],null)),annotatePrevShow=i,"function"==typeof config.annotateFunctionIn&&("ARC"==jsGraphAnnotate[ctx.ChartNewId][i][0]?config.annotateFunctionIn("INANNOTATE",ctx,data,jsGraphAnnotate[ctx.ChartNewId][i][3],jsGraphAnnotate[ctx.ChartNewId][i][1],-1,null):config.annotateFunctionIn("INANNOTATE",ctx,data,jsGraphAnnotate[ctx.ChartNewId][i][3],jsGraphAnnotate[ctx.ChartNewId][i][1],jsGraphAnnotate[ctx.ChartNewId][i][2],null))))}0==show&&"annotate"==action&&annotatePrevShow>=0&&("function"==typeof config.annotateFunctionOut&&("ARC"==jsGraphAnnotate[ctx.ChartNewId][annotatePrevShow][0]?config.annotateFunctionOut("OUTANNOTATE",ctx,data,jsGraphAnnotate[ctx.ChartNewId][annotatePrevShow][3],jsGraphAnnotate[ctx.ChartNewId][annotatePrevShow][1],-1,null):config.annotateFunctionOut("OUTANNOTATE",ctx,data,jsGraphAnnotate[ctx.ChartNewId][annotatePrevShow][3],jsGraphAnnotate[ctx.ChartNewId][annotatePrevShow][1],jsGraphAnnotate[ctx.ChartNewId][annotatePrevShow][2],null)),annotatePrevShow=-1);var inRect;if("annotate"!=action){if(config.detectMouseOnText)for(var i=0;i<jsTextMousePos[ctx.ChartNewId].length;i++){if(inRect=!0,Math.abs(jsTextMousePos[ctx.ChartNewId][i][3].p1-jsTextMousePos[ctx.ChartNewId][i][3].p2)<config.zeroValue)canvas_pos.x<Math.min(jsTextMousePos[ctx.ChartNewId][i][2].p1,jsTextMousePos[ctx.ChartNewId][i][2].p2)&&(inRect=!1),canvas_pos.x>Math.max(jsTextMousePos[ctx.ChartNewId][i][2].p1,jsTextMousePos[ctx.ChartNewId][i][2].p2)&&(inRect=!1),canvas_pos.y<Math.min(jsTextMousePos[ctx.ChartNewId][i][3].p1,jsTextMousePos[ctx.ChartNewId][i][3].p3)&&(inRect=!1),canvas_pos.y>Math.max(jsTextMousePos[ctx.ChartNewId][i][3].p1,jsTextMousePos[ctx.ChartNewId][i][3].p3)&&(inRect=!1);else if(Math.abs(jsTextMousePos[ctx.ChartNewId][i][2].p1-jsTextMousePos[ctx.ChartNewId][i][2].p2)<config.zeroValue)canvas_pos.x<Math.min(jsTextMousePos[ctx.ChartNewId][i][2].p1,jsTextMousePos[ctx.ChartNewId][i][2].p3)&&(inRect=!1),canvas_pos.x>Math.max(jsTextMousePos[ctx.ChartNewId][i][2].p1,jsTextMousePos[ctx.ChartNewId][i][2].p3)&&(inRect=!1),canvas_pos.y<Math.min(jsTextMousePos[ctx.ChartNewId][i][3].p1,jsTextMousePos[ctx.ChartNewId][i][3].p2)&&(inRect=!1),canvas_pos.y>Math.max(jsTextMousePos[ctx.ChartNewId][i][3].p1,jsTextMousePos[ctx.ChartNewId][i][3].p2)&&(inRect=!1);else{var P12=Math.tan(jsTextMousePos[ctx.ChartNewId][i][4]),D12=jsTextMousePos[ctx.ChartNewId][i][3].p1-P12*jsTextMousePos[ctx.ChartNewId][i][2].p1,D34=jsTextMousePos[ctx.ChartNewId][i][3].p3-P12*jsTextMousePos[ctx.ChartNewId][i][2].p3,P13=-1/P12,D13=jsTextMousePos[ctx.ChartNewId][i][3].p1-P13*jsTextMousePos[ctx.ChartNewId][i][2].p1,D24=jsTextMousePos[ctx.ChartNewId][i][3].p4-P13*jsTextMousePos[ctx.ChartNewId][i][2].p4,y1=P12*canvas_pos.x+D12,y2=P12*canvas_pos.x+D34,y3=P13*canvas_pos.x+D13,y4=P13*canvas_pos.x+D24;canvas_pos.y<Math.min(y1,y2)&&(inRect=!1),canvas_pos.y>Math.max(y1,y2)&&(inRect=!1),canvas_pos.y<Math.min(y3,y4)&&(inRect=!1),canvas_pos.y>Math.max(y3,y4)&&(inRect=!1)}inRect&&(onData=!0,funct(event,ctx,config,data,{type:"CLICKONTEXT",values:jsTextMousePos[ctx.ChartNewId][i]}))}0==onData&&funct(event,ctx,config,data,null)}}function animationCorrection(a,b,c,d,e,f){var g=a,h=0;if(-1!=e){g<1&&d<c.animationStartWithDataset-1&&c.animationStartWithDataset-1!=-1&&(g=1),g<1&&e<c.animationStartWithData-1&&c.animationStartWithData-1!=-1&&(g=1);var i=1,j=a;if(g<1&&c.animationByDataset){g=0,i=0;var k=c.animationStartWithDataset-1;c.animationStartWithDataset-1==-1&&(k=0);var l=c.animationSteps/(b.datasets.length-k);if(a>=(d-k+1)*l/c.animationSteps)g=1;else if(a>=(d-k)*l/c.animationSteps){var m=a-(d-k)*l/c.animationSteps;c.animationLeftToRight?j=m*(b.datasets.length-k):g=m*(b.datasets.length-k),i=1}}if(1==i&&g<1&&c.animationLeftToRight){g=0;var n=c.animationStartWithData-1;c.animationStartWithData-1==-1&&(n=0);var o=c.animationSteps/(b.datasets[d].data.length-n-1+f);j>=(e-n)*o/c.animationSteps&&(g=1,j<=(e+1-n)*o/c.animationSteps&&(h=(b.datasets[d].data.length-n-1)*(j-(e-n)*o/c.animationSteps)))}}else g<1&&d<c.animationStartWithData-1&&(g=1);return{mainVal:g,subVal:h,animVal:g+h}}function showLabels(a,b,c,d){var e=setOptionValue(1,"SHOWLABEL",a,b,void 0,void 0,c.showXLabels,d,-1,void 0,{labelValue:fmtChartJS(c,b.labels[d],c.fmtXLabel),unformatedLabelValue:b.labels[d]});return"number"==typeof e&&(e=d>=c.firstLabelToShow-1&&(d+c.firstLabelToShow-1)%parseInt(e)==0),e}function showYLabels(a,b,c,d,e){var f=setOptionValue(1,"SHOWYLABEL",a,b,void 0,void 0,c.showYLabels,-1,d,void 0,{labelValue:e});return"number"==typeof f&&(f=d>=c.firstYLabelToShow-1&&(d+c.firstYLabelToShow-1)%parseInt(f)==0),f}function drawLegend(a,b,c,d,e){var f;1==c.legendBorders&&(d.save(),d.setLineDash(lineStyleFn(c.legendBordersStyle)),d.beginPath(),d.lineWidth=Math.ceil(d.chartLineScale*c.legendBordersWidth),d.strokeStyle=c.legendBordersColors,d.moveTo(a.xLegendBorderPos,a.yLegendBorderPos),d.lineTo(a.xLegendBorderPos,a.yLegendBorderPos+a.legendBorderHeight),d.lineTo(a.xLegendBorderPos+a.legendBorderWidth,a.yLegendBorderPos+a.legendBorderHeight),d.lineTo(a.xLegendBorderPos+a.legendBorderWidth,a.yLegendBorderPos),d.lineTo(a.xLegendBorderPos,a.yLegendBorderPos),d.stroke(),d.closePath(),d.setLineDash([]),d.fillStyle="rgba(0,0,0,0)",d.fillStyle=c.legendFillColor,d.fill(),d.restore()),nbcols=a.nbLegendCols-1,ypos=a.yFirstLegendTextPos-(Math.ceil(d.chartTextScale*c.legendFontSize)+Math.ceil(d.chartSpaceScale*c.legendSpaceBetweenTextVertical)),xpos=0,a.drawLegendOnData?fromi=b.datasets.length:fromi=b.length;for(var g=fromi-1;g>=0;g--)if(orderi=g,a.reverseLegend&&(a.drawLegendOnData?orderi=b.datasets.length-g-1:orderi=b.length-g-1),a.drawLegendOnData?tpof=typeof b.datasets[orderi].title:tpof=typeof b[orderi].title,"string"==tpof&&""!=(f=a.drawLegendOnData?fmtChartJS(c,b.datasets[orderi].title,c.fmtLegend).trim():fmtChartJS(c,b[orderi].title,c.fmtLegend).trim())){nbcols++,nbcols==a.nbLegendCols?(nbcols=0,xpos=a.xFirstLegendTextPos,ypos+=Math.ceil(d.chartTextScale*c.legendFontSize)+Math.ceil(d.chartSpaceScale*c.legendSpaceBetweenTextVertical)):xpos+=a.widestLegend+Math.ceil(d.chartSpaceScale*c.legendSpaceBetweenTextHorizontal),d.save(),d.beginPath();var h=a.legendBox;if("Bar"!=d.tpchart&&"StackedBar"!=d.tpchart||"Line"!=b.datasets[orderi].type||c.datasetFill||(h=!1),h)d.lineWidth=Math.ceil(d.chartLineScale*c.datasetStrokeWidth),d.beginPath(),a.drawLegendOnData?(d.strokeStyle=setOptionValue(1,"LEGENDSTROKECOLOR",d,b,void 0,b.datasets[orderi].strokeColor,c.defaultFillColor,orderi,-1,{animationValue:1,xPosLeft:xpos,yPosBottom:ypos,xPosRight:xpos+Math.ceil(d.chartTextScale*c.legendBlockSize),yPosTop:ypos-Math.ceil(d.chartTextScale*c.legendFontSize)}),d.setLineDash(lineStyleFn(setOptionValue(1,"LEGENDLINEDASH",d,b,void 0,b.datasets[orderi].datasetStrokeStyle,c.datasetStrokeStyle,orderi,-1,{animationValue:1,xPosLeft:xpos,yPosBottom:ypos,xPosRight:xpos+Math.ceil(d.chartTextScale*c.legendBlockSize),yPosTop:ypos-Math.ceil(d.chartTextScale*c.legendFontSize)})))):(d.strokeStyle=setOptionValue(1,"LEGENDSTROKECOLOR",d,b,void 0,b[orderi].strokeColor,c.defaultFillColor,orderi,-1,{animationValue:1,xPosLeft:xpos,yPosBottom:ypos,xPosRight:xpos+Math.ceil(d.chartTextScale*c.legendBlockSize),yPosTop:ypos-Math.ceil(d.chartTextScale*c.legendFontSize)}),d.setLineDash(lineStyleFn(setOptionValue(1,"LEGENDSEGMENTTROKESTYLE",d,b,void 0,b[orderi].segmentStrokeStyle,c.segmentStrokeStyle,orderi,-1,{animationValue:1,xPosLeft:xpos,yPosBottom:ypos,xPosRight:xpos+Math.ceil(d.chartTextScale*c.legendBlockSize),yPosTop:ypos-Math.ceil(d.chartTextScale*c.legendFontSize)})))),d.moveTo(xpos,ypos),d.lineTo(xpos+Math.ceil(d.chartTextScale*c.legendBlockSize),ypos),d.lineTo(xpos+Math.ceil(d.chartTextScale*c.legendBlockSize),ypos-Math.ceil(d.chartTextScale*c.legendFontSize)),d.lineTo(xpos,ypos-Math.ceil(d.chartTextScale*c.legendFontSize)),d.lineTo(xpos,ypos),d.stroke(),d.closePath(),a.drawLegendOnData?d.fillStyle=setOptionValue(1,"LEGENDFILLCOLOR",d,b,void 0,b.datasets[orderi].fillColor,c.defaultFillColor,orderi,-1,{animationValue:1,xPosLeft:xpos,yPosBottom:ypos,xPosRight:xpos+Math.ceil(d.chartTextScale*c.legendBlockSize),yPosTop:ypos-Math.ceil(d.chartTextScale*c.legendFontSize)}):d.fillStyle=setOptionValue(1,"LEGENDFILLCOLOR",d,b,void 0,b[orderi].color,c.defaultFillColor,orderi,-1,{animationValue:1,xPosLeft:xpos,yPosBottom:ypos,xPosRight:xpos+Math.ceil(d.chartTextScale*c.legendBlockSize),yPosTop:ypos-Math.ceil(d.chartTextScale*c.legendFontSize)}),d.fill();else{if(d.lineWidth=c.legendColorIndicatorStrokeWidth?c.legendColorIndicatorStrokeWidth:Math.ceil(d.chartLineScale*c.datasetStrokeWidth),c.legendColorIndicatorStrokeWidth&&c.legendColorIndicatorStrokeWidth>Math.ceil(d.chartTextScale*c.legendFontSize)&&(d.lineWidth=Math.ceil(d.chartTextScale*c.legendFontSize)),a.drawLegendOnData?(d.strokeStyle=setOptionValue(1,"LEGENDSTROKECOLOR",d,b,void 0,b.datasets[orderi].strokeColor,c.defaultFillColor,orderi,-1,{animationValue:1,xPosLeft:xpos,yPosBottom:ypos,xPosRight:xpos+Math.ceil(d.chartTextScale*c.legendBlockSize),yPosTop:ypos-Math.ceil(d.chartTextScale*c.legendFontSize)}),d.setLineDash(lineStyleFn(setOptionValue(1,"LEGENDLINEDASH",d,b,void 0,b.datasets[orderi].datasetStrokeStyle,c.datasetStrokeStyle,orderi,-1,{animationValue:1,xPosLeft:xpos,yPosBottom:ypos,xPosRight:xpos+Math.ceil(d.chartTextScale*c.legendBlockSize),yPosTop:ypos-Math.ceil(d.chartTextScale*c.legendFontSize)})))):(d.strokeStyle=setOptionValue(1,"LEGENDSTROKECOLOR",d,b,void 0,b[orderi].strokeColor,c.defaultFillColor,orderi,-1,{animationValue:1,xPosLeft:xpos,yPosBottom:ypos,xPosRight:xpos+Math.ceil(d.chartTextScale*c.legendBlockSize),yPosTop:ypos-Math.ceil(d.chartTextScale*c.legendFontSize)}),d.setLineDash(lineStyleFn(setOptionValue(1,"LEGENDSEGMENTTROKESTYLE",d,b,void 0,b[orderi].segmentStrokeStyle,c.segmentStrokeStyle,orderi,-1,{animationValue:1,xPosLeft:xpos,yPosBottom:ypos,xPosRight:xpos+Math.ceil(d.chartTextScale*c.legendBlockSize),yPosTop:ypos-Math.ceil(d.chartTextScale*c.legendFontSize)})))),d.moveTo(xpos+2,ypos-Math.ceil(d.chartTextScale*c.legendFontSize)/2),d.lineTo(xpos+2+Math.ceil(d.chartTextScale*c.legendBlockSize),ypos-Math.ceil(d.chartTextScale*c.legendFontSize)/2),d.stroke(),d.fill(),c.pointDot){d.beginPath(),d.fillStyle=setOptionValue(1,"LEGENDMARKERFILLCOLOR",d,b,void 0,b.datasets[orderi].pointColor,c.defaultStrokeColor,orderi,-1,{nullvalue:!0}),d.strokeStyle=setOptionValue(1,"LEGENDMARKERSTROKESTYLE",d,b,void 0,b.datasets[orderi].pointStrokeColor,c.defaultStrokeColor,orderi,-1,{nullvalue:!0}),d.lineWidth=setOptionValue(d.chartLineScale,"LEGENDMARKERLINEWIDTH",d,b,void 0,b.datasets[orderi].pointDotStrokeWidth,c.pointDotStrokeWidth,orderi,-1,{nullvalue:!0});var i=setOptionValue(1,"LEGENDMARKERSHAPE",d,b,void 0,b.datasets[orderi].markerShape,c.markerShape,orderi,-1,{nullvalue:!0}),j=setOptionValue(d.chartSpaceScale,"LEGENDMARKERRADIUS",d,b,void 0,b.datasets[orderi].pointDotRadius,c.pointDotRadius,orderi,-1,{nullvalue:!0}),k=setOptionValue(1,"LEGENDMARKERSTROKESTYLE",d,b,void 0,b.datasets[orderi].pointDotStrokeStyle,c.pointDotStrokeStyle,orderi,-1,{nullvalue:!0});drawMarker(d,xpos+2+Math.ceil(d.chartTextScale*c.legendBlockSize)/2,ypos-Math.ceil(d.chartTextScale*c.legendFontSize)/2,i,j,k)}d.fill()}d.restore(),d.save(),d.beginPath(),d.font=c.legendFontStyle+" "+Math.ceil(d.chartTextScale*c.legendFontSize).toString()+"px "+c.legendFontFamily,d.fillStyle=setOptionValue(1,"LEGENDFONTCOLOR",d,b,void 0,void 0,c.legendFontColor,orderi,-1,{nullvalue:!0}),d.textAlign="left",d.textBaseline="bottom",d.translate(xpos+Math.ceil(d.chartTextScale*c.legendBlockSize)+Math.ceil(d.chartSpaceScale*c.legendSpaceBetweenBoxAndText),ypos),d.fillTextMultiLine(f,0,0,d.textBaseline,Math.ceil(d.chartTextScale*c.legendFontSize),!0,c.detectMouseOnText,d,"LEGEND_TEXTMOUSE",0,xpos+Math.ceil(d.chartTextScale*c.legendBlockSize)+Math.ceil(d.chartSpaceScale*c.legendSpaceBetweenBoxAndText),ypos,orderi,-1),d.restore()}}function drawMarker(a,b,c,d,e,f){switch(a.setLineDash(lineStyleFn(f)),d){case"square":a.rect(b-e,c-e,2*e,2*e),a.stroke(),a.fill(),a.setLineDash([]);break;case"triangle":pointA_x=0,pointA_y=2/3*e,a.moveTo(b,c-pointA_y),a.lineTo(b+pointA_y*Math.sin(4/3),c+pointA_y*Math.cos(4/3)),a.lineTo(b-pointA_y*Math.sin(4/3),c+pointA_y*Math.cos(4/3)),a.lineTo(b,c-pointA_y),a.stroke(),a.fill(),a.setLineDash([]);break;case"diamond":a.moveTo(b,c+e),a.lineTo(b+e,c),a.lineTo(b,c-e),a.lineTo(b-e,c),a.lineTo(b,c+e),a.stroke(),a.fill(),a.setLineDash([]);break;case"plus":a.moveTo(b,c-e),a.lineTo(b,c+e),a.moveTo(b-e,c),a.lineTo(b+e,c),a.stroke(),a.setLineDash([]);break;case"cross":a.moveTo(b-e,c-e),a.lineTo(b+e,c+e),a.moveTo(b-e,c+e),a.lineTo(b+e,c-e),a.stroke(),a.setLineDash([]);break;case"circle":default:a.arc(b,c,e,0,2*Math.PI*1,!0),a.stroke(),a.fill(),a.setLineDash([])}}function initPassVariableData_part1(a,b,c){var d,e,f,g,h,i,j,l,m,n,o,q,r,s,t,u,v;switch(c.tpdata){case 1:f=[];var w,x,y,z=((b.totalAmplitude*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI);z<=b.zeroValue&&(z=2*Math.PI),x=((-b.startAngle*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),y=((b.startAngle*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),startAngle=x,j=0,notemptyval=0;var A=-1,B=-1,C=-1;for(g=-Number.MAX_VALUE,h=Number.MAX_VALUE,d=0;d<a.length;d++)"PolarArea"!=c.tpchart&&1*a[d].value<0||void 0!==a[d].value&&(-1==A&&(A=d),g=Math.max(g,1*a[d].value),h=Math.min(h,1*a[d].value),notemptyval++,j+=1*a[d].value,B=d);i=0;var D=-1;for(d=0;d<a.length;d++)n="string"==typeof a[d].title?a[d].title.trim():"",void 0!==a[d].value&&("PolarArea"==c.tpchart||1*a[d].value>=0)?(w="PolarArea"==c.tpchart?notemptyval>0?z/notemptyval:0:1*a[d].value/j*z,w>=2*Math.PI&&(w=2*Math.PI-.001),i+=1*a[d].value,f[d]={config:b,v1:fmtChartJS(b,n,b.fmtV1),v2:fmtChartJS(b,1*a[d].value,b.fmtV2),v3:fmtChartJS(b,i,b.fmtV3),v4:fmtChartJS(b,j,b.fmtV4),v5:fmtChartJS(b,w,b.fmtV5),v6:roundToWithThousands(b,fmtChartJS(b,100*a[d].value/j,b.fmtV6),b.roundPct),v7:0,v8:0,v9:0,v10:0,v11:fmtChartJS(b,x-w,b.fmtV11),v12:fmtChartJS(b,x,b.fmtV12),v13:fmtChartJS(b,d,b.fmtV13),lgtxt:n,datavalue:1*a[d].value,cumvalue:i,totvalue:j,segmentAngle:w,firstAngle:startAngle,pctvalue:100*a[d].value/j,startAngle:x,realStartAngle:y,endAngle:x+w,maxvalue:g,minvalue:h,i:d,firstNotMissing:A,lastNotMissing:B,prevNotMissing:C,prevMissing:D,nextNotMissing:-1,radiusOffset:0,midPosX:0,midPosY:0,int_radius:0,ext_radius:0,data:a},x+=w,y-=w,-1!=C&&(f[C].nextNotMissing=d),C=d):(f[d]={v1:n,maxvalue:g,minvalue:h,i:d,firstNotMissing:A,lastNotMissing:B,prevNotMissing:C},D=d);break;case 0:default:var E;for(f=[],g=[],g[0]=[],g[1]=[],h=[],h[0]=[],h[1]=[],i=[],i[0]=[],i[1]=[],j=[],j[0]=[],j[1]=[],l=[],l[0]=[],l[1]=[],m=[],m[0]=[],m[1]=[],q=[],r=[],s=[],t=[],u=[],q[0]=[],q[1]=[],v=0,d=0;d<a.datasets.length;d++){if(void 0!==a.datasets[d].xPos&&"Line"==tpdraw(c,a.datasets[d]))for(e=a.datasets[d].data.length;e<a.datasets[d].xPos.length;e++)a.datasets[d].data.push(void 0);else for(e=a.datasets[d].data.length;e<a.labels.length;e++)a.datasets[d].data.push(void 0);for(E=2==a.datasets[d].axis?0:1,f[d]=[],l[0][d]=-Number.MAX_VALUE,l[1][d]=-Number.MAX_VALUE,m[0][d]=Number.MAX_VALUE,m[1][d]=Number.MAX_VALUE,r[d]=-1,s[d]=-1,e=0;e<a.datasets[d].data.length;e++)void 0===t[e]&&(t[e]=-1,u[e]=-1,j[0][e]=0,g[0][e]=-Number.MAX_VALUE,h[0][e]=Number.MAX_VALUE,j[1][e]=0,g[1][e]=-Number.MAX_VALUE,h[1][e]=Number.MAX_VALUE),void 0!==a.datasets[d].data[e]&&(v+=1*a.datasets[d].data[e],-1==r[d]&&(r[d]=e),s[d]=e,-1==t[e]&&(t[e]=d),u[e]=d,j[E][e]+=1*a.datasets[d].data[e],g[E][e]=Math.max(g[E][e],1*a.datasets[d].data[e]),h[E][e]=Math.min(h[E][e],1*a.datasets[d].data[e]),l[E][d]=Math.max(l[E][d],1*a.datasets[d].data[e]),m[E][d]=Math.min(m[E][d],1*a.datasets[d].data[e]))}for(d=0;d<a.datasets.length;d++){E=2==a.datasets[d].axis?0:1,n="string"==typeof a.datasets[d].title?a.datasets[d].title.trim():"";var F=-1,G=-1;for(e=0;e<a.datasets[d].data.length;e++)if(void 0===i[0][e]&&(i[0][e]=0,q[0][e]=-1,i[1][e]=0,q[1][e]=-1),o="",void 0!==a.datasets[d].xPos&&void 0!==a.datasets[d].xPos[e]&&(o=a.datasets[d].xPos[e]),""==o&&void 0!==a.labels[e]&&(o=a.labels[e]),"string"==typeof o&&(o=o.trim()),void 0!==a.datasets[d].data[e]){switch(i[E][e]+=1*a.datasets[d].data[e],tpdraw(c,a.datasets[d])){case"Bar":case"StackedBar":case"HorizontalBar":case"HorizontalStackedBar":f[d][e]={config:b,v1:fmtChartJS(b,n,b.fmtV1),v2:fmtChartJS(b,o,b.fmtV2),v3:fmtChartJS(b,1*a.datasets[d].data[e],b.fmtV3),v4:fmtChartJS(b,i[E][e],b.fmtV4),v5:fmtChartJS(b,j[E][e],b.fmtV5),v6:roundToWithThousands(b,fmtChartJS(b,100*a.datasets[d].data[e]/j[E][e],b.fmtV6),b.roundPct),v6T:roundToWithThousands(b,fmtChartJS(b,100*a.datasets[d].data[e]/v,b.fmtV6T),b.roundPct),v11:fmtChartJS(b,d,b.fmtV11),v12:fmtChartJS(b,e,b.fmtV12),lgtxt:n,lgtxt2:o,datavalue:1*a.datasets[d].data[e],cumvalue:i[E][e],totvalue:j[E][e],pctvalue:100*a.datasets[d].data[e]/j[E][e],pctvalueT:100*a.datasets[d].data[e]/v,maxvalue:g[E][e],minvalue:h[E][e],lmaxvalue:l[E][d],lminvalue:m[E][d],grandtotal:v,firstNotMissing:t[e],lastNotMissing:u[e],prevNotMissing:F,prevMissing:G,nextNotMissing:-1,j:e,i:d,data:a},1*a.datasets[d].data[e]!=0||"HorizontalStackedBar"!=tpdraw(c,a.datasets[d])&&"StackedBar"!=tpdraw(c,a.datasets[d])||(f[d][e].v3="");break;case"Line":case"Radar":f[d][e]={config:b,v1:fmtChartJS(b,n,b.fmtV1),v2:fmtChartJS(b,o,b.fmtV2),v3:fmtChartJS(b,1*a.datasets[d].data[e],b.fmtV3),v5:fmtChartJS(b,1*a.datasets[d].data[e],b.fmtV5),v6:fmtChartJS(b,g[E][e],b.fmtV6),v7:fmtChartJS(b,j[E][e],b.fmtV7),v8:roundToWithThousands(b,fmtChartJS(b,100*a.datasets[d].data[e]/j[E][e],b.fmtV8),b.roundPct),v8T:roundToWithThousands(b,fmtChartJS(b,100*a.datasets[d].data[e]/v,b.fmtV8T),b.roundPct),v11:fmtChartJS(b,d,b.fmtV11),v12:fmtChartJS(b,e,b.fmtV12),lgtxt:n,lgtxt2:o,datavalue:1*a.datasets[d].data[e],diffnext:1*a.datasets[d].data[e],pctvalue:100*a.datasets[d].data[e]/j[E][e],pctvalueT:100*a.datasets[d].data[e]/v,totvalue:j[E][e],cumvalue:i[E][e],maxvalue:g[E][e],minvalue:h[E][e],lmaxvalue:l[E][d],lminvalue:m[E][d],grandtotal:v,firstNotMissing:r[d],lastNotMissing:s[d],prevNotMissing:F,prevMissing:G,nextNotMissing:-1,j:e,i:d,data:a},q[E][e]>=0?(f[d][e].v4=fmtChartJS(b,-1!=q[E][e]?1*a.datasets[d].data[e]-f[q[E][e]][e].datavalue:1*a.datasets[d].data[e],b.fmtV4),f[d][e].diffprev=-1!=q[E][e]?1*a.datasets[d].data[e]-f[q[E][e]][e].datavalue:1*a.datasets[d].data[e],f[q[E][e]][e].diffnext=a.datasets[q[E][e]].data[e]-a.datasets[d].data[e],f[q[E][e]][e].v5=f[q[E][e]][e].diffnext):f[d][e].v4=1*a.datasets[d].data[e],q[E][e]=d}if(void 0!==a.datasets[d].data[e]){if(-1!=F)for(k=F;k<e;k++)f[d][k].nextNotMissing=e;F=e}}else switch(G=e,tpdraw(c,a.datasets[d])){case"Bar":case"StackedBar":case"HorizontalBar":case"HorizontalStackedBar":f[d][e]={v1:n,lmaxvalue:l[E][d],lminvalue:m[E][d],firstNotMissing:t[e],lastNotMissing:u[e],prevNotMissing:F,prevMissing:G,grandtotal:v};break;case"Line":case"Radar":f[d][e]={v1:n,lmaxvalue:l[E][d],lminvalue:m[E][d],firstNotMissing:r[d],lastNotMissing:s[d],prevNotMissing:F,prevMissing:G,grandtotal:v}}}}return f}function initPassVariableData_part2(a,b,c,d,e){function l(a,b,d,e,f,g){if("object"==typeof d.datasets[a].xPos&&void 0!==d.datasets[a].xPos[Math.floor(b+c.zeroValue)]){var h=f*g,i=void 0!==d.xBegin?d.xBegin:1*d.labels[0],j=void 0!==d.xEnd?d.xEnd:1*d.labels[d.labels.length-1];if(j<=i&&(j=i+100),1*d.datasets[a].xPos[Math.floor(b+c.zeroValue)]>=i&&d.datasets[a].xPos[Math.floor(b+c.zeroValue)]<=j){var k=e+h*((1*d.datasets[a].xPos[Math.floor(b+c.zeroValue)]-i)/(j-i)),m=k;return Math.abs(b-Math.floor(b+c.zeroValue))>c.zeroValue&&(m=l(a,Math.ceil(b-c.zeroValue),d)),k+(b-Math.floor(b+c.zeroValue))*(m-k)}}return e+f*b}function n(a,b,c,d){if(a)return p(q(b)*d-q(c.graphMin)*d,void 0,0);var e=c.steps*c.stepValue,f=b-c.graphMin,g=p(f/e,1,0);return d*c.steps*g}function o(a,b,c){var d=b.steps*b.stepValue,e=a-b.graphMin,f=p(e/d,1,0);return c*b.steps*f}function p(a,b,c){return isNumber(b)&&a>b?b:isNumber(c)&&a<c?c:a}function q(a){return Math.log(a)/Math.LN10}var g,h,f=0;switch(d.tpdata){case 1:for(g=0;g<b.length;g++)a[g].v7=fmtChartJS(c,e.midPosX,c.fmtV7),a[g].v8=fmtChartJS(c,e.midPosY,c.fmtV8),a[g].v9=fmtChartJS(c,e.int_radius,c.fmtV9),a[g].v10=fmtChartJS(c,e.ext_radius,c.fmtV10),"PolarArea"==d.tpchart?(a[g].radiusOffset=n(c.logarithmic,1*b[g].value,e.calculatedScale,e.scaleHop),a[g].v10=fmtChartJS(c,a[g].radiusOffset,c.fmtV10)):(a[g].v10=fmtChartJS(c,e.ext_radius,c.fmtV10),a[g].radiusOffset=e.ext_radius),a[g].midPosX=e.midPosX,a[g].midPosY=e.midPosY,a[g].calculatedScale=e.calculatedScale,a[g].scaleHop=e.scaleHop,a[g].int_radius=e.int_radius,a[g].ext_radius=e.ext_radius;break;case 0:default:var i=new Array(b.datasets.length),j=new Array(b.datasets.length);for(g=0;g<b.datasets.length;g++)switch(tpdraw(d,b.datasets[g])){case"Line":for(h=0;h<b.datasets[g].data.length;h++)a[g][h].xAxisPosY=e.xAxisPosY,a[g][h].yAxisPosX=e.yAxisPosX,a[g][h].valueHop=e.valueHop,a[g][h].nbValueHop=e.nbValueHop,2==b.datasets[g].axis?(a[g][h].scaleHop=e.scaleHop2,a[g][h].zeroY=e.zeroY2,a[g][h].calculatedScale=e.calculatedScale2,a[g][h].logarithmic=e.logarithmic2):(a[g][h].scaleHop=e.scaleHop,a[g][h].zeroY=e.zeroY,a[g][h].calculatedScale=e.calculatedScale,a[g][h].logarithmic=e.logarithmic),a[g][h].xPos=l(g,h,b,e.yAxisPosX,e.valueHop,e.nbValueHop),a[g][h].yAxisPos=e.xAxisPosY-a[g][h].zeroY,"Bar"!=d.tpchart&&"StackedBar"!=d.tpchart||(a[g][h].xPos+=e.valueHop/2,a[g][h].yAxisPosX+=e.valueHop/2),0==h?(a[g][h].lmaxvalue_offset=n(a[g][h].logarithmic,a[g][h].lmaxvalue,a[g][h].calculatedScale,a[g][h].scaleHop)-a[g][h].zeroY,a[g][h].lminvalue_offset=n(a[g][h].logarithmic,a[g][h].lminvalue,a[g][h].calculatedScale,a[g][h].scaleHop)-a[g][h].zeroY):(a[g][h].lmaxvalue_offset=a[g][0].lmaxvalue_offset,a[g][h].lminvalue_offset=a[g][0].lminvalue_offset),void 0!==b.datasets[g].data[h]&&(a[g][h].yPosOffset=n(a[g][h].logarithmic,b.datasets[g].data[h],a[g][h].calculatedScale,a[g][h].scaleHop)-a[g][h].zeroY,a[g][h].posY=a[g][h].yAxisPos-a[g][h].yPosOffset),a[g][h].posX=a[g][h].xPos,a[g][h].v9=a[g][h].xPos,a[g][h].v10=a[g][h].posY,a[g][h].annotateStartPosX=a[g][h].xPos,a[g][h].annotateEndPosX=a[g][h].xPos,a[g][h].annotateStartPosY=e.xAxisPosY,a[g][h].annotateEndPosY=e.xAxisPosY-e.msr.availableHeight,a[g][h].D1A=void 0,a[g][h].D1B=void 0;break;case"Radar":var k=2*Math.PI/b.datasets[0].data.length;for(h=0;h<b.datasets[g].data.length;h++)a[g][h].midPosX=e.midPosX,a[g][h].midPosY=e.midPosY,a[g][h].int_radius=0,a[g][h].ext_radius=e.maxSize,a[g][h].radiusOffset=e.maxSize,a[g][h].calculatedScale=e.calculatedScale,a[g][h].scaleHop=e.scaleHop,a[g][h].calculated_offset=n(c.logarithmic,b.datasets[g].data[h],e.calculatedScale,e.scaleHop),a[g][h].offsetX=Math.cos(c.startAngle*Math.PI/180-h*k)*a[g][h].calculated_offset,a[g][h].offsetY=Math.sin(c.startAngle*Math.PI/180-h*k)*a[g][h].calculated_offset,a[g][h].v9=a[g][h].midPosX+a[g][h].offsetX,a[g][h].v10=a[g][h].midPosY-a[g][h].offsetY,a[g][h].posX=a[g][h].midPosX+a[g][h].offsetX,a[g][h].posY=a[g][h].midPosY-a[g][h].offsetY,a[g][h].calculated_offset_max=0==h?n(c.logarithmic,a[g][h].lmaxvalue,e.calculatedScale,e.scaleHop):a[0][h].calculated_offset_max,a[g][h].annotateStartPosX=e.midPosX,a[g][h].annotateEndPosX=e.midPosX+Math.cos(c.startAngle*Math.PI/180-h*k)*e.maxSize,a[g][h].annotateStartPosY=e.midPosY,a[g][h].annotateEndPosY=e.midPosY-Math.sin(c.startAngle*Math.PI/180-h*k)*e.maxSize,Math.abs(a[g][h].annotateStartPosX-a[g][h].annotateEndPosX)<c.zeroValue?(a[g][h].D1A=void 0,a[g][h].D1B=void 0,a[g][h].D2A=0):(a[g][h].D1A=(a[g][h].annotateStartPosY-a[g][h].annotateEndPosY)/(a[g][h].annotateStartPosX-a[g][h].annotateEndPosX),a[g][h].D1B=-a[g][h].D1A*a[g][h].annotateStartPosX+a[g][h].annotateStartPosY,Math.abs(a[g][h].D1A)>=c.zeroValue?a[g][h].D2A=-1/a[g][h].D1A:a[g][h].D2A=void 0);break;case"Bar":for(h=0;h<b.datasets[g].data.length;h++)a[g][h].xAxisPosY=e.xAxisPosY,a[g][h].yAxisPosX=e.yAxisPosX,a[g][h].valueHop=e.valueHop,a[g][h].barWidth=e.barWidth,a[g][h].additionalSpaceBetweenBars=e.additionalSpaceBetweenBars,a[g][h].nbValueHop=e.nbValueHop,a[g][h].calculatedScale=e.calculatedScale,a[g][h].scaleHop=e.scaleHop,a[g][h].xPosLeft=e.yAxisPosX+Math.ceil(d.chartSpaceScale*c.barValueSpacing)+e.valueHop*h+e.additionalSpaceBetweenBars+e.barWidth*f+Math.ceil(d.chartSpaceScale*c.barDatasetSpacing)*f+Math.ceil(d.chartLineScale*c.barStrokeWidth)*f,a[g][h].xPosRight=a[g][h].xPosLeft+e.barWidth,a[g][h].yPosBottom=e.xAxisPosY-e.zeroY,a[g][h].barHeight=n(c.logarithmic,1*b.datasets[g].data[h],e.calculatedScale,e.scaleHop)-e.zeroY,2==b.datasets[g].axis?(a[g][h].yPosBottom=e.xAxisPosY-e.zeroY2,a[g][h].barHeight=n(c.logarithmic2,1*b.datasets[g].data[h],e.calculatedScale2,e.scaleHop2)-e.zeroY2):(a[g][h].yPosBottom=e.xAxisPosY-e.zeroY,a[g][h].barHeight=n(c.logarithmic,1*b.datasets[g].data[h],e.calculatedScale,e.scaleHop)-e.zeroY),a[g][h].yPosTop=a[g][h].yPosBottom-a[g][h].barHeight+Math.ceil(d.chartLineScale*c.barStrokeWidth)/2,a[g][h].v7=a[g][h].xPosLeft,a[g][h].v8=a[g][h].yPosBottom,a[g][h].v9=a[g][h].xPosRight,a[g][h].v10=a[g][h].yPosTop;f++;break;case"StackedBar":for(h=0;h<b.datasets[g].data.length;h++)a[g][h].xAxisPosY=e.xAxisPosY,a[g][h].yAxisPosX=e.yAxisPosX,a[g][h].valueHop=e.valueHop,a[g][h].barWidth=e.barWidth,a[g][h].additionalSpaceBetweenBars=e.additionalSpaceBetweenBars,a[g][h].nbValueHop=e.nbValueHop,a[g][h].calculatedScale=e.calculatedScale,a[g][h].scaleHop=e.scaleHop,void 0===i[h]&&(i[h]=0,j[h]=0,zeroY=n(c.logarithmic,0,e.calculatedScale,e.scaleHop)),void 0!==b.datasets[g].data[h]&&(a[g][h].xPosLeft=e.yAxisPosX+Math.ceil(d.chartSpaceScale*c.barValueSpacing)+e.valueHop*h+e.additionalSpaceBetweenBars,1*b.datasets[g].data[h]<0?(a[g][h].botval=j[h],a[g][h].topval=j[h]+1*b.datasets[g].data[h],j[h]=j[h]+1*b.datasets[g].data[h]):(a[g][h].botval=i[h],a[g][h].topval=i[h]+1*b.datasets[g].data[h],i[h]=i[h]+1*b.datasets[g].data[h]),a[g][h].xPosRight=a[g][h].xPosLeft+e.barWidth,a[g][h].botOffset=n(c.logarithmic,a[g][h].botval,e.calculatedScale,e.scaleHop),a[g][h].topOffset=n(c.logarithmic,a[g][h].topval,e.calculatedScale,e.scaleHop),a[g][h].yPosBottom=e.xAxisPosY-a[g][h].botOffset,a[g][h].yPosTop=e.xAxisPosY-a[g][h].topOffset,Math.ceil(d.chartSpaceScale*c.spaceBetweenBar)>0&&(1*b.datasets[g].data[h]<0?(a[g][h].yPosBottom+=Math.ceil(d.chartSpaceScale*c.spaceBetweenBar),j[h]==1*b.datasets[g].data[h]&&(a[g][h].yPosBottom-=Math.ceil(d.chartSpaceScale*c.spaceBetweenBar)/2),a[g][h].yPosTop<a[g][h].yPosBottom&&(a[g][h].yPosBottom=a[g][h].yPosTop)):1*b.datasets[g].data[h]>0&&(a[g][h].yPosBottom-=Math.ceil(d.chartSpaceScale*c.spaceBetweenBar),i[h]==1*b.datasets[g].data[h]&&(a[g][h].yPosBottom+=Math.ceil(d.chartSpaceScale*c.spaceBetweenBar)/2),a[g][h].yPosTop>a[g][h].yPosBottom&&(a[g][h].yPosBottom=a[g][h].yPosTop))),a[g][h].v7=a[g][h].xPosLeft,a[g][h].v8=a[g][h].yPosBottom,a[g][h].v9=a[g][h].xPosRight,a[g][h].v10=a[g][h].yPosTop);break;case"HorizontalBar":for(h=0;h<b.datasets[g].data.length;h++)a[g][h].xAxisPosY=e.xAxisPosY,a[g][h].yAxisPosX=e.yAxisPosX,a[g][h].valueHop=e.valueHop,a[g][h].barWidth=e.barWidth,a[g][h].additionalSpaceBetweenBars=e.additionalSpaceBetweenBars,a[g][h].nbValueHop=e.nbValueHop,a[g][h].calculatedScale=e.calculatedScale,a[g][h].scaleHop=e.scaleHop,a[g][h].xPosLeft=e.yAxisPosX+e.zeroY,a[g][h].yPosTop=e.xAxisPosY+Math.ceil(d.chartSpaceScale*c.barValueSpacing)-e.scaleHop*(h+1)+e.additionalSpaceBetweenBars+e.barWidth*g+Math.ceil(d.chartSpaceScale*c.barDatasetSpacing)*g+Math.ceil(d.chartLineScale*c.barStrokeWidth)*g,a[g][h].yPosBottom=a[g][h].yPosTop+e.barWidth,a[g][h].barWidth=n(c.logarithmic,1*b.datasets[g].data[h],e.calculatedScale,e.valueHop)-e.zeroY,a[g][h].xPosRight=a[g][h].xPosLeft+a[g][h].barWidth,a[g][h].v7=a[g][h].xPosLeft,a[g][h].v8=a[g][h].yPosBottom,a[g][h].v9=a[g][h].xPosRight,a[g][h].v10=a[g][h].yPosTop;break;case"HorizontalStackedBar":for(h=0;h<b.datasets[g].data.length;h++)a[g][h].xAxisPosY=e.xAxisPosY,a[g][h].yAxisPosX=e.yAxisPosX,a[g][h].valueHop=e.valueHop,a[g][h].barWidth=e.barWidth,a[g][h].additionalSpaceBetweenBars=e.additionalSpaceBetweenBars,a[g][h].nbValueHop=e.nbValueHop,a[g][h].calculatedScale=e.calculatedScale,a[g][h].scaleHop=e.scaleHop,0==g&&(i[h]=0,j[h]=0),void 0!==b.datasets[g].data[h]&&(a[g][h].xPosLeft=e.yAxisPosX+Math.ceil(d.chartSpaceScale*c.barValueSpacing)+e.valueHop*h,1*b.datasets[g].data[h]<0?(a[g][h].leftval=j[h],a[g][h].rightval=j[h]+1*b.datasets[g].data[h],j[h]=j[h]+1*b.datasets[g].data[h]):(a[g][h].leftval=i[h],a[g][h].rightval=i[h]+1*b.datasets[g].data[h],i[h]=i[h]+1*b.datasets[g].data[h]),a[g][h].rightOffset=o(a[g][h].rightval,e.calculatedScale,e.valueHop),a[g][h].leftOffset=o(a[g][h].leftval,e.calculatedScale,e.valueHop),a[g][h].xPosRight=e.yAxisPosX+a[g][h].rightOffset,a[g][h].xPosLeft=e.yAxisPosX+a[g][h].leftOffset,a[g][h].yPosTop=e.xAxisPosY+Math.ceil(d.chartSpaceScale*c.barValueSpacing)-e.scaleHop*(h+1)+e.additionalSpaceBetweenBars,a[g][h].yPosBottom=a[g][h].yPosTop+e.barWidth,Math.ceil(d.chartSpaceScale*c.spaceBetweenBar)>0&&(1*b.datasets[g].data[h]<0?(a[g][h].xPosLeft-=Math.ceil(d.chartSpaceScale*c.spaceBetweenBar),j[h]==1*b.datasets[g].data[h]&&(a[g][h].xPosLeft+=Math.ceil(d.chartSpaceScale*c.spaceBetweenBar)/2),a[g][h].xPosLeft<a[g][h].xPosRight&&(a[g][h].xPosLeft=a[g][h].xPosRight)):1*b.datasets[g].data[h]>0&&(a[g][h].xPosLeft+=Math.ceil(d.chartSpaceScale*c.spaceBetweenBar),i[h]==1*b.datasets[g].data[h]&&(a[g][h].xPosLeft-=Math.ceil(d.chartSpaceScale*c.spaceBetweenBar)/2),a[g][h].xPosLeft>a[g][h].xPosRight&&(a[g][h].xPosLeft=a[g][h].xPosRight))),a[g][h].v7=a[g][h].xPosLeft,a[g][h].v8=a[g][h].yPosBottom,a[g][h].v9=a[g][h].xPosRight,a[g][h].v10=a[g][h].yPosTop)}}}function isBooleanOptionTrue(a,b){var c;if("undefined"==typeof optionvar){if("function"==typeof b)return!0;if("object"==typeof b){for(c=0;c<b.length;c++)if(b[c])return!0;return!1}return b}if("function"==typeof optionvar)return!0;if("object"==typeof optionvar){for(c=0;c<optionvar.length;c++)if(optionvar[c])return!0;return!1}return optionvar}function setOptionValue(a,b,c,d,e,f,g,h,i,j){var k;return void 0===f?"function"==typeof g?g(b,c,d,e,h,i,j):(k="object"==typeof g?g[Math.min(g.length-1,Math.max(0,h))]:g,1!=a&&(k=Math.ceil(k*a)),k):(k="function"==typeof f?f(b,c,d,e,h,i,j):"object"==typeof f?-1==i?f[Math.min(f.length-1,Math.max(0,h))]:f[Math.min(f.length-1,Math.max(0,i))]:f,1!=a&&(k=Math.ceil(k*a)),k)}function tpdraw(a,b){switch(a.tpchart){case"Bar":case"StackedBar":"Line"==b.type?tp="Line":tp=a.tpchart;break;default:tp=a.tpchart}return tp}function setTextBordersAndBackground(a,b,c,d,e,f,g,h,i,j,k,l,m){var n,o;if("string"!=typeof b){var p=b.toString();n=c*(p.split("\n").length||1),o=a.measureText(p).width}else n=c*(b.split("\n").length||1),o=a.measureText(b).width;var q,r,s;"center"==a.textAlign?(q=-o/2,r=o/2):"left"==a.textAlign?(q=0,r=o):"right"==a.textAlign&&(q=-o,r=0),"top"==a.textBaseline?(s=0,ybottom=n):"center"==a.textBaseline||"middle"==a.textBaseline?(s=-n/2,ybottom=n/2):"bottom"==a.textBaseline&&(s=-n,ybottom=0),a.save(),a.beginPath(),a.translate(d,e),"none"!=l&&(a.save(),a.fillStyle=l,a.fillRect(q-i,ybottom+j,r-q+2*i,s-ybottom-2*j),a.stroke(),a.restore(),a.fillStyle="black"),f&&(a.save(),a.lineWidth=h,a.strokeStyle=g,a.fillStyle=g,a.setLineDash(lineStyleFn(k)),a.rect(q-h/2-i,s-h/2-j,r-q+h+2*i,ybottom-s+h+2*j),a.stroke(),a.setLineDash([]),a.restore()),a.restore()}function calculatePieDrawingSize(a,b,c,d,e){var f=((c.startAngle*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),g=((c.totalAmplitude*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI);g<=c.zeroValue&&(g=2*Math.PI);var h=(f-g+4*Math.PI)%(2*Math.PI),i=h+g,j=Math.floor((h+c.zeroValue)/(Math.PI/2)%4),k=Math.floor((i-c.zeroValue)/(Math.PI/2)%4),l=[0,0,0,0];if(j<=k)for(var m=j;m<=k;m++)l[m]=1;else{for(var m=j;m<4;m++)l[m]=1;for(var m=0;m<=k;m++)l[m]=1}0==l[0]&&0==l[1]?(midPieY=b.topNotUsableSize+5,doughnutRadius=b.availableHeight-5):0==l[2]&&0==l[3]?(midPieY=b.topNotUsableSize+b.availableHeight,doughnutRadius=b.availableHeight-5):(midPieY=b.topNotUsableSize+b.availableHeight/2,doughnutRadius=b.availableHeight/2-5);var n;if(0==l[0]&&0==l[3]?(midPieX=b.leftNotUsableSize+b.availableWidth-5,doughnutRadius=Math.min(doughnutRadius,b.availableWidth-5),n=b.availableWidth-5):0==l[1]&&0==l[2]?(midPieX=b.leftNotUsableSize+5,doughnutRadius=Math.min(doughnutRadius,b.availableWidth-5),n=b.availableWidth-5):(midPieX=b.leftNotUsableSize+b.availableWidth/2,doughnutRadius=Math.min(doughnutRadius,b.availableWidth/2-5),n=b.availableWidth/2-5),isBooleanOptionTrue(void 0,c.inGraphDataShow)&&3==setOptionValue(1,"INGRAPHDATARADIUSPOSITION",a,d,e,void 0,c.inGraphDataRadiusPosition,0,-1,{nullValue:!0})&&"off-center"==setOptionValue(1,"INGRAPHDATAALIGN",a,d,e,void 0,c.inGraphDataAlign,0,-1,{nullValue:!0})&&0==setOptionValue(1,"INGRAPHDATAROTATE",a,d,e,void 0,c.inGraphDataRotate,0,-1,{nullValue:!0})){doughnutRadius=doughnutRadius-setOptionValue(a.chartTextScale,"INGRAPHDATAFONTSIZE",a,d,e,void 0,c.inGraphDataFontSize,0,-1,{nullValue:!0})-setOptionValue(1,"INGRAPHDATAPADDINGRADIUS",a,d,e,void 0,c.inGraphDataPaddingRadius,0,-1,{nullValue:!0})-5;for(var o,m=0;m<d.length;m++)if(void 0!==d[m].value&&1*d[m].value>=0){a.font=setOptionValue(1,"INGRAPHDATAFONTSTYLE",a,d,e,void 0,c.inGraphDataFontStyle,m,-1,{nullValue:!0})+" "+setOptionValue(a.chartTextScale,"INGRAPHDATAFONTSIZE",a,d,e,void 0,c.inGraphDataFontSize,m,-1,{nullValue:!0})+"px "+setOptionValue(1,"INGRAPHDATAFONTFAMILY",a,d,e,void 0,c.inGraphDataFontFamily,m,-1,{nullValue:!0}),1==setOptionValue(1,"INGRAPHDATAANGLEPOSITION",a,d,e,void 0,c.inGraphDataAnglePosition,m,-1,{nullValue:!0})?o=f+setOptionValue(1,"INGRAPHDATAPADDINANGLE",a,d,e,void 0,c.inGraphDataPaddingAngle,m,-1,{nullValue:!0})*(Math.PI/180):2==setOptionValue(1,"INGRAPHDATAANGLEPOSITION",a,d,e,void 0,c.inGraphDataAnglePosition,m,-1,{nullValue:!0})?o=f-e[m].segmentAngle/2+setOptionValue(1,"INGRAPHDATAPADDINANGLE",a,d,e,void 0,c.inGraphDataPaddingAngle,m,-1,{nullValue:!0})*(Math.PI/180):3==setOptionValue(1,"INGRAPHDATAANGLEPOSITION",a,d,e,void 0,c.inGraphDataAnglePosition,m,-1,{nullValue:!0})&&(o=f-e[m].segmentAngle+setOptionValue(1,"INGRAPHDATAPADDINANGLE",a,d,e,void 0,c.inGraphDataPaddingAngle,m,-1,{nullValue:!0})*(Math.PI/180)),f-=e[m].segmentAngle;var p=tmplbis(setOptionValue(1,"INGRAPHDATATMPL",a,d,e,void 0,c.inGraphDataTmpl,m,-1,{nullValue:!0}),e[m],c),q=a.measureText(p).width,r=Math.abs((n-q)/Math.cos(o))-setOptionValue(1,"INGRAPHDATAPADDINGRADIUS",a,d,e,void 0,c.inGraphDataPaddingRadius,m,-1,{nullValue:!0})-5;r<doughnutRadius&&(doughnutRadius=r)}}return doughnutRadius*=c.radiusScale,{radius:doughnutRadius,midPieX:midPieX,midPieY:midPieY}}var chartJSLineStyle=[];chartJSLineStyle.solid=[],chartJSLineStyle.dotted=[1,4],chartJSLineStyle.shortDash=[2,1],chartJSLineStyle.dashed=[4,2],chartJSLineStyle.dashSpace=[4,6],chartJSLineStyle.longDashDot=[7,2,1,2],chartJSLineStyle.longDashShortDash=[10,4,4,4],chartJSLineStyle.gradient=[1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,9,9,8,8,7,7,6,6,5,5,4,4,3,3,2,2,1],"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a){"use strict";if(null==this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=0;if(arguments.length>0&&(d=Number(arguments[1]),d!=d?d=0:0!=d&&d!=1/0&&d!=-1/0&&(d=(d>0||-1)*Math.floor(Math.abs(d)))),d>=c)return-1;for(var e=d>=0?d:Math.max(c-Math.abs(d),0);e<c;e++)if(e in b&&b[e]===a)return e;return-1});var charJSPersonalDefaultOptions={},charJSPersonalDefaultOptionsLine={},charJSPersonalDefaultOptionsRadar={},charJSPersonalDefaultOptionsPolarArea={},charJSPersonalDefaultOptionsPie={},charJSPersonalDefaultOptionsDoughnut={},charJSPersonalDefaultOptionsBar={},charJSPersonalDefaultOptionsStackedBar={},charJSPersonalDefaultOptionsHorizontalBar={},charJSPersonalDefaultOptionsHorizontalStackedBar={},cachebis={};"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.fillTextMultiLine=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=(""+a).split("\n");"middle"==d?f&&(c-=(o.length-1)/2*e):"bottom"==d&&f&&(c-=(o.length-1)*e);for(var p=c-e,q=0;q<o.length;q++)this.fillText(o[q],b,c),c+=e;if(g){var r=h.measureTextMultiLine(a,e),s=[],p=[];s.p1=k+b,p.p1=l+c-e;var t=Math.PI/2+j;"left"==h.textAlign&&"top"==d?(s.p1+=e*Math.cos(t),p.p1+=e*Math.sin(t)):"left"==h.textAlign&&"middle"==d?(s.p1+=e/2*Math.cos(t),p.p1+=e/2*Math.sin(t)):"left"==h.textAlign&&"bottom"==d||("center"==h.textAlign&&"top"==d?(s.p1+=e*Math.cos(t)-r.textWidth/2*Math.cos(j),p.p1+=e*Math.sin(t)-r.textWidth/2*Math.sin(j)):"center"==h.textAlign&&"middle"==d?(s.p1+=e/2*Math.cos(t)-r.textWidth/2*Math.cos(j),p.p1+=e/2*Math.sin(t)-r.textWidth/2*Math.sin(j)):"center"==h.textAlign&&"bottom"==d?(s.p1-=r.textWidth/2*Math.cos(j),p.p1-=r.textWidth/2*Math.sin(j)):"right"==h.textAlign&&"top"==d?(s.p1+=e*Math.cos(t)-r.textWidth*Math.cos(j),p.p1+=e*Math.sin(t)-r.textWidth*Math.sin(j)):"right"==h.textAlign&&"middle"==d?(s.p1+=e/2*Math.cos(t)-r.textWidth*Math.cos(j),p.p1+=e/2*Math.sin(t)-r.textWidth*Math.sin(j)):"right"==h.textAlign&&"bottom"==d&&(s.p1-=r.textWidth*Math.cos(j),p.p1-=r.textWidth*Math.sin(j))),s.p2=s.p1+r.textWidth*Math.cos(j),p.p2=p.p1+r.textWidth*Math.sin(j),s.p3=s.p1-e*Math.cos(t),p.p3=p.p1-e*Math.sin(t),s.p4=s.p3+r.textWidth*Math.cos(j),p.p4=p.p3+r.textWidth*Math.sin(j),jsTextMousePos[h.ChartNewId][jsTextMousePos[h.ChartNewId].length]=[i,a,s,p,j,r.textWidth,r.textHeight,m,n]}},CanvasRenderingContext2D.prototype.measureTextMultiLine=function(a,b){for(var d,c=0,e=(""+a).replace(/<BR>/gi,"\n").split("\n"),f=e.length*b,g=0;g<e.length;g++)(d=this.measureText(e[g]).width)>c&&(c=d);return{textWidth:c,textHeight:1.5*f}},"function"!=typeof CanvasRenderingContext2D.prototype.setLineDash&&(CanvasRenderingContext2D.prototype.setLineDash=function(a){return 0})),cursorDivCreated=!1,initChartJsResize=!1;var jsGraphResize=new Array,container;bw=new checkBrowser,fromLeft=10,fromTop=10,"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var dynamicDisplay=new Array,dynamicDisplayList=new Array,jsGraphAnnotate=new Array,jsTextMousePos=new Array,annotatePrevShow=-1;window.Chart=function(context){function init_and_start(a,b,c){var d;if(void 0===a.initialWidth&&(a.initialWidth=a.canvas.width),void 0===a.chartTextScale&&(a.chartTextScale=c.chartTextScale),void 0===a.chartLineScale&&(a.chartLineScale=c.chartLineScale),void 0===a.chartSpaceScale&&(a.chartSpaceScale=c.chartSpaceScale),void 0===a.ChartNewId){a.runanimationcompletefunction=!0;var e=new Date,f=e.getTime();a.ChartNewId=a.tpchart+"_"+f,a._eventListeners={}}if(!dynamicFunction(b,c,a))return c.responsive&&void 0===a.firstPass&&(c.multiGraph||addResponsiveChart(a.ChartNewId,a,b,c)),!1;if(c.responsive&&void 0===a.firstPass){if(!c.multiGraph)return addResponsiveChart(a.ChartNewId,a,b,c),subUpdateChart(a,b,c),!1;a.firstPass=1}switch(void 0===jsGraphAnnotate[a.ChartNewId]?(jsGraphAnnotate[a.ChartNewId]=new Array,jsTextMousePos[a.ChartNewId]=new Array):c.multiGraph||clearAnnotate(a.ChartNewId),0!=c.contextMenu&&"function"!=typeof c.mouseDownRight||(a.canvas.oncontextmenu=function(a){a.preventDefault()}),a.tpdata){case 1:for(d=0;d<b.length;d++)void 0===b[d].title&&void 0!==b[d].label&&(b[d].title=b[d].label);break;case 0:default:for(d=0;d<b.datasets.length;d++)void 0===b.datasets[d].title&&void 0!==b.datasets[d].label&&(b.datasets[d].title=b.datasets[d].label)}return defMouse(a,b,c),setRect(a,c),!0}function reverseData(a){a.labels=a.labels.reverse();for(var b=0;b<a.datasets.length;b++)for(var c in a.datasets[b])Array.isArray(a.datasets[b][c])&&(a.datasets[b][c]=a.datasets[b][c].reverse());return a}function calculateOffset(a,b,c,d){if(a)return CapValue(log10(b)*d-log10(c.graphMin)*d,void 0,0);var e=c.steps*c.stepValue,f=b-c.graphMin,g=CapValue(f/e,1,0);return d*c.steps*g}function animationLoop(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function w(){var p=a.animation?CapValue(s(t),null,0):1;1*o>=1*CapValue(a.animationSteps,Number.MAX_VALUE,1)||0==a.animation||3==d.firstPass||4==d.firstPass||8==d.firstPass||9==d.firstPass?p=1:p>=1&&(p=.9999),!a.animation||isIE()<9&&0!=isIE()||!a.clearRect||d.clearRect(e,f,g,h),dispCrossImage(d,a,i,j,k,l,!1,m,p,o),dispCrossText(d,a,i,j,k,l,!1,m,p,o),"function"==typeof a.beforeDrawFunction&&a.beforeDrawFunction("BEFOREDRAWFUNCTION",d,m,n,-1,-1,{animationValue:p,cntiter:o,config:a,borderX:k,borderY:l,midPosX:i,midPosY:j}),a.scaleOverlay?(c(p),"function"==typeof a.endDrawDataFunction&&a.endDrawDataFunction("ENDDATAFUNCTION",d,m,n,-1,-1,{animationValue:p,cntiter:o,config:a,borderX:k,borderY:l,midPosX:i,midPosY:j}),b(),"function"==typeof a.endDrawScaleFunction&&a.endDrawScaleFunction("ENDSCALEFUNCTION",d,m,n,-1,-1,{animationValue:p,cntiter:o,config:a,borderX:k,borderY:l,midPosX:i,midPosY:j})):(b(),"function"==typeof a.endDrawScaleFunction&&a.endDrawScaleFunction("ENDSCALEFUNCTION",d,m,n,-1,-1,{animationValue:p,cntiter:o,config:a,borderX:k,borderY:l,midPosX:i,midPosY:j}),c(p),"function"==typeof a.endDrawDataFunction&&a.endDrawDataFunction("ENDDATAFUNCTION",d,m,n,-1,-1,{animationValue:p,cntiter:o,config:a,borderX:k,borderY:l,midPosX:i,midPosY:j})),dispCrossImage(d,a,i,j,k,l,!0,m,p,o),dispCrossText(d,a,i,j,k,l,!0,m,p,o)}function x(){o+=q,t+=q*r,o==a.animationSteps||0==a.animation||3==d.firstPass||4==d.firstPass||8==d.firstPass||9==d.firstPass?t=1:t>=1&&(t=.999),w(),-1==q&&o<=u?("function"==typeof a.onAnimationComplete&&1==d.runanimationcompletefunction&&a.onAnimationComplete(d,a,m,0,p+1),q=1,requestAnimFrame(x)):t<a.animationStopValue?requestAnimFrame(x):!(p<a.animationCount||0==a.animationCount)||1!=d.firstPass&&2==d.firstPass?testRedraw(d,m,a)||"function"==typeof a.onAnimationComplete&&1==d.runanimationcompletefunction&&(a.onAnimationComplete(d,a,m,1,p+1),d.runanimationcompletefunction=!1):(p++,a.animationBackward&&1==q?(t-=r,q=-1):(q=1,o=u-1,t=v-r),window.setTimeout(x,1e3*a.animationPauseTime))}var o=0,p=1,q=1;(a.animationStartValue<0||a.animationStartValue>1)&&(a.animation.StartValue=0),(a.animationStopValue<0||a.animationStopValue>1)&&(a.animation.StopValue=1),a.animationStopValue<a.animationStartValue&&(a.animationStopValue=a.animationStartValue),isIE()<9&&0!=isIE()&&(a.animation=!1);var r=a.animation?1/CapValue(a.animationSteps,Number.MAX_VALUE,1):1,s=animationOptions[a.animationEasing],t=a.animation?0:1;if(a.animation&&a.animationStartValue>0&&a.animationStartValue<=1)for(;t<a.animationStartValue;)o++,t+=r;var u=o,v=t;"function"!=typeof b&&(b=function(){}),a.clearRect?requestAnimFrame(x):x()}function calculateScale(a,b,c,d,e,f,g){var h,i,j,k,l,m,n,p,q;if(2==a?(p=b.logarithmic2,q=b.yAxisMinimumInterval2):(p=b.logarithmic,q=b.yAxisMinimumInterval),p){f==e&&(e+=1),0==f&&(f=.01);var r=calculateOrderOfMagnitude(f),s=calculateOrderOfMagnitude(e)+1;h=Math.pow(10,r),i=Math.pow(10,s),n=s-r}else if(m=e-f,n=calculateOrderOfMagnitude(m),h=Math.abs(f)>b.zeroValue?Math.floor(f/(1*Math.pow(10,n)))*Math.pow(10,n):0,i=Math.abs(e)>b.zeroValue?Math.ceil(e/(1*Math.pow(10,n)))*Math.pow(10,n):0,"number"==typeof q&&i>=0){for(h-=h%q;h>f;)h-=q;for(i%q>b.zeroValue&&i%q<q-b.zeroValue&&(i=roundScale(b,(1+Math.floor(i/q))*q));i<e;)i+=q}if(j=i-h,k=Math.pow(10,n),l=Math.round(j/k),p)l=n;else{for(var t=!1;!t&&(l<d||l>c);)l<d?("number"==typeof q&&k/2<q&&(t=!0,k=q),t||(k/=2,l=Math.round(j/k))):(k*=2,l=Math.round(j/k));if("number"==typeof q&&(k<q&&(k=q,l=Math.ceil(j/k)),k%q>b.zeroValue&&k%q<q-b.zeroValue&&(2*k%q<b.zeroValue||2*k%q>q-b.zeroValue?(k*=2,l=Math.ceil(j/k)):(k=roundScale(b,(1+Math.floor(k/q))*q),l=Math.ceil(j/k)))),1==b.graphMaximized||"bottom"==b.graphMaximized||void 0!==b.graphMin)for(;h+k<f&&l>=3;)h+=k,l--;if(1==b.graphMaximized||"top"==b.graphMaximized||void 0!==b.graphMax)for(;h+(l-1)*k>=e&&l>=3;)l--}var u=[];return populateLabels(1,b,g,u,l,h,i,k),{steps:l,stepValue:k,graphMin:h,labels:u,maxValue:e}}function roundScale(a,b){var c=0,d=""+a.yAxisMinimumInterval;return d.indexOf(".")>0&&(c=d.substr(d.indexOf(".")).length),Math.round(b*Math.pow(10,c))/Math.pow(10,c)}function calculateOrderOfMagnitude(a){return 0==a?0:Math.floor(Math.log(a)/Math.LN10)}function populateLabels(a,b,c,d,e,f,g,h){var i;if(2==a?(i=b.logarithmic2,fmtYLabel=b.fmtYLabel2):(i=b.logarithmic,fmtYLabel=b.fmtYLabel),c){var j;if(i){var k=f;for(j=0;j<e+1;j++)d.push(tmpl(c,{value:fmtChartJS(b,1*k.toFixed(getDecimalPlaces(k)),fmtYLabel)},b)),k*=10}else for(j=0;j<e+1;j++)d.push(tmpl(c,{value:fmtChartJS(b,1*(f+h*j).toFixed(getDecimalPlaces(h)),fmtYLabel)},b))}}function Max(a){return Math.max.apply(Math,a)}function Min(a){return Math.min.apply(Math,a)}function Default(a,b){return a||b}function CapValue(a,b,c){return isNumber(b)&&a>b?b:isNumber(c)&&a<c?c:a}function getDecimalPlaces(a){var b=(""+a).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return b?Math.max(0,(b[1]?b[1].length:0)-(b[2]?+b[2]:0)):0}function mergeChartConfig(a,b){var c={};for(var d in a)c[d]=a[d];for(var e in b)c[e]=b[e];return c}function tmpl(a,b,c){return newstr=a,newstr.substr(0,c.templatesOpenTag.length)==c.templatesOpenTag&&(newstr="<%="+newstr.substr(c.templatesOpenTag.length,newstr.length-c.templatesOpenTag.length)),newstr.substr(newstr.length-c.templatesCloseTag.length,c.templatesCloseTag.length)==c.templatesCloseTag&&(newstr=newstr.substr(0,newstr.length-c.templatesCloseTag.length)+"%>"),tmplpart2(newstr,b)}function tmplpart2(a,b){var c=/\W/.test(a)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+a.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):cache[a]=cache[a]||tmplpart2(document.getElementById(a).innerHTML);return b?c(b):c}function dispCrossText(a,b,c,d,e,f,g,h,i,j){var k,l,m,n,o,p;for(k=0;k<b.crossText.length;k++)if(""!=b.crossText[k]&&b.crossTextOverlay[Min([k,b.crossTextOverlay.length-1])]==g&&(1==j&&"first"==b.crossTextIter[Min([k,b.crossTextIter.length-1])]||b.crossTextIter[Min([k,b.crossTextIter.length-1])]==j||"all"==b.crossTextIter[Min([k,b.crossTextIter.length-1])]||1==i&&"last"==b.crossTextIter[Min([k,b.crossTextIter.length-1])])){switch(a.save(),a.beginPath(),a.font=b.crossTextFontStyle[Min([k,b.crossTextFontStyle.length-1])]+" "+Math.ceil(a.chartTextScale*b.crossTextFontSize[Min([k,b.crossTextFontSize.length-1])]).toString()+"px "+b.crossTextFontFamily[Min([k,b.crossTextFontFamily.length-1])],a.fillStyle=b.crossTextFontColor[Min([k,b.crossTextFontColor.length-1])],o=b.crossTextAlign[Min([k,b.crossTextAlign.length-1])],p=b.crossTextBaseline[Min([k,b.crossTextBaseline.length-1])],m=1*Math.ceil(a.chartSpaceScale*b.crossTextPosX[Min([k,b.crossTextPosX.length-1])]),n=1*Math.ceil(a.chartSpaceScale*b.crossTextPosY[Min([k,b.crossTextPosY.length-1])]),1*b.crossTextRelativePosX[Min([k,b.crossTextRelativePosX.length-1])]){case 0:"default"==o&&(o="left");break;case 1:m+=e,"default"==o&&(o="right");break;case 2:m+=c,"default"==o&&(o="center");break;case-2:m+=context.canvas.width/2,"default"==o&&(o="center");break;case 3:m+=m+2*c-e,"default"==o&&(o="left");break;case 4:m+=context.canvas.width,"default"==o&&(o="right");break;default:m+=c,"default"==o&&(o="center")}switch(1*b.crossTextRelativePosY[Min([k,b.crossTextRelativePosY.length-1])]){case 0:"default"==p&&(p="top");break;case 3:n+=f,"default"==p&&(p="top");break;case 2:n+=d,"default"==p&&(p="middle");break;case-2:n+=context.canvas.height/2,"default"==p&&(p="middle");break;case 1:n+=n+2*d-f,"default"==p&&(p="bottom");break;case 4:n+=context.canvas.height,"default"==p&&(p="bottom");break;default:n+=d,"default"==p&&(p="middle")}a.textAlign=o,a.textBaseline=p,a.translate(1*m,1*n);var q=Math.PI*b.crossTextAngle[Min([k,b.crossTextAngle.length-1])]/180;a.rotate(q),"%"==b.crossText[k].substring(0,1)?"function"==typeof b.crossTextFunction&&(l=b.crossTextFunction(k,b.crossText[k],a,b,c,d,e,f,g,h,i)):l=b.crossText[k],setTextBordersAndBackground(a,l,Math.ceil(a.chartTextScale*b.crossTextFontSize[Min([k,b.crossTextFontSize.length-1])]),0,0,b.crossTextBorders[Min([k,b.crossTextBorders.length-1])],b.crossTextBordersColor[Min([k,b.crossTextBordersColor.length-1])],Math.ceil(a.chartLineScale*b.crossTextBordersWidth[Min([k,b.crossTextBordersWidth.length-1])]),Math.ceil(a.chartSpaceScale*b.crossTextBordersXSpace[Min([k,b.crossTextBordersXSpace.length-1])]),Math.ceil(a.chartSpaceScale*b.crossTextBordersYSpace[Min([k,b.crossTextBordersYSpace.length-1])]),b.crossTextBordersStyle[Min([k,b.crossTextBordersStyle.length-1])],b.crossTextBackgroundColor[Min([k,b.crossTextBackgroundColor.length-1])],"CROSSTEXT"),1==i&&"all"==b.crossTextIter[Min([k,b.crossTextIter.length-1])]||"last"!=b.crossTextIter[Min([k,b.crossTextIter.length-1])]?a.fillTextMultiLine(l,0,0,a.textBaseline,Math.ceil(a.chartTextScale*b.crossTextFontSize[Min([k,b.crossTextFontSize.length-1])]),!0,b.detectMouseOnText,a,"CROSSTEXT_TEXTMOUSE",q,1*m,1*n,k,-1):a.fillTextMultiLine(l,0,0,a.textBaseline,Math.ceil(a.chartTextScale*b.crossTextFontSize[Min([k,b.crossTextFontSize.length-1])]),!0,!1,a,"CROSSTEXT_TEXTMOUSE",q,1*m,1*n,k,-1),a.restore()}}function dispCrossImage(a,b,c,d,e,f,g,h,i,j){var k,m,n,o,p;for(k=0;k<b.crossImage.length;k++)if(void 0!==b.crossImage[k]&&b.crossImageOverlay[Min([k,b.crossImageOverlay.length-1])]==g&&(-1==j&&"background"==b.crossImageIter[Min([k,b.crossImageIter.length-1])]||1==j&&"first"==b.crossImageIter[Min([k,b.crossImageIter.length-1])]||b.crossImageIter[Min([k,b.crossImageIter.length-1])]==j||-1!=j&&"all"==b.crossImageIter[Min([k,b.crossImageIter.length-1])]||1==i&&"last"==b.crossImageIter[Min([k,b.crossImageIter.length-1])])){switch(a.save(),a.beginPath(),o=b.crossImageAlign[Min([k,b.crossImageAlign.length-1])],p=b.crossImageBaseline[Min([k,b.crossImageBaseline.length-1])],m=1*Math.ceil(a.chartSpaceScale*b.crossImagePosX[Min([k,b.crossImagePosX.length-1])]),n=1*Math.ceil(a.chartSpaceScale*b.crossImagePosY[Min([k,b.crossImagePosY.length-1])]),1*b.crossImageRelativePosX[Min([k,b.crossImageRelativePosX.length-1])]){case 0:"default"==o&&(o="left");break;case 1:m+=e,"default"==o&&(o="right");break;case 2:m+=c,"default"==o&&(o="center");break;case-2:m+=context.canvas.width/2,"default"==o&&(o="center");break;case 3:m+=m+2*c-e,"default"==o&&(o="left");break;case 4:m+=context.canvas.width,"default"==o&&(o="right");break;default:m+=c,"default"==o&&(o="center")}switch(1*b.crossImageRelativePosY[Min([k,b.crossImageRelativePosY.length-1])]){case 0:"default"==p&&(p="top");break;case 3:n+=f,"default"==p&&(p="top");break;case 2:n+=d,"default"==p&&(p="middle");break;case-2:n+=context.canvas.height/2,"default"==p&&(p="middle");break;case 1:n+=n+2*d-f,"default"==p&&(p="bottom");break;case 4:n+=context.canvas.height,"default"==p&&(p="bottom");break;default:n+=d,"default"==p&&(p="middle")}var q=b.crossImage[k].width;switch(o){case"left":break;case"right":m-=q;break;case"center":m-=q/2}var r=b.crossImage[k].height;switch(p){case"top":break;case"bottom":n-=r;break;case"middle":n-=r/2}a.translate(1*m,1*n),a.rotate(Math.PI*b.crossImageAngle[Min([k,b.crossImageAngle.length-1])]/180),a.drawImage(b.crossImage[k],0,0),a.restore()}}function setMeasures(a,b,c,d,e,f,g,h,i,j,k,l,m){"none"!=b.canvasBackgroundColor&&(c.canvas.style.background=b.canvasBackgroundColor);var n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=1,M=1,N=0,O=1,P=0,Q=1,R=0,S=0,T=0,U=0,V=0,W=0;c.widthAtSetMeasures=e,c.heightAtSetMeasures=d,b.canvasBorders&&(n=Math.ceil(c.chartLineScale*b.canvasBordersWidth));var X,Y;if(j){for(c.font=b.scaleFontStyle+" "+Math.ceil(c.chartTextScale*b.scaleFontSize).toString()+"px "+b.scaleFontFamily,Y=0;Y<a.labels.length;Y++)!0===showLabels(c,a,b,Y)&&(X=c.measureTextMultiLine(fmtChartJS(b,a.labels[Y],b.fmtXLabel),Math.ceil(c.chartTextScale*b.scaleFontSize)),L=X.textWidth>L?X.textWidth:L,M=X.textHeight>M?X.textHeight:M);L<Math.ceil(c.chartTextScale*b.xScaleLabelsMinimumWidth)&&(L=Math.ceil(c.chartTextScale*b.xScaleLabelsMinimumWidth))}if(j){if(N=1,null!=f&&"nihil"!=f)for(c.font=b.scaleFontStyle+" "+Math.ceil(c.chartTextScale*b.scaleFontSize).toString()+"px "+b.scaleFontFamily,Y=f.length-1;Y>=0;Y--)"string"==typeof f[Y]&&showYLabels(c,a,b,Y,f[Y])&&""!=f[Y].trim()&&(X=c.measureTextMultiLine(fmtChartJS(b,f[Y],b.fmtYLabel),Math.ceil(c.chartTextScale*b.scaleFontSize)),N=X.textWidth>N?X.textWidth:N,O=X.textHeight>O?X.textHeight:O);if(N<Math.ceil(c.chartTextScale*b.yScaleLabelsMinimumWidth)&&(N=Math.ceil(c.chartTextScale*b.yScaleLabelsMinimumWidth)),P=1,null!=g&&b.yAxisRight)for(c.font=b.scaleFontStyle+" "+Math.ceil(c.chartTextScale*b.scaleFontSize).toString()+"px "+b.scaleFontFamily,Y=g.length-1;Y>=0;Y--)"string"==typeof g[Y]&&""!=g[Y].trim()&&(X=c.measureTextMultiLine(fmtChartJS(b,g[Y],b.fmtYLabel2),Math.ceil(c.chartTextScale*b.scaleFontSize)),P=X.textWidth>P?X.textWidth:P,Q=X.textHeight>Q?X.textHeight:Q);else P=N;P<Math.ceil(c.chartTextScale*b.yScaleLabelsMinimumWidth)&&(P=Math.ceil(c.chartTextScale*b.yScaleLabelsMinimumWidth))}if(R=n+Math.ceil(c.chartSpaceScale*b.spaceLeft),S=n+Math.ceil(c.chartSpaceScale*b.spaceRight),j&&(void 0!==b.yAxisLabel&&(""!=b.yAxisLabel.trim()&&(G=Math.ceil(c.chartTextScale*b.yAxisFontSize)*(b.yAxisLabel.split("\n").length||1)+Math.ceil(c.chartSpaceScale*b.yAxisLabelSpaceLeft)+Math.ceil(c.chartSpaceScale*b.yAxisLabelSpaceRight),H=n+Math.ceil(c.chartSpaceScale*b.spaceLeft)+Math.ceil(c.chartSpaceScale*b.yAxisLabelSpaceLeft)+Math.ceil(c.chartTextScale*b.yAxisFontSize),I=e-n-Math.ceil(c.chartSpaceScale*b.spaceRight)-Math.ceil(c.chartSpaceScale*b.yAxisLabelSpaceLeft)-Math.ceil(c.chartTextScale*b.yAxisFontSize)),("none"!=b.yAxisLabelBackgroundColor||b.yAxisLabelBorders)&&(G+=2*Math.ceil(c.chartSpaceScale*b.yAxisLabelBordersYSpace),H+=Math.ceil(c.chartSpaceScale*b.yAxisLabelBordersYSpace),I-=Math.ceil(c.chartSpaceScale*b.yAxisLabelBordersYSpace)),b.graphTitleBorders&&(G+=2*Math.ceil(c.chartLineScale*b.yAxisLabelBordersWidth),H+=Math.ceil(c.chartLineScale*b.yAxisLabelBordersWidth),I-=Math.ceil(c.chartLineScale*b.yAxisLabelBordersWidth))),b.yAxisLeft&&(R=0==i?n+Math.ceil(c.chartSpaceScale*b.spaceLeft)+G+N+Math.ceil(c.chartSpaceScale*b.yAxisSpaceLeft)+Math.ceil(c.chartSpaceScale*b.yAxisSpaceRight):n+Math.ceil(c.chartSpaceScale*b.spaceLeft)+G+L+Math.ceil(c.chartSpaceScale*b.yAxisSpaceLeft)+Math.ceil(c.chartSpaceScale*b.yAxisSpaceRight)),b.yAxisRight&&(S=0==i?n+Math.ceil(c.chartSpaceScale*b.spaceRight)+G+P+Math.ceil(c.chartSpaceScale*b.yAxisSpaceLeft)+Math.ceil(c.chartSpaceScale*b.yAxisSpaceRight):n+Math.ceil(c.chartSpaceScale*b.spaceRight)+G+L+Math.ceil(c.chartSpaceScale*b.yAxisSpaceLeft)+Math.ceil(c.chartSpaceScale*b.yAxisSpaceRight))),availableWidth=e-R-S,""!=b.graphTitle.trim()&&(p=Math.ceil(c.chartTextScale*b.graphTitleFontSize)*(b.graphTitle.split("\n").length||1)+Math.ceil(c.chartSpaceScale*b.graphTitleSpaceBefore)+Math.ceil(c.chartSpaceScale*b.graphTitleSpaceAfter),q=n+Math.ceil(c.chartSpaceScale*b.spaceTop)+p-Math.ceil(c.chartSpaceScale*b.graphTitleSpaceAfter),("none"!=b.graphTitleBackgroundColor||b.graphTitleBorders)&&(p+=2*Math.ceil(c.chartSpaceScale*b.graphTitleBordersYSpace),q+=Math.ceil(c.chartSpaceScale*b.graphTitleBordersYSpace)),b.graphTitleBorders&&(p+=2*Math.ceil(c.chartLineScale*b.graphTitleBordersWidth),q+=Math.ceil(c.chartLineScale*b.graphTitleBordersWidth))),""!=b.graphSubTitle.trim()&&(r=Math.ceil(c.chartTextScale*b.graphSubTitleFontSize)*(b.graphSubTitle.split("\n").length||1)+Math.ceil(c.chartSpaceScale*b.graphSubTitleSpaceBefore)+Math.ceil(c.chartSpaceScale*b.graphSubTitleSpaceAfter),s=n+Math.ceil(c.chartSpaceScale*b.spaceTop)+p+r-Math.ceil(c.chartSpaceScale*b.graphSubTitleSpaceAfter),("none"!=b.graphSubTitleBackgroundColor||b.graphSubTitleBorders)&&(r+=2*Math.ceil(c.chartSpaceScale*b.graphSubTitleBordersYSpace),s+=Math.ceil(c.chartSpaceScale*b.graphSubTitleBordersYSpace)),b.graphSubTitleBorders&&(r+=2*Math.ceil(c.chartLineScale*b.graphSubTitleBordersWidth),s+=Math.ceil(c.chartLineScale*b.graphSubTitleBordersWidth))),j&&(""!=b.yAxisUnit.trim()&&(v=Math.ceil(c.chartTextScale*b.yAxisUnitFontSize)*(b.yAxisUnit.split("\n").length||1)+Math.ceil(c.chartSpaceScale*b.yAxisUnitSpaceBefore)+Math.ceil(c.chartSpaceScale*b.yAxisUnitSpaceAfter),w=n+Math.ceil(c.chartSpaceScale*b.spaceTop)+p+r+v-Math.ceil(c.chartSpaceScale*b.yAxisUnitSpaceAfter)),("none"!=b.yAxisUnitBackgroundColor||b.yAxisUnitBorders)&&(v+=2*Math.ceil(c.chartSpaceScale*b.yAxisUnitBordersYSpace),w+=Math.ceil(c.chartSpaceScale*b.yAxisUnitBordersYSpace)),b.yAxisUnitBorders&&(v+=2*Math.ceil(c.chartLineScale*b.yAxisUnitBordersWidth),w+=Math.ceil(c.chartLineScale*b.yAxisUnitBordersWidth))),topNotUsableSize=n+Math.ceil(c.chartSpaceScale*b.spaceTop)+p+r+v+Math.ceil(c.chartTextScale*b.graphSpaceBefore),void 0!==b.footNote&&""!=b.footNote.trim()&&(t=Math.ceil(c.chartTextScale*b.footNoteFontSize)*(b.footNote.split("\n").length||1)+Math.ceil(c.chartSpaceScale*b.footNoteSpaceBefore)+Math.ceil(c.chartSpaceScale*b.footNoteSpaceAfter),u=d-Math.ceil(c.chartSpaceScale*b.spaceBottom)-n-Math.ceil(c.chartSpaceScale*b.footNoteSpaceAfter),("none"!=b.footNoteBackgroundColor||b.footNoteBorders)&&(t+=2*Math.ceil(c.chartSpaceScale*b.footNoteBordersYSpace),u-=Math.ceil(c.chartSpaceScale*b.footNoteBordersYSpace)),b.footNoteBorders&&(t+=2*Math.ceil(c.chartLineScale*b.footNoteBordersWidth),u-=Math.ceil(c.chartLineScale*b.footNoteBordersWidth))),j&&void 0!==b.xAxisLabel&&""!=b.xAxisLabel.trim()&&(J=Math.ceil(c.chartTextScale*b.xAxisFontSize)*(b.xAxisLabel.split("\n").length||1)+Math.ceil(c.chartSpaceScale*b.xAxisLabelSpaceBefore)+Math.ceil(c.chartSpaceScale*b.xAxisLabelSpaceAfter),o=d-n-Math.ceil(c.chartSpaceScale*b.spaceBottom)-t-Math.ceil(c.chartSpaceScale*b.xAxisLabelSpaceAfter),("none"!=b.xAxisLabelBackgroundColor||b.footNoteBorders)&&(J+=2*Math.ceil(c.chartSpaceScale*b.xAxisLabelBordersYSpace),o-=Math.ceil(c.chartSpaceScale*b.xAxisLabelBordersYSpace)),b.footNoteBorders&&(J+=2*Math.ceil(c.chartLineScale*b.xAxisLabelBordersWidth),o-=Math.ceil(c.chartLineScale*b.xAxisLabelBordersWidth))),bottomNotUsableHeightWithoutXLabels=n+Math.ceil(c.chartSpaceScale*b.spaceBottom)+t+J+Math.ceil(c.chartTextScale*b.graphSpaceAfter),void 0!==b.legend&&1==b.legend){c.font=b.legendFontStyle+" "+Math.ceil(c.chartTextScale*b.legendFontSize).toString()+"px "+b.legendFontFamily;var Z;if(k)for(Y=a.datasets.length-1;Y>=0;Y--)"string"==typeof a.datasets[Y].title&&""!=a.datasets[Y].title.trim()&&(y++,Z=c.measureText(fmtChartJS(b,a.datasets[Y].title,b.fmtLegend)).width,x=Z>x?Z:x);else for(Y=a.length-1;Y>=0;Y--)"string"==typeof a[Y].title&&""!=a[Y].title.trim()&&(y++,Z=c.measureText(fmtChartJS(b,a[Y].title,b.fmtLegend)).width,x=Z>x?Z:x);if(y>1||1==y&&b.showSingleLegend){x+=Math.ceil(c.chartTextScale*b.legendBlockSize)+Math.ceil(c.chartSpaceScale*b.legendSpaceBetweenBoxAndText),1==b.legendPosY||2==b.legendPosY||3==b.legendPosY?availableLegendWidth=availableWidth-Math.ceil(c.chartSpaceScale*Math.ceil(c.chartSpaceScale*b.legendSpaceLeftText))-Math.ceil(c.chartSpaceScale*b.legendSpaceRightText):availableLegendWidth=e-Math.ceil(c.chartSpaceScale*b.spaceLeft)-Math.ceil(c.chartSpaceScale*b.spaceRight)-2*n-Math.ceil(c.chartSpaceScale*Math.ceil(c.chartSpaceScale*b.legendSpaceLeftText))-Math.ceil(c.chartSpaceScale*b.legendSpaceRightText),1==b.legendBorders&&(availableLegendWidth-=2*Math.ceil(c.chartLineScale*b.legendBordersWidth)-Math.ceil(c.chartSpaceScale*b.legendBordersSpaceLeft)-Math.ceil(c.chartSpaceScale*b.legendBordersSpaceRight)),maxLegendOnLine=Min([Math.floor((availableLegendWidth+Math.ceil(c.chartSpaceScale*b.legendSpaceBetweenTextHorizontal))/(x+Math.ceil(c.chartSpaceScale*b.legendSpaceBetweenTextHorizontal))),b.maxLegendCols]),z=Math.ceil(y/maxLegendOnLine),A=Math.ceil(y/z);var $=z*(Math.ceil(c.chartTextScale*b.legendFontSize)+Math.ceil(c.chartSpaceScale*b.legendSpaceBetweenTextVertical))-Math.ceil(c.chartSpaceScale*b.legendSpaceBetweenTextVertical)+Math.ceil(c.chartSpaceScale*b.legendSpaceBeforeText)+Math.ceil(c.chartSpaceScale*b.legendSpaceAfterText);switch(b.legendPosY){case 0:C=Math.ceil(c.chartSpaceScale*b.spaceLeft)+(e-Math.ceil(c.chartSpaceScale*b.spaceLeft)-Math.ceil(c.chartSpaceScale*b.spaceRight)-A*(x+Math.ceil(c.chartSpaceScale*b.legendSpaceBetweenTextHorizontal))+Math.ceil(c.chartSpaceScale*b.legendSpaceBetweenTextHorizontal))/2,B=$,1==b.legendBorders?(F=topNotUsableSize+Math.ceil(c.chartSpaceScale*b.legendBordersSpaceBefore)+Math.ceil(c.chartLineScale*b.legendBordersWidth)/2,D=F+Math.ceil(c.chartLineScale*b.legendBordersWidth)/2+Math.ceil(c.chartSpaceScale*b.legendSpaceBeforeText)+Math.ceil(c.chartTextScale*b.legendFontSize),B+=2*Math.ceil(c.chartLineScale*b.legendBordersWidth)+Math.ceil(c.chartSpaceScale*b.legendBordersSpaceBefore)+Math.ceil(c.chartSpaceScale*b.legendBordersSpaceAfter),E=Math.floor(C-Math.ceil(c.chartSpaceScale*b.legendSpaceLeftText)-Math.ceil(c.chartLineScale*b.legendBordersWidth)/2),W=Math.ceil(B-Math.ceil(c.chartLineScale*b.legendBordersWidth))-Math.ceil(c.chartSpaceScale*b.legendBordersSpaceBefore)-Math.ceil(c.chartSpaceScale*b.legendBordersSpaceAfter),V=Math.ceil(A*(x+Math.ceil(c.chartSpaceScale*b.legendSpaceBetweenTextHorizontal)))-Math.ceil(c.chartSpaceScale*b.legendSpaceBetweenTextHorizontal)+Math.ceil(c.chartLineScale*b.legendBordersWidth)+Math.ceil(c.chartSpaceScale*b.legendSpaceRightText)+Math.ceil(c.chartSpaceScale*b.legendSpaceLeftText)):D=topNotUsableSize+Math.ceil(c.chartSpaceScale*b.legendBordersSpaceBefore)+Math.ceil(c.chartLineScale*b.legendBordersWidth)/2,v>0&&(w+=B,1==b.legendBorders&&(F-=v),D-=v),topNotUsableSize+=B;break;case 1:B=$,C=Math.ceil(c.chartSpaceScale*b.spaceLeft)+(e-Math.ceil(c.chartSpaceScale*b.spaceLeft)-Math.ceil(c.chartSpaceScale*b.spaceRight)-A*(x+Math.ceil(c.chartSpaceScale*b.legendSpaceBetweenTextHorizontal))+Math.ceil(c.chartSpaceScale*b.legendSpaceBetweenTextHorizontal))/2,D=topNotUsableSize+Math.ceil(c.chartSpaceScale*b.legendSpaceBeforeText)+Math.ceil(c.chartTextScale*b.legendFontSize),1==b.legendBorders&&(D+=Math.ceil(c.chartSpaceScale*b.legendBordersSpaceBefore)+Math.ceil(c.chartLineScale*b.legendBordersWidth),F=D-Math.ceil(c.chartSpaceScale*b.legendSpaceBeforeText)-Math.ceil(c.chartTextScale*b.legendFontSize)-Math.ceil(c.chartLineScale*b.legendBordersWidth)/2,B+=2*Math.ceil(c.chartLineScale*b.legendBordersWidth)+Math.ceil(c.chartSpaceScale*b.legendBordersSpaceBefore)+Math.ceil(c.chartSpaceScale*b.legendBordersSpaceAfter),E=Math.floor(C-Math.ceil(c.chartSpaceScale*b.legendSpaceLeftText)-Math.ceil(c.chartLineScale*b.legendBordersWidth)/2),W=Math.ceil(B-Math.ceil(c.chartLineScale*b.legendBordersWidth))-Math.ceil(c.chartSpaceScale*b.legendBordersSpaceBefore)-Math.ceil(c.chartSpaceScale*b.legendBordersSpaceAfter),V=Math.ceil(A*(x+Math.ceil(c.chartSpaceScale*b.legendSpaceBetweenTextHorizontal)))-Math.ceil(c.chartSpaceScale*b.legendSpaceBetweenTextHorizontal)+Math.ceil(c.chartLineScale*b.legendBordersWidth)+Math.ceil(c.chartSpaceScale*b.legendSpaceRightText)+Math.ceil(c.chartSpaceScale*b.legendSpaceLeftText));break;case 2:B=$,C=Math.ceil(c.chartSpaceScale*b.spaceLeft)+(e-Math.ceil(c.chartSpaceScale*b.spaceLeft)-Math.ceil(c.chartSpaceScale*b.spaceRight)-A*(x+Math.ceil(c.chartSpaceScale*b.legendSpaceBetweenTextHorizontal))+Math.ceil(c.chartSpaceScale*b.legendSpaceBetweenTextHorizontal))/2,D=topNotUsableSize+(d-topNotUsableSize-bottomNotUsableHeightWithoutXLabels-B)/2+Math.ceil(c.chartSpaceScale*b.legendSpaceBeforeText)+Math.ceil(c.chartTextScale*b.legendFontSize),1==b.legendBorders&&(D+=Math.ceil(c.chartSpaceScale*b.legendBordersSpaceBefore)-Math.ceil(c.chartSpaceScale*b.legendBordersSpaceAfter),F=D-Math.ceil(c.chartSpaceScale*b.legendSpaceBeforeText)-Math.ceil(c.chartTextScale*b.legendFontSize)-Math.ceil(c.chartLineScale*b.legendBordersWidth)/2,B+=2*Math.ceil(c.chartLineScale*b.legendBordersWidth)+Math.ceil(c.chartSpaceScale*b.legendBordersSpaceBefore)+Math.ceil(c.chartSpaceScale*b.legendBordersSpaceAfter),E=Math.floor(C-Math.ceil(c.chartSpaceScale*b.legendSpaceLeftText)-Math.ceil(c.chartLineScale*b.legendBordersWidth)/2),W=Math.ceil(B-Math.ceil(c.chartLineScale*b.legendBordersWidth))-Math.ceil(c.chartSpaceScale*b.legendBordersSpaceBefore)-Math.ceil(c.chartSpaceScale*b.legendBordersSpaceAfter),V=Math.ceil(A*(x+Math.ceil(c.chartSpaceScale*b.legendSpaceBetweenTextHorizontal)))-Math.ceil(c.chartSpaceScale*b.legendSpaceBetweenTextHorizontal)+Math.ceil(c.chartLineScale*b.legendBordersWidth)+Math.ceil(c.chartSpaceScale*b.legendSpaceRightText)+Math.ceil(c.chartSpaceScale*b.legendSpaceLeftText));break;case-2:B=$,C=Math.ceil(c.chartSpaceScale*b.spaceLeft)+(e-Math.ceil(c.chartSpaceScale*b.spaceLeft)-Math.ceil(c.chartSpaceScale*b.spaceRight)-A*(x+Math.ceil(c.chartSpaceScale*b.legendSpaceBetweenTextHorizontal))+Math.ceil(c.chartSpaceScale*b.legendSpaceBetweenTextHorizontal))/2,D=(d-B)/2+Math.ceil(c.chartSpaceScale*b.legendSpaceBeforeText)+Math.ceil(c.chartTextScale*b.legendFontSize),1==b.legendBorders&&(D+=Math.ceil(c.chartSpaceScale*b.legendBordersSpaceBefore)-Math.ceil(c.chartSpaceScale*b.legendBordersSpaceAfter),F=D-Math.ceil(c.chartSpaceScale*b.legendSpaceBeforeText)-Math.ceil(c.chartTextScale*b.legendFontSize)-Math.ceil(c.chartLineScale*b.legendBordersWidth)/2,B+=2*Math.ceil(c.chartLineScale*b.legendBordersWidth)+Math.ceil(c.chartSpaceScale*b.legendBordersSpaceBefore)+Math.ceil(c.chartSpaceScale*b.legendBordersSpaceAfter),E=Math.floor(C-Math.ceil(c.chartSpaceScale*b.legendSpaceLeftText)-Math.ceil(c.chartLineScale*b.legendBordersWidth)/2),W=Math.ceil(B-Math.ceil(c.chartLineScale*b.legendBordersWidth))-Math.ceil(c.chartSpaceScale*b.legendBordersSpaceBefore)-Math.ceil(c.chartSpaceScale*b.legendBordersSpaceAfter),V=Math.ceil(A*(x+Math.ceil(c.chartSpaceScale*b.legendSpaceBetweenTextHorizontal)))-Math.ceil(c.chartSpaceScale*b.legendSpaceBetweenTextHorizontal)+Math.ceil(c.chartLineScale*b.legendBordersWidth)+Math.ceil(c.chartSpaceScale*b.legendSpaceRightText)+Math.ceil(c.chartSpaceScale*b.legendSpaceLeftText));break;case 3:B=$,C=Math.ceil(c.chartSpaceScale*b.spaceLeft)+(e-Math.ceil(c.chartSpaceScale*b.spaceLeft)-Math.ceil(c.chartSpaceScale*b.spaceRight)-A*(x+Math.ceil(c.chartSpaceScale*b.legendSpaceBetweenTextHorizontal))+Math.ceil(c.chartSpaceScale*b.legendSpaceBetweenTextHorizontal))/2,availableHeight=d-topNotUsableSize-bottomNotUsableHeightWithoutXLabels,D=topNotUsableSize+availableHeight-B+Math.ceil(c.chartSpaceScale*b.legendSpaceBeforeText)+Math.ceil(c.chartTextScale*b.legendFontSize),1==b.legendBorders&&(D-=Math.ceil(c.chartSpaceScale*b.legendBordersSpaceAfter)+Math.ceil(c.chartLineScale*b.legendBordersWidth),F=D-Math.ceil(c.chartSpaceScale*b.legendSpaceBeforeText)-Math.ceil(c.chartTextScale*b.legendFontSize)-Math.ceil(c.chartLineScale*b.legendBordersWidth)/2,B+=2*Math.ceil(c.chartLineScale*b.legendBordersWidth)+Math.ceil(c.chartSpaceScale*b.legendBordersSpaceBefore)+Math.ceil(c.chartSpaceScale*b.legendBordersSpaceAfter),E=Math.floor(C-Math.ceil(c.chartSpaceScale*b.legendSpaceLeftText)-Math.ceil(c.chartLineScale*b.legendBordersWidth)/2),W=Math.ceil(B-Math.ceil(c.chartLineScale*b.legendBordersWidth))-Math.ceil(c.chartSpaceScale*b.legendBordersSpaceBefore)-Math.ceil(c.chartSpaceScale*b.legendBordersSpaceAfter),V=Math.ceil(A*(x+Math.ceil(c.chartSpaceScale*b.legendSpaceBetweenTextHorizontal)))-Math.ceil(c.chartSpaceScale*b.legendSpaceBetweenTextHorizontal)+Math.ceil(c.chartLineScale*b.legendBordersWidth)+Math.ceil(c.chartSpaceScale*b.legendSpaceRightText)+Math.ceil(c.chartSpaceScale*b.legendSpaceLeftText));break;default:B=$,D=d-n-Math.ceil(c.chartSpaceScale*b.spaceBottom)-t-B+Math.ceil(c.chartSpaceScale*b.legendSpaceBeforeText)+Math.ceil(c.chartTextScale*b.legendFontSize),C=Math.ceil(c.chartSpaceScale*b.spaceLeft)+(e-Math.ceil(c.chartSpaceScale*b.spaceLeft)-Math.ceil(c.chartSpaceScale*b.spaceRight)-A*(x+Math.ceil(c.chartSpaceScale*b.legendSpaceBetweenTextHorizontal))+Math.ceil(c.chartSpaceScale*b.legendSpaceBetweenTextHorizontal))/2,1==b.legendBorders&&(B+=2*Math.ceil(c.chartLineScale*b.legendBordersWidth)+Math.ceil(c.chartSpaceScale*b.legendBordersSpaceBefore)+Math.ceil(c.chartSpaceScale*b.legendBordersSpaceAfter),D-=Math.ceil(c.chartLineScale*b.legendBordersWidth)+Math.ceil(c.chartSpaceScale*b.legendBordersSpaceAfter),F=Math.floor(d-n-Math.ceil(c.chartSpaceScale*b.spaceBottom)-t-B+Math.ceil(c.chartLineScale*b.legendBordersWidth)/2+Math.ceil(c.chartSpaceScale*b.legendBordersSpaceBefore)),E=Math.floor(C-Math.ceil(c.chartSpaceScale*b.legendSpaceLeftText)-Math.ceil(c.chartLineScale*b.legendBordersWidth)/2),W=Math.ceil(B-Math.ceil(c.chartLineScale*b.legendBordersWidth))-Math.ceil(c.chartSpaceScale*b.legendBordersSpaceBefore)-Math.ceil(c.chartSpaceScale*b.legendBordersSpaceAfter),V=Math.ceil(A*(x+Math.ceil(c.chartSpaceScale*b.legendSpaceBetweenTextHorizontal)))-Math.ceil(c.chartSpaceScale*b.legendSpaceBetweenTextHorizontal)+Math.ceil(c.chartLineScale*b.legendBordersWidth)+Math.ceil(c.chartSpaceScale*b.legendSpaceRightText)+Math.ceil(c.chartSpaceScale*b.legendSpaceLeftText)),o-=B,bottomNotUsableHeightWithoutXLabels+=B}var _=Math.ceil(c.chartSpaceScale*b.legendSpaceRightText)+A*(x+Math.ceil(c.chartSpaceScale*b.legendSpaceBetweenTextHorizontal))-Math.ceil(c.chartSpaceScale*b.legendSpaceBetweenTextHorizontal)+Math.ceil(c.chartSpaceScale*b.legendSpaceLeftText);switch(1==b.legendBorders&&(_+=2*Math.ceil(c.chartLineScale*b.legendBordersWidth)+Math.ceil(c.chartSpaceScale*b.legendBordersSpaceLeft)+Math.ceil(c.chartSpaceScale*b.legendBordersSpaceRight)),b.legendPosX){case 0:case 1:C=Math.ceil(c.chartSpaceScale*b.spaceLeft)+b.canvasBorders*Math.ceil(c.chartLineScale*b.canvasBordersWidth)+Math.ceil(c.chartSpaceScale*b.legendSpaceLeftText),1==b.legendBorders&&(C+=Math.ceil(c.chartLineScale*b.legendBordersWidth)/2+Math.ceil(c.chartSpaceScale*b.legendBordersSpaceLeft),E=Math.ceil(c.chartSpaceScale*b.spaceLeft)+b.canvasBorders*Math.ceil(c.chartLineScale*b.canvasBordersWidth)+Math.ceil(c.chartSpaceScale*b.legendBordersSpaceLeft)),0==b.legendPosX&&(b.legendPosY>=1&&b.legendPosY<=3||-2==b.legendPosY)&&(R+=_,H+=_);break;case 2:C=R+(e-S-R)/2-(Math.ceil(c.chartSpaceScale*b.legendSpaceLeftText)-Math.ceil(c.chartSpaceScale*b.legendSpaceRightText))-(A*(x+Math.ceil(c.chartSpaceScale*b.legendSpaceBetweenTextHorizontal))-Math.ceil(c.chartSpaceScale*b.legendSpaceBetweenTextHorizontal))/2,1==b.legendBorders&&(C-=Math.ceil(c.chartLineScale*b.legendBordersWidth)/2+Math.ceil(c.chartSpaceScale*b.legendBordersSpaceRight),E=C-Math.ceil(c.chartLineScale*b.legendBordersWidth)/2-Math.ceil(c.chartSpaceScale*b.legendSpaceLeftText));break;case 3:case 4:C=e-S-Math.ceil(c.chartSpaceScale*b.legendSpaceRightText)-A*(x+Math.ceil(c.chartSpaceScale*b.legendSpaceBetweenTextHorizontal))+Math.ceil(c.chartSpaceScale*b.legendSpaceBetweenTextHorizontal)/2,1==b.legendBorders&&(C-=Math.ceil(c.chartLineScale*b.legendBordersWidth)/2+Math.ceil(c.chartSpaceScale*b.legendBordersSpaceRight),E=C-Math.ceil(c.chartLineScale*b.legendBordersWidth)/2-Math.ceil(c.chartSpaceScale*b.legendSpaceLeftText)),4==b.legendPosX&&(b.legendPosY>=1&&b.legendPosY<=3||-2==b.legendPosY)&&(S+=_,I-=_)}1==b.legendBorders&&(F+=Math.ceil(c.chartSpaceScale*b.legendYPadding),E+=Math.ceil(c.chartSpaceScale*b.legendXPadding)),D+=Math.ceil(c.chartSpaceScale*b.legendYPadding),C+=Math.ceil(c.chartSpaceScale*b.legendXPadding)}}if(xLabelWidth=0,bottomNotUsableHeightWithXLabels=bottomNotUsableHeightWithoutXLabels,j&&(b.xAxisBottom||b.xAxisTop)){var aa,ba;0==i?(aa=L,ba=M,nblab=a.labels.length):(aa=N,ba=O,nblab=f.length),"smart"==b.rotateLabels?(T=0,(availableWidth+Math.ceil(c.chartTextScale*b.xAxisSpaceBetweenLabels))/nblab<aa+Math.ceil(c.chartTextScale*b.xAxisSpaceBetweenLabels)&&(T=45,availableWidth/nblab<Math.abs(Math.cos(T*Math.PI/180)*aa)&&(T=90))):(T=b.rotateLabels,T<0&&(T=0),T>180&&(T=180)),T>90&&(T+=180),K=Math.abs(Math.sin(T*Math.PI/180)*aa)+Math.abs(Math.sin((T+90)*Math.PI/180)*ba)+Math.ceil(c.chartSpaceScale*b.xAxisSpaceBefore)+Math.ceil(c.chartSpaceScale*b.xAxisSpaceAfter),U=d-n-Math.ceil(c.chartSpaceScale*b.spaceBottom)-t-J-(K-Math.ceil(c.chartSpaceScale*b.xAxisSpaceBefore))-Math.ceil(c.chartTextScale*b.graphSpaceAfter),xLabelWidth=Math.abs(Math.cos(T*Math.PI/180)*aa)+Math.abs(Math.cos((T+90)*Math.PI/180)*ba),R=Max([R,n+Math.ceil(c.chartSpaceScale*b.spaceLeft)+xLabelWidth/2]),S=Max([S,n+Math.ceil(c.chartSpaceScale*b.spaceRight)+xLabelWidth/2]),availableWidth=e-R-S,b.legend&&b.xAxisBottom&&4==b.legendPosY&&(U-=B),bottomNotUsableHeightWithXLabels=bottomNotUsableHeightWithoutXLabels+K}else availableWidth=e-R-S;if(availableHeight=d-topNotUsableSize-bottomNotUsableHeightWithXLabels,dispCrossImage(c,b,e/2,d/2,e/2,d/2,!1,a,-1,-1),"function"==typeof b.initFunction&&b.initFunction("INITFUNCTION",c,a,null,-1,-1,{animationValue:0,cntiter:0,config:b,borderX:0,borderY:0,midPosX:0,midPosY:0}),"nihil"!=f){n>0&&(c.save(),c.beginPath(),c.lineWidth=2*n,c.setLineDash(lineStyleFn(b.canvasBordersStyle)),c.strokeStyle=b.canvasBordersColor,c.moveTo(0,0),c.lineTo(0,d),c.lineTo(e,d),c.lineTo(e,0),c.lineTo(0,0),c.stroke(),c.setLineDash([]),c.restore()),p>0&&(c.save(),c.beginPath(),c.font=b.graphTitleFontStyle+" "+Math.ceil(c.chartTextScale*b.graphTitleFontSize).toString()+"px "+b.graphTitleFontFamily,c.fillStyle=b.graphTitleFontColor,c.textAlign="center",c.textBaseline="bottom",setTextBordersAndBackground(c,b.graphTitle,Math.ceil(c.chartTextScale*b.graphTitleFontSize),Math.ceil(c.chartSpaceScale*b.spaceLeft)+(e-Math.ceil(c.chartSpaceScale*b.spaceLeft)-Math.ceil(c.chartSpaceScale*b.spaceRight))/2,q,b.graphTitleBorders,b.graphTitleBordersColor,Math.ceil(c.chartLineScale*b.graphTitleBordersWidth),Math.ceil(c.chartSpaceScale*b.graphTitleBordersXSpace),Math.ceil(c.chartSpaceScale*b.graphTitleBordersYSpace),b.graphTitleBordersStyle,b.graphTitleBackgroundColor,"GRAPHTITLE"),c.translate(Math.ceil(c.chartSpaceScale*b.spaceLeft)+(e-Math.ceil(c.chartSpaceScale*b.spaceLeft)-Math.ceil(c.chartSpaceScale*b.spaceRight))/2,q),c.fillTextMultiLine(b.graphTitle,0,0,c.textBaseline,Math.ceil(c.chartTextScale*b.graphTitleFontSize),!0,b.detectMouseOnText,c,"TITLE_TEXTMOUSE",0,Math.ceil(c.chartSpaceScale*b.spaceLeft)+(e-Math.ceil(c.chartSpaceScale*b.spaceLeft)-Math.ceil(c.chartSpaceScale*b.spaceRight))/2,q,-1,-1),c.stroke(),c.restore()),r>0&&(c.save(),c.beginPath(),c.font=b.graphSubTitleFontStyle+" "+Math.ceil(c.chartTextScale*b.graphSubTitleFontSize).toString()+"px "+b.graphSubTitleFontFamily,c.fillStyle=b.graphSubTitleFontColor,c.textAlign="center",c.textBaseline="bottom",setTextBordersAndBackground(c,b.graphSubTitle,Math.ceil(c.chartTextScale*b.graphSubTitleFontSize),Math.ceil(c.chartSpaceScale*b.spaceLeft)+(e-Math.ceil(c.chartSpaceScale*b.spaceLeft)-Math.ceil(c.chartSpaceScale*b.spaceRight))/2,s,b.graphSubTitleBorders,b.graphSubTitleBordersColor,Math.ceil(c.chartLineScale*b.graphSubTitleBordersWidth),Math.ceil(c.chartSpaceScale*b.graphSubTitleBordersXSpace),Math.ceil(c.chartSpaceScale*b.graphSubTitleBordersYSpace),b.graphSubTitleBordersStyle,b.graphSubTitleBackgroundColor,"GRAPHSUBTITLE"),c.translate(Math.ceil(c.chartSpaceScale*b.spaceLeft)+(e-Math.ceil(c.chartSpaceScale*b.spaceLeft)-Math.ceil(c.chartSpaceScale*b.spaceRight))/2,s),c.fillTextMultiLine(b.graphSubTitle,0,0,c.textBaseline,Math.ceil(c.chartTextScale*b.graphSubTitleFontSize),!0,b.detectMouseOnText,c,"SUBTITLE_TEXTMOUSE",0,Math.ceil(c.chartSpaceScale*b.spaceLeft)+(e-Math.ceil(c.chartSpaceScale*b.spaceLeft)-Math.ceil(c.chartSpaceScale*b.spaceRight))/2,s,-1,-1),c.stroke(),c.restore()),v>0&&(b.yAxisLeft&&(c.save(),c.beginPath(),c.font=b.yAxisUnitFontStyle+" "+Math.ceil(c.chartTextScale*b.yAxisUnitFontSize).toString()+"px "+b.yAxisUnitFontFamily,c.fillStyle=b.yAxisUnitFontColor,c.textAlign="center",c.textBaseline="bottom",setTextBordersAndBackground(c,b.yAxisUnit,Math.ceil(c.chartTextScale*b.yAxisUnitFontSize),R,w,b.yAxisUnitBorders,b.yAxisUnitBordersColor,Math.ceil(c.chartLineScale*b.yAxisUnitBordersWidth),Math.ceil(c.chartSpaceScale*b.yAxisUnitBordersXSpace),Math.ceil(c.chartSpaceScale*b.yAxisUnitBordersYSpace),b.yAxisUnitBordersStyle,b.yAxisUnitBackgroundColor,"YAXISUNIT"),c.translate(R,w),c.fillTextMultiLine(b.yAxisUnit,0,0,c.textBaseline,Math.ceil(c.chartTextScale*b.yAxisUnitFontSize),!0,b.detectMouseOnText,c,"YLEFTAXISUNIT_TEXTMOUSE",0,R,w,-1,-1),c.stroke(),c.restore()),b.yAxisRight&&(""==b.yAxisUnit2&&(b.yAxisUnit2=b.yAxisUnit),c.save(),c.beginPath(),c.font=b.yAxisUnitFontStyle+" "+Math.ceil(c.chartTextScale*b.yAxisUnitFontSize).toString()+"px "+b.yAxisUnitFontFamily,c.fillStyle=b.yAxisUnitFontColor,c.textAlign="center",c.textBaseline="bottom",setTextBordersAndBackground(c,b.yAxisUnit2,Math.ceil(c.chartTextScale*b.yAxisUnitFontSize),e-S,w,b.yAxisUnitBorders,b.yAxisUnitBordersColor,Math.ceil(c.chartLineScale*b.yAxisUnitBordersWidth),Math.ceil(c.chartSpaceScale*b.yAxisUnitBordersXSpace),Math.ceil(c.chartSpaceScale*b.yAxisUnitBordersYSpace),b.yAxisUnitBordersStyle,b.yAxisUnitBackgroundColor,"YAXISUNIT"),c.translate(e-S,w),c.fillTextMultiLine(b.yAxisUnit2,0,0,c.textBaseline,Math.ceil(c.chartTextScale*b.yAxisUnitFontSize),!0,b.detectMouseOnText,c,"YRIGHTAXISUNIT_TEXTMOUSE",0,e-S,w,-1,-1),c.stroke(),c.restore())),G>0&&(b.yAxisLeft&&(c.save(),c.beginPath(),c.font=b.yAxisFontStyle+" "+Math.ceil(c.chartTextScale*b.yAxisFontSize).toString()+"px "+b.yAxisFontFamily,c.fillStyle=b.yAxisFontColor,c.textAlign="center",c.textBaseline="bottom",c.translate(H,topNotUsableSize+availableHeight/2),c.rotate(-Math.PI/180*90),setTextBordersAndBackground(c,b.yAxisLabel,Math.ceil(c.chartTextScale*b.yAxisFontSize),0,0,b.yAxisLabelBorders,b.yAxisLabelBordersColor,Math.ceil(c.chartLineScale*b.yAxisLabelBordersWidth),Math.ceil(c.chartSpaceScale*b.yAxisLabelBordersXSpace),Math.ceil(c.chartSpaceScale*b.yAxisLabelBordersYSpace),b.yAxisLabelBordersStyle,b.yAxisLabelBackgroundColor,"YAXISLABELLEFT"),c.fillTextMultiLine(b.yAxisLabel,0,0,c.textBaseline,Math.ceil(c.chartTextScale*b.yAxisFontSize),!1,b.detectMouseOnText,c,"YLEFTAXISLABEL_TEXTMOUSE",-Math.PI/180*90,H,topNotUsableSize+availableHeight/2,-1,-1),c.stroke(),c.restore()),b.yAxisRight&&(""==b.yAxisLabel2&&(b.yAxisLabel2=b.yAxisLabel),c.save(),c.beginPath(),c.font=b.yAxisFontStyle+" "+Math.ceil(c.chartTextScale*b.yAxisFontSize).toString()+"px "+b.yAxisFontFamily,c.fillStyle=b.yAxisFontColor,c.textAlign="center",c.textBaseline="bottom",c.translate(I,topNotUsableSize+availableHeight/2),c.rotate(+Math.PI/180*90),setTextBordersAndBackground(c,b.yAxisLabel2,Math.ceil(c.chartTextScale*b.yAxisFontSize),0,0,b.yAxisLabelBorders,b.yAxisLabelBordersColor,Math.ceil(c.chartLineScale*b.yAxisLabelBordersWidth),Math.ceil(c.chartSpaceScale*b.yAxisLabelBordersXSpace),Math.ceil(c.chartSpaceScale*b.yAxisLabelBordersYSpace),b.yAxisLabelBordersStyle,b.yAxisLabelBackgroundColor,"YAXISLABELLEFT"),c.fillTextMultiLine(b.yAxisLabel2,0,0,c.textBaseline,Math.ceil(c.chartTextScale*b.yAxisFontSize),!1,b.detectMouseOnText,c,"YRIGHTAXISLABEL_TEXTMOUSE",+Math.PI/180*90,I,topNotUsableSize+availableHeight/2,-1,-1),c.stroke(),c.restore())),J>0&&b.xAxisBottom&&(c.save(),c.beginPath(),c.font=b.xAxisFontStyle+" "+Math.ceil(c.chartTextScale*b.xAxisFontSize).toString()+"px "+b.xAxisFontFamily,c.fillStyle=b.xAxisFontColor,c.textAlign="center",c.textBaseline="bottom",setTextBordersAndBackground(c,b.xAxisLabel,Math.ceil(c.chartTextScale*b.xAxisFontSize),R+availableWidth/2,o,b.xAxisLabelBorders,b.xAxisLabelBordersColor,Math.ceil(c.chartLineScale*b.xAxisLabelBordersWidth),Math.ceil(c.chartSpaceScale*b.xAxisLabelBordersXSpace),Math.ceil(c.chartSpaceScale*b.xAxisLabelBordersYSpace),b.xAxisLabelBordersStyle,b.xAxisLabelBackgroundColor,"XAXISLABEL"),c.translate(R+availableWidth/2,o),c.fillTextMultiLine(b.xAxisLabel,0,0,c.textBaseline,Math.ceil(c.chartTextScale*b.xAxisFontSize),!0,b.detectMouseOnText,c,"XAXISLABEL_TEXTMOUSE",0,R+availableWidth/2,o,-1,-1),c.stroke(),c.restore());var ca;y>1||1==y&&b.showSingleLegend?(ca={dispLegend:!0,xLegendBorderPos:E,yLegendBorderPos:F,legendBorderWidth:V,legendBorderHeight:W,nbLegendCols:A,xFirstLegendTextPos:C,yFirstLegendTextPos:D,drawLegendOnData:k,reverseLegend:h,legendBox:l,widestLegend:x},0!=b.legendPosY&&4!=b.legendPosY&&0!=b.legendPosX&&4!=b.legendPosX||(drawLegend(ca,a,b,c,m),ca={dispLegend:!1})):ca={dispLegend:!1},""!=b.footNote.trim()&&(c.save(),c.font=b.footNoteFontStyle+" "+Math.ceil(c.chartTextScale*b.footNoteFontSize).toString()+"px "+b.footNoteFontFamily,c.fillStyle=b.footNoteFontColor,c.textAlign="center",c.textBaseline="bottom",setTextBordersAndBackground(c,b.footNote,Math.ceil(c.chartTextScale*b.footNoteFontSize),R+availableWidth/2,u,b.footNoteBorders,b.footNoteBordersColor,Math.ceil(c.chartLineScale*b.footNoteBordersWidth),Math.ceil(c.chartSpaceScale*b.footNoteBordersXSpace),Math.ceil(c.chartSpaceScale*b.footNoteBordersYSpace),b.footNoteBordersStyle,b.footNoteBackgroundColor,"FOOTNOTE"),c.translate(R+availableWidth/2,u),c.fillTextMultiLine(b.footNote,0,0,c.textBaseline,Math.ceil(c.chartTextScale*b.footNoteFontSize),!0,b.detectMouseOnText,c,"FOOTNOTE_TEXTMOUSE",0,R+availableWidth/2,u,-1,-1),c.stroke(),c.restore())}return clrx=R,clrwidth=availableWidth,clry=topNotUsableSize,clrheight=availableHeight,{leftNotUsableSize:R,rightNotUsableSize:S,availableWidth:availableWidth,topNotUsableSize:topNotUsableSize,bottomNotUsableHeightWithoutXLabels:bottomNotUsableHeightWithoutXLabels,bottomNotUsableHeightWithXLabels:bottomNotUsableHeightWithXLabels,availableHeight:availableHeight,widestXLabel:L,highestXLabel:M,widestYLabel:N,widestYLabel2:P,highestYLabel:O,rotateLabels:T,xLabelPos:U,clrx:clrx,clry:clry,clrwidth:clrwidth,clrheight:clrheight,legendMsr:ca}}function drawLinesDataset(a,b,c,d,e,f){function z(a,f,g,h){setOptionValue(1,"BEZIERCURVE",d,b,e,void 0,c.bezierCurve,h,-1,{nullValue:!0})&&(a.length=0,a.push(f),a.push(g))}function A(a,b,c,d,e,f,g,h){setOptionValue(1,"BEZIERCURVE",b,f,g,void 0,e.bezierCurve,h,-1,{nullValue:!0})?(a.push(c),a.push(d)):b.lineTo(c,d)}function B(a,c,d,f){setOptionValue(1,"BEZIERCURVE",c,b,e,void 0,d.bezierCurve,f,-1,{nullValue:!0})&&(minimumpos=e[f][0].xAxisPosY,maximumpos=e[f][0].xAxisPosY-e[f][0].calculatedScale.steps*e[f][0].scaleHop,D(c,a,setOptionValue(1,"BEZIERCURVETENSION",c,b,e,void 0,d.bezierCurveTension,f,-1,{nullValue:!0}),minimumpos,maximumpos),a.length=0)}function C(a,b,c,d,e,f,g){var h=Math.sqrt(Math.pow(c-a,2)+Math.pow(d-b,2)),i=Math.sqrt(Math.pow(e-c,2)+Math.pow(f-d,2)),j=g*h/(h+i),k=g-j;return[c+j*(a-e),d+j*(b-f),c-k*(a-e),d-k*(b-f)]}function D(a,d,f,i,j){var k=[],l=d.length;if(d.push(2*d[l-2]-d[l-4]),d.push(2*d[l-1]-d[l-3]),4==l)return a.moveTo(d[0],d[1]),void a.lineTo(d[2],d[3]);for(var m=0;m<l-2;m+=2)k=k.concat(C(d[m],d[m+1],d[m+2],d[m+3],d[m+4],d[m+5],f));for(a.beginPath(),a.strokeStyle=setOptionValue(1,"STROKECOLOR",a,b,e,b.datasets[o].strokeColor,c.defaultStrokeColor,o,r,{nullvalue:null}),a.lineWidth=Math.ceil(a.chartLineScale*c.datasetStrokeWidth),a.moveTo(d[0],d[1]),a.quadraticCurveTo(k[0],Math.max(Math.min(k[1],i),j),d[2],d[3]),a.setLineDash(lineStyleFn(setOptionValue(1,"LINEDASH",a,b,e,b.datasets[o].datasetStrokeStyle,c.datasetStrokeStyle,o,r,{nullvalue:null}))),m=2;m<d.length-4;m+=2)g=Math.max(Math.min(k[2*m-1],i),j),h=Math.max(Math.min(k[2*m+1],i),j),a.bezierCurveTo(k[2*m-2],g,k[2*m],h,d[m+2],d[m+3]);a.stroke()}for(var g,h,i,j,k,l,m,n=[],o=0;o<b.datasets.length;o++)if("Line"==e[o][0].tpchart&&0!=e[o].length&&-1!=e[o][0].firstNotMissing){d.save(),d.beginPath(),prevAnimPc={mainVal:0,subVal:0,animVal:0};for(var p=-1,q=-1,r=e[o][0].firstNotMissing;r<=e[o][0].lastNotMissing;r++)if(!(0==prevAnimPc.animVal&&r>e[o][0].firstNotMissing))if(m=animationCorrection(a,b,c,o,r,0),0==m.mainVal&&prevAnimPc.mainVal>0&&-1!=p)d.setLineDash(lineStyleFn(setOptionValue(1,"LINEDASH",d,b,e,b.datasets[o].datasetStrokeStyle,c.datasetStrokeStyle,o,r,{nullvalue:null}))),d.stroke(),d.setLineDash([]),c.extrapolateMissingData?(g=e[o][e[o][r].prevNotMissing].yAxisPos-prevAnimPc.mainVal*e[o][e[o][r].prevNotMissing].yPosOffset,h=e[o][r].yAxisPos-prevAnimPc.mainVal*e[o][e[o][r-1].nextNotMissing].yPosOffset,j=e[o][r-1].nextNotMissing-e[o][r].prevNotMissing,k=r-1-e[o][r].prevNotMissing,l=(k+prevAnimPc.subVal)/j,i=g+l*(h-g),A(n,d,e[o][r-1].xPos+prevAnimPc.subVal*(e[o][r].xPos-e[o][r-1].xPos),i,c,b,e,o),B(n,d,c,o),d.setLineDash(lineStyleFn(setOptionValue(1,"LINEDASH",d,b,e,b.datasets[o].datasetStrokeStyle,c.datasetStrokeStyle,o,r,{nullvalue:null}))),d.stroke(),d.setLineDash([]),d.strokeStyle="rgba(0,0,0,0)",c.datasetFill&&(d.lineTo(e[o][r-1].xPos+prevAnimPc.subVal*(e[o][r].xPos-e[o][r-1].xPos),e[o][r].yAxisPos),d.lineTo(e[o][p].xPos,e[o][p].xAxisPosY-e[o][0].zeroY),d.closePath(),d.fillStyle=setOptionValue(1,"COLOR",d,b,e,b.datasets[o].fillColor,c.defaultFillColor,o,r,{animationValue:m.mainVal,xPosLeft:e[o][0].xPos,yPosBottom:Math.max(e[o][0].yAxisPos,e[o][0].yAxisPos-(c.animationLeftToRight?1:1*m.mainVal)*e[o][0].lminvalue_offset),xPosRight:e[o][b.datasets[o].data.length-1].xPos,yPosTop:Math.min(e[o][0].yAxisPos,e[o][0].yAxisPos-(c.animationLeftToRight?1:1*m.mainVal)*e[o][0].lmaxvalue_offset)}),d.fill(),p=-1)):void 0!==e[o][r].value&&(A(n,d,e[o][r-1].xPos+prevAnimPc.subVal*(e[o][r].xPos-e[o][r-1].xPos),e[o][r].yAxisPos-prevAnimPc.mainVal*e[o][e[o][r-1].nextNotMissing].yPosOffset,c,b,e,o),B(n,d,c,o),d.setLineDash(lineStyleFn(setOptionValue(1,"LINEDASH",d,b,e,b.datasets[o].datasetStrokeStyle,c.datasetStrokeStyle,o,r,{nullvalue:null}))),d.stroke(),d.setLineDash([]),d.strokeStyle="rgba(0,0,0,0)",c.datasetFill&&(d.lineTo(e[o][r-1].xPos+prevAnimPc.subVal*(e[o][r].xPos-e[o][r-1].xPos),e[o][r].yAxisPos),d.lineTo(e[o][p].xPos,e[o][p].xAxisPosY-e[o][0].zeroY),d.closePath(),d.fillStyle=setOptionValue(1,"COLOR",d,b,e,b.datasets[o].fillColor,c.defaultFillColor,o,r,{animationValue:m.mainVal,xPosLeft:e[o][0].xPos,yPosBottom:Math.max(e[o][0].yAxisPos,e[o][0].yAxisPos-(c.animationLeftToRight?1:1*m.mainVal)*e[o][0].lminvalue_offset),xPosRight:e[o][b.datasets[o].data.length-1].xPos,yPosTop:Math.min(e[o][0].yAxisPos,e[o][0].yAxisPos-(c.animationLeftToRight?1:1*m.mainVal)*e[o][0].lmaxvalue_offset)}),d.fill())),prevAnimPc=m;else switch(0==m.totVal?(d.setLineDash(lineStyleFn(setOptionValue(1,"LINEDASH",d,b,e,b.datasets[o].datasetStrokeStyle,c.datasetStrokeStyle,o,r,{nullvalue:null}))),d.stroke(),d.setLineDash([]),d.strokeStyle="rgba(0,0,0,0)"):(d.setLineDash(lineStyleFn(setOptionValue(1,"LINEDASH",d,b,e,b.datasets[o].datasetStrokeStyle,c.datasetStrokeStyle,o,r,{nullvalue:null}))),d.stroke(),d.setLineDash([]),d.strokeStyle=setOptionValue(1,"STROKECOLOR",d,b,e,b.datasets[o].strokeColor,c.defaultStrokeColor,o,r,{nullvalue:null})),prevAnimPc=m,typeof b.datasets[o].data[r]){case"undefined":if(c.extrapolateMissingData)m.subVal>0&&(q=e[o][r].xPos+m.subVal*(e[o][r+1].xPos-e[o][r].xPos),g=e[o][e[o][r+1].prevNotMissing].yAxisPos-e[o][e[o][r+1].prevNotMissing].yPosOffset,h=e[o][e[o][r].nextNotMissing].yAxisPos-e[o][e[o][r].nextNotMissing].yPosOffset,j=e[o][r].nextNotMissing-e[o][r+1].prevNotMissing,k=r-e[o][r+1].prevNotMissing,l=(k+prevAnimPc.subVal)/j,i=g+l*(h-g),A(n,d,e[o][r].xPos+m.subVal*(e[o][r+1].xPos-e[o][r].xPos),i,c,b,e,o));else{if(-1==p)continue;B(n,d,c,o),d.setLineDash(lineStyleFn(setOptionValue(1,"LINEDASH",d,b,e,b.datasets[o].datasetStrokeStyle,c.datasetStrokeStyle,o,r,{nullvalue:null}))),d.stroke(),d.setLineDash([]),c.datasetFill&&-1!=p&&(q=-1,d.strokeStyle="rgba(0,0,0,0)",d.lineTo(e[o][r-1].xPos,e[o][r-1].yAxisPos),d.lineTo(e[o][p].xPos,e[o][p].yAxisPos),d.closePath(),d.fillStyle=setOptionValue(1,"COLOR",d,b,e,b.datasets[o].fillColor,c.defaultFillColor,o,r,{animationValue:m.mainVal,xPosLeft:e[o][0].xPos,yPosBottom:Math.max(e[o][0].yAxisPos,e[o][0].yAxisPos-(c.animationLeftToRight?1:1*m.mainVal)*e[o][0].lminvalue_offset),xPosRight:e[o][b.datasets[o].data.length-1].xPos,yPosTop:Math.min(e[o][0].yAxisPos,e[o][0].yAxisPos-(c.animationLeftToRight?1:1*m.mainVal)*e[o][0].lmaxvalue_offset)}),d.fill()),d.beginPath(),prevAnimPc={mainVal:0,subVal:0},p=-1}break;default:d.lineWidth=Math.ceil(d.chartLineScale*c.datasetStrokeWidth),-1==p?(p=r,d.beginPath(),d.moveTo(e[o][r].xPos,e[o][r].yAxisPos-m.mainVal*e[o][r].yPosOffset),z(n,e[o][r].xPos,e[o][r].yAxisPos-m.mainVal*e[o][r].yPosOffset,o),q=e[o][r].xPos):(q=e[o][r].xPos,A(n,d,e[o][r].xPos,e[o][r].yAxisPos-m.mainVal*e[o][r].yPosOffset,c,b,e,o)),m.subVal>0&&-1!=e[o][r].nextNotMissing&&(c.extrapolateMissing||e[o][r].nextNotMissing==r+1)&&(q=e[o][r].xPos+m.subVal*(e[o][r+1].xPos-e[o][r].xPos),g=e[o][e[o][r+1].prevNotMissing].yAxisPos-e[o][e[o][r+1].prevNotMissing].yPosOffset,h=e[o][e[o][r].nextNotMissing].yAxisPos-e[o][e[o][r].nextNotMissing].yPosOffset,i=g+m.subVal*(h-g),A(n,d,e[o][r].xPos+m.subVal*(e[o][r+1].xPos-e[o][r].xPos),i,c,b,e,o))}if(B(n,d,c,o),d.setLineDash(lineStyleFn(setOptionValue(1,"LINEDASH",d,b,e,b.datasets[o].datasetStrokeStyle,c.datasetStrokeStyle,o,r,{nullvalue:null}))),d.stroke(),d.setLineDash([]),c.datasetFill&&p>=0&&(d.strokeStyle="rgba(0,0,0,0)",d.lineTo(q,e[o][0].xAxisPosY-e[o][0].zeroY),d.lineTo(e[o][p].xPos,e[o][p].xAxisPosY-e[o][0].zeroY),d.closePath(),d.fillStyle=setOptionValue(1,"COLOR",d,b,e,b.datasets[o].fillColor,c.defaultFillColor,o,-1,{animationValue:m.mainVal,xPosLeft:e[o][0].xPos,yPosBottom:Math.max(e[o][0].yAxisPos,e[o][0].yAxisPos-(c.animationLeftToRight?1:1*m.mainVal)*e[o][0].lminvalue_offset),xPosRight:e[o][b.datasets[o].data.length-1].xPos,yPosTop:Math.min(e[o][0].yAxisPos,e[o][0].yAxisPos-(c.animationLeftToRight?1:1*m.mainVal)*e[o][0].lmaxvalue_offset)}),d.fill()),d.restore(),c.pointDot&&a>=1)for(r=0;r<b.datasets[o].data.length;r++)if(void 0!==b.datasets[o].data[r]&&(m=animationCorrection(a,b,c,o,r,0),m.mainVal>0||!c.animationLeftToRight)){d.beginPath(),d.fillStyle=setOptionValue(1,"MARKERFILLCOLOR",d,b,e,b.datasets[o].pointColor,c.defaultStrokeColor,o,r,{nullvalue:!0}),d.strokeStyle=setOptionValue(1,"MARKERSTROKESTYLE",d,b,e,b.datasets[o].pointStrokeColor,c.defaultStrokeColor,o,r,{nullvalue:!0}),d.lineWidth=setOptionValue(d.chartLineScale,"MARKERLINEWIDTH",d,b,e,b.datasets[o].pointDotStrokeWidth,c.pointDotStrokeWidth,o,r,{nullvalue:!0});var s=setOptionValue(1,"MARKERSHAPE",d,b,e,b.datasets[o].markerShape,c.markerShape,o,r,{nullvalue:!0}),t=setOptionValue(d.chartSpaceScale,"MARKERRADIUS",d,b,e,b.datasets[o].pointDotRadius,c.pointDotRadius,o,r,{nullvalue:!0}),u=setOptionValue(1,"MARKERSTROKESTYLE",d,b,e,b.datasets[o].pointDotStrokeStyle,c.pointDotStrokeStyle,o,r,{nullvalue:!0});drawMarker(d,e[o][r].xPos,e[o][r].yAxisPos-m.mainVal*e[o][r].yPosOffset,s,t,u)}if(a>=c.animationStopValue)for(r=0;r<b.datasets[o].data.length;r++)if(void 0!==b.datasets[o].data[r]&&(jsGraphAnnotate[d.ChartNewId][jsGraphAnnotate[d.ChartNewId].length]=["POINT",o,r,e,setOptionValue(1,"ANNOTATEDISPLAY",d,b,e,void 0,c.annotateDisplay,o,r,{nullValue:!0})],setOptionValue(1,"INGRAPHDATASHOW",d,b,e,void 0,c.inGraphDataShow,o,r,{nullValue:!0}))){d.save(),d.textAlign=setOptionValue(1,"INGRAPHDATAALIGN",d,b,e,void 0,c.inGraphDataAlign,o,r,{nullValue:!0}),d.textBaseline=setOptionValue(1,"INGRAPHDATAVALIGN",d,b,e,void 0,c.inGraphDataVAlign,o,r,{nullValue:!0}),d.font=setOptionValue(1,"INGRAPHDATAFONTSTYLE",d,b,e,void 0,c.inGraphDataFontStyle,o,r,{nullValue:!0})+" "+setOptionValue(d.chartTextScale,"INGRAPHDATAFONTSIZE",d,b,e,void 0,c.inGraphDataFontSize,o,r,{nullValue:!0})+"px "+setOptionValue(1,"INGRAPHDATAFONTFAMILY",d,b,e,void 0,c.inGraphDataFontFamily,o,r,{nullValue:!0}),d.fillStyle=setOptionValue(1,"INGRAPHDATAFONTCOLOR",d,b,e,void 0,c.inGraphDataFontColor,o,r,{nullValue:!0});var v=setOptionValue(d.chartSpaceScale,"INGRAPHDATAPADDINGX",d,b,e,void 0,c.inGraphDataPaddingX,o,r,{nullValue:!0}),w=setOptionValue(d.chartSpaceScale,"INGRAPHDATAPADDINGY",d,b,e,void 0,c.inGraphDataPaddingY,o,r,{nullValue:!0}),x=tmplbis(setOptionValue(1,"INGRAPHDATATMPL",d,b,e,void 0,c.inGraphDataTmpl,o,r,{nullValue:!0}),e[o][r],c);d.translate(e[o][r].xPos+v,e[o][r].yAxisPos-m.mainVal*e[o][r].yPosOffset-w);var y=setOptionValue(1,"INGRAPHDATAROTATE",d,b,e,void 0,c.inGraphDataRotate,o,r,{nullValue:!0})*(Math.PI/180);d.rotate(y),setTextBordersAndBackground(d,x,setOptionValue(d.chartTextScale,"INGRAPHDATAFONTSIZE",d,b,e,void 0,c.inGraphDataFontSize,o,r,{nullValue:!0}),0,0,setOptionValue(1,"INGRAPHDATABORDERS",d,b,e,void 0,c.inGraphDataBorders,o,r,{nullValue:!0}),setOptionValue(1,"INGRAPHDATABORDERSCOLOR",d,b,e,void 0,c.inGraphDataBordersColor,o,r,{nullValue:!0}),setOptionValue(d.chartLineScale,"INGRAPHDATABORDERSWIDTH",d,b,e,void 0,c.inGraphDataBordersWidth,o,r,{nullValue:!0}),setOptionValue(d.chartSpaceScale,"INGRAPHDATABORDERSXSPACE",d,b,e,void 0,c.inGraphDataBordersXSpace,o,r,{nullValue:!0}),setOptionValue(d.chartSpaceScale,"INGRAPHDATABORDERSYSPACE",d,b,e,void 0,c.inGraphDataBordersYSpace,o,r,{nullValue:!0}),setOptionValue(1,"INGRAPHDATABORDERSSTYLE",d,b,e,void 0,c.inGraphDataBordersStyle,o,r,{nullValue:!0}),setOptionValue(1,"INGRAPHDATABACKGROUNDCOLOR",d,b,e,void 0,c.inGraphDataBackgroundColor,o,r,{nullValue:!0}),"INGRAPHDATA"),d.fillTextMultiLine(x,0,0,d.textBaseline,setOptionValue(d.chartTextScale,"INGRAPHDATAFONTSIZE",d,b,e,void 0,c.inGraphDataFontSize,o,r,{nullValue:!0}),!0,c.detectMouseOnText,d,"INGRAPHDATA_TEXTMOUSE",y,e[o][r].xPos+v,e[o][r].yAxisPos-m.mainVal*e[o][r].yPosOffset-w,o,r),d.restore()}}d.setLineDash([])}function log10(a){return Math.log(a)/Math.LN10}function setRect(a,b){b.clearRect?b.multiGraph||(clear(a),a.clearRect(0,0,width,height)):(clear(a),a.clearRect(0,0,width,height),a.fillStyle=b.savePngBackgroundColor,a.strokeStyle=b.savePngBackgroundColor,a.beginPath(),a.moveTo(0,0),a.lineTo(0,a.canvas.height),a.lineTo(a.canvas.width,a.canvas.height),a.lineTo(a.canvas.width,0),a.lineTo(0,0),a.stroke(),a.fill())}function chartJsMouseDown(a,b,c,d,e){1==a.which&&"function"==typeof c.mouseDownLeft?c.mouseDownLeft(a,b,c,d,e):2==a.which&&"function"==typeof c.mouseDownMiddle?c.mouseDownMiddle(a,b,c,d,e):3==a.which&&"function"==typeof c.mouseDownRight&&c.mouseDownRight(a,b,c,d,e)}function defMouse(a,b,c){function d(d,e,f){function g(d){(null==f||f(d))&&doMouseAction(c,a,d,b,"mouseaction",e)}if("function"==typeof e){var h=d+" "+e.name;h in a._eventListeners&&(a.canvas.removeEventListener?a.canvas.removeEventListener(d,a._eventListeners[h]):a.canvas.detachEvent&&a.canvas.detachEvent(d,a._eventListeners[h])),a._eventListeners[h]=g,a.canvas.addEventListener?("mousewheel"==d&&(d="DOMMouseScroll"),a.canvas.addEventListener(d,g,!1)):a.canvas.attachEvent&&a.canvas.attachEvent("on"+d,g)}}isBooleanOptionTrue(void 0,c.annotateDisplay)&&(0==cursorDivCreated&&(oCursor=new makeCursorObj("divCursor")),isIE()<9&&0!=isIE()?a.canvas.attachEvent("on"+c.annotateFunction.split(" ")[0],function(d){("left"==c.annotateFunction.split(" ")[1]&&1==d.which||"middle"==c.annotateFunction.split(" ")[1]&&2==d.which||"right"==c.annotateFunction.split(" ")[1]&&3==d.which||"string"!=typeof c.annotateFunction.split(" ")[1])&&doMouseAction(c,a,d,b,"annotate",c.mouseDownRight)}):a.canvas.addEventListener(c.annotateFunction.split(" ")[0],function(d){("left"==c.annotateFunction.split(" ")[1]&&1==d.which||"middle"==c.annotateFunction.split(" ")[1]&&2==d.which||"right"==c.annotateFunction.split(" ")[1]&&3==d.which||"string"!=typeof c.annotateFunction.split(" ")[1])&&doMouseAction(c,a,d,b,"annotate",c.mouseDownRight)},!1)),c.savePng&&(isIE()<9&&0!=isIE()?a.canvas.attachEvent("on"+c.savePngFunction.split(" ")[0],function(d){("left"==c.savePngFunction.split(" ")[1]&&1==d.which||"middle"==c.savePngFunction.split(" ")[1]&&2==d.which||"right"==c.savePngFunction.split(" ")[1]&&3==d.which||"string"!=typeof c.savePngFunction.split(" ")[1])&&saveCanvas(a,b,c)}):a.canvas.addEventListener(c.savePngFunction.split(" ")[0],function(d){("left"==c.savePngFunction.split(" ")[1]&&1==d.which||"middle"==c.savePngFunction.split(" ")[1]&&2==d.which||"right"==c.savePngFunction.split(" ")[1]&&3==d.which||"string"!=typeof c.savePngFunction.split(" ")[1])&&saveCanvas(a,b,c)},!1)),isIE()<9&&0!=isIE()?a.canvas.attachEvent("onmousewheel",function(a){cursorDivCreated&&(document.getElementById("divCursor").style.display="none")}):a.canvas.addEventListener("DOMMouseScroll",function(a){cursorDivCreated&&(document.getElementById("divCursor").style.display="none")},!1),"function"==typeof c.mouseDownRight?d("mousedown",chartJsMouseDown,function(a){return 1==a.which||2==a.which||3==a.which}):"function"==typeof c.mouseDownLeft?d("mousedown",chartJsMouseDown,function(a){return 1==a.which||2==a.which||3==a.which}):"function"==typeof c.mouseDownMiddle&&d("mousedown",chartJsMouseDown,function(a){return 1==a.which||2==a.which||3==a.which}),d("mousemove",c.mouseMove),d("mouseout",c.mouseOut),d("mousewheel",c.mouseWheel)}var chart=this,animationOptions={linear:function(a){return a},easeInQuad:function(a){return a*a},easeOutQuad:function(a){return-1*a*(a-2)},easeInOutQuad:function(a){return(a/=.5)<1?.5*a*a:-.5*(--a*(a-2)-1)},easeInCubic:function(a){return a*a*a},easeOutCubic:function(a){return 1*((a=a/1-1)*a*a+1)},easeInOutCubic:function(a){return(a/=.5)<1?.5*a*a*a:.5*((a-=2)*a*a+2)},easeInQuart:function(a){return a*a*a*a},easeOutQuart:function(a){return-1*((a=a/1-1)*a*a*a-1)},easeInOutQuart:function(a){return(a/=.5)<1?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2)},easeInQuint:function(a){return 1*(a/=1)*a*a*a*a},easeOutQuint:function(a){return 1*((a=a/1-1)*a*a*a*a+1)},easeInOutQuint:function(a){return(a/=.5)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)},easeInSine:function(a){return-1*Math.cos(a/1*(Math.PI/2))+1},easeOutSine:function(a){return 1*Math.sin(a/1*(Math.PI/2))},easeInOutSine:function(a){return-.5*(Math.cos(Math.PI*a/1)-1)},easeInExpo:function(a){return 0==a?1:1*Math.pow(2,10*(a/1-1))},easeOutExpo:function(a){return 1==a?1:1*(1-Math.pow(2,-10*a/1))},easeInOutExpo:function(a){return 0==a?0:1==a?1:(a/=.5)<1?.5*Math.pow(2,10*(a-1)):.5*(2-Math.pow(2,-10*--a))},easeInCirc:function(a){return a>=1?a:-1*(Math.sqrt(1-(a/=1)*a)-1)},easeOutCirc:function(a){return 1*Math.sqrt(1-(a=a/1-1)*a)},easeInOutCirc:function(a){return(a/=.5)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)},easeInElastic:function(a){var b=1.70158,c=0,d=1;return 0==a?0:1==(a/=1)?1:(c||(c=.3),d<Math.abs(1)?(d=1,b=c/4):b=c/(2*Math.PI)*Math.asin(1/d),-d*Math.pow(2,10*(a-=1))*Math.sin((1*a-b)*(2*Math.PI)/c))},easeOutElastic:function(a){var b=1.70158,c=0,d=1;return 0==a?0:1==(a/=1)?1:(c||(c=.3),d<Math.abs(1)?(d=1,b=c/4):b=c/(2*Math.PI)*Math.asin(1/d),d*Math.pow(2,-10*a)*Math.sin((1*a-b)*(2*Math.PI)/c)+1)},easeInOutElastic:function(a){var b=1.70158,c=0,d=1;return 0==a?0:2==(a/=.5)?1:(c||(c=.3*1.5*1),d<Math.abs(1)?(d=1,b=c/4):b=c/(2*Math.PI)*Math.asin(1/d),a<1?d*Math.pow(2,10*(a-=1))*Math.sin((1*a-b)*(2*Math.PI)/c)*-.5:d*Math.pow(2,-10*(a-=1))*Math.sin((1*a-b)*(2*Math.PI)/c)*.5+1)},easeInBack:function(a){var b=1.70158;return 1*(a/=1)*a*((b+1)*a-b)},easeOutBack:function(a){var b=1.70158;return 1*((a=a/1-1)*a*((b+1)*a+b)+1)},easeInOutBack:function(a){var b=1.70158;return(a/=.5)<1?a*a*((1+(b*=1.525))*a-b)*.5:.5*((a-=2)*a*((1+(b*=1.525))*a+b)+2)},easeInBounce:function(a){return 1-animationOptions.easeOutBounce(1-a)},easeOutBounce:function(a){return(a/=1)<1/2.75?7.5625*a*a*1:a<2/2.75?1*(7.5625*(a-=1.5/2.75)*a+.75):a<2.5/2.75?1*(7.5625*(a-=2.25/2.75)*a+.9375):1*(7.5625*(a-=2.625/2.75)*a+.984375)},easeInOutBounce:function(a){return a<.5?.5*animationOptions.easeInBounce(2*a):.5*animationOptions.easeOutBounce(2*a-1)+.5}},width=context.canvas.width,height=context.canvas.height;window.devicePixelRatio&&(context.canvas.style.width=width+"px",context.canvas.style.height=height+"px",context.canvas.height=height*window.devicePixelRatio,context.canvas.width=width*window.devicePixelRatio,context.scale(window.devicePixelRatio,window.devicePixelRatio)),this.PolarArea=function(a,b){chart.PolarArea.defaults={inGraphDataShow:!1,inGraphDataPaddingRadius:5,inGraphDataPaddingAngle:0,inGraphDataTmpl:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>",inGraphDataAlign:"off-center",inGraphDataVAlign:"off-center",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataRadiusPosition:3,inGraphDataAnglePosition:2,scaleOverlay:!0,scaleOverride:!1,scaleOverride2:!1,scaleGridLinesStep:1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleShowLine:!0,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleLineStyle:"solid",scaleShowLabels:!0,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeStyle:"solid",segmentStrokeWidth:2,animation:!0,animationByData:"ByArc",animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,onAnimationComplete:null,annotateLabel:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>",startAngle:90,totalAmplitude:360,radiusScale:1},isIE()<9&&0!=isIE()&&(chart.PolarArea.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.PolarArea.defaults)),chart.PolarArea.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.PolarArea.defaults),chart.PolarArea.defaults=mergeChartConfig(chart.PolarArea.defaults,charJSPersonalDefaultOptions),chart.PolarArea.defaults=mergeChartConfig(chart.PolarArea.defaults,charJSPersonalDefaultOptionsPolarArea);var c=b?mergeChartConfig(chart.PolarArea.defaults,b):chart.PolarArea.defaults;return new PolarArea(a,c,context)},this.Radar=function(a,b){chart.Radar.defaults={inGraphDataShow:!1,inGraphDataPaddingRadius:5,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"off-center",inGraphDataVAlign:"off-center",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataRadiusPosition:3,yAxisMinimumInterval:"none",scaleGridLinesStep:1,scaleOverlay:!1,scaleOverride:!1,scaleOverride2:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleShowLine:!0,scaleLineColor:"rgba(0,0,0,.1)",scaleLineStyle:"solid",scaleLineWidth:1,scaleShowLabels:!1,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,angleShowLineOut:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineStyle:"solid",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:12,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,pointDotStrokeStyle:"solid",datasetFill:!0,datasetStrokeWidth:2,datasetStrokeStyle:"solid",animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3%>",pointHitDetectionRadius:10,startAngle:90},isIE()<9&&0!=isIE()&&(chart.Radar.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.Radar.defaults)),chart.Radar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Radar.defaults),chart.Radar.defaults=mergeChartConfig(chart.Radar.defaults,charJSPersonalDefaultOptions),chart.Radar.defaults=mergeChartConfig(chart.Radar.defaults,charJSPersonalDefaultOptionsRadar);var c=b?mergeChartConfig(chart.Radar.defaults,b):chart.Radar.defaults;return new Radar(a,c,context)},this.Pie=function(a,b){chart.Pie.defaults=chart.defaults.PieAndDoughnut,isIE()<9&&0!=isIE()&&(chart.Pie.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.Pie.defaults)),chart.Pie.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Pie.defaults),chart.Pie.defaults=mergeChartConfig(chart.Pie.defaults,charJSPersonalDefaultOptions),chart.Pie.defaults=mergeChartConfig(chart.Pie.defaults,charJSPersonalDefaultOptionsPie);var c=b?mergeChartConfig(chart.Pie.defaults,b):chart.Pie.defaults;return new Pie(a,c,context)},this.Doughnut=function(a,b){chart.Doughnut.defaults=chart.defaults.PieAndDoughnut,isIE()<9&&0!=isIE()&&(chart.Doughnut.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.Doughnut.defaults)),chart.Doughnut.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Doughnut.defaults),chart.Doughnut.defaults=mergeChartConfig(chart.Doughnut.defaults,charJSPersonalDefaultOptions),chart.Doughnut.defaults=mergeChartConfig(chart.Doughnut.defaults,charJSPersonalDefaultOptionsDoughnut);var c=b?mergeChartConfig(chart.Doughnut.defaults,b):chart.Doughnut.defaults;return new Doughnut(a,c,context)},this.Line=function(a,b){chart.Line.defaults={inGraphDataShow:!1,inGraphDataPaddingX:3,inGraphDataPaddingY:3,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"left",inGraphDataVAlign:"bottom",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",drawXScaleLine:[{position:"bottom"}],scaleOverlay:!1,scaleOverride:!1,scaleOverride2:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleSteps2:null,scaleStepWidth2:null,scaleStartValue2:null,scaleLabel2:"<%=value%>",scaleLineColor:"rgba(0,0,0,.1)",scaleLineStyle:"solid",scaleLineWidth:1,scaleShowLabels:!0,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineStyle:"solid",scaleGridLineWidth:1,showYAxisMin:!0,rotateLabels:"smart",logarithmic:!1,logarithmic2:!1,scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeStyle:"solid",pointDotStrokeWidth:2,datasetStrokeStyle:"solid",datasetStrokeWidth:2,datasetFill:!0,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",extrapolateMissingData:!0,onAnimationComplete:null,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3%>",pointHitDetectionRadius:10},isIE()<9&&0!=isIE()&&(chart.Line.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.Line.defaults)),chart.Line.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Line.defaults),chart.Line.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.Line.defaults),chart.Line.defaults=mergeChartConfig(chart.Line.defaults,charJSPersonalDefaultOptions),chart.Line.defaults=mergeChartConfig(chart.Line.defaults,charJSPersonalDefaultOptionsLine);var c=b?mergeChartConfig(chart.Line.defaults,b):chart.Line.defaults;return new Line(a,c,context)},this.StackedBar=function(a,b){chart.StackedBar.defaults={annotateBarMinimumDetectionHeight:0,inGraphDataShow:!1,inGraphDataPaddingX:0,inGraphDataPaddingY:-3,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"center",inGraphDataVAlign:"top",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataXPosition:2,inGraphDataYPosition:3,scaleOverlay:!1,scaleOverride:!1,scaleOverride2:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineStyle:"solid",scaleLineWidth:1,scaleShowLabels:!0,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineStyle:"solid",scaleGridLineWidth:1,showYAxisMin:!0,rotateLabels:"smart",scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,pointDot:!0,pointDotRadius:4,pointDotStrokeStyle:"solid",pointDotStrokeWidth:2,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,spaceBetweenBar:0,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,bezierCurve:!0,bezierCurveTension:.4,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3 + ' (' + v6 + ' %)'%>",pointHitDetectionRadius:10},isIE()<9&&0!=isIE()&&(chart.StackedBar.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.StackedBar.defaults)),chart.StackedBar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.StackedBar.defaults),chart.StackedBar.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.StackedBar.defaults),chart.StackedBar.defaults=mergeChartConfig(chart.StackedBar.defaults,charJSPersonalDefaultOptions),chart.StackedBar.defaults=mergeChartConfig(chart.StackedBar.defaults,charJSPersonalDefaultOptionsStackedBar);var c=b?mergeChartConfig(chart.StackedBar.defaults,b):chart.StackedBar.defaults;return new StackedBar(a,c,context)},this.HorizontalStackedBar=function(a,b){chart.HorizontalStackedBar.defaults={annotateBarMinimumDetectionHeight:0,inGraphDataShow:!1,inGraphDataPaddingX:-3,inGraphDataPaddingY:0,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"right",inGraphDataVAlign:"middle",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataXPosition:3,inGraphDataYPosition:2,scaleOverlay:!1,scaleOverride:!1,scaleOverride2:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineStyle:"solid",scaleLineWidth:1,scaleShowLabels:!0,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineStyle:"solid",scaleGridLineWidth:1,scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,showYAxisMin:!0,rotateLabels:"smart",barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,spaceBetweenBar:0,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3 + ' (' + v6 + ' %)'%>",reverseOrder:!1},isIE()<9&&0!=isIE()&&(chart.HorizontalStackedBar.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.HorizontalStackedBar.defaults)),chart.HorizontalStackedBar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.HorizontalStackedBar.defaults),chart.HorizontalStackedBar.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.HorizontalStackedBar.defaults),chart.HorizontalStackedBar.defaults=mergeChartConfig(chart.HorizontalStackedBar.defaults,charJSPersonalDefaultOptions),chart.HorizontalStackedBar.defaults=mergeChartConfig(chart.HorizontalStackedBar.defaults,charJSPersonalDefaultOptionsHorizontalStackedBar);var c=b?mergeChartConfig(chart.HorizontalStackedBar.defaults,b):chart.HorizontalStackedBar.defaults;return new HorizontalStackedBar(a,c,context)},this.Bar=function(a,b){chart.Bar.defaults={annotateBarMinimumDetectionHeight:0,inGraphDataShow:!1,inGraphDataPaddingX:0,inGraphDataPaddingY:3,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"center",inGraphDataVAlign:"bottom",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataXPosition:2,inGraphDataYPosition:3,scaleOverlay:!1,scaleOverride:!1,scaleOverride2:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleSteps2:null,scaleStepWidth2:null,scaleStartValue2:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineStyle:"solid",scaleLineWidth:1,scaleShowLabels:!0,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleLabel2:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleGridLineStyle:"solid",showYAxisMin:!0,rotateLabels:"smart",logarithmic:!1,logarithmic2:!1,scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,barBorderRadius:0,pointDot:!0,pointDotRadius:4,pointDotStrokeStyle:"solid",pointDotStrokeWidth:2,extrapolateMissingData:!0,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,bezierCurve:!0,bezierCurveTension:.4,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3 + ' (' + v6 + ' %)'%>",pointHitDetectionRadius:10},isIE()<9&&0!=isIE()&&(chart.Bar.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.Bar.defaults)),chart.Bar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Bar.defaults),chart.Bar.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.Bar.defaults),chart.Bar.defaults=mergeChartConfig(chart.Bar.defaults,charJSPersonalDefaultOptions),chart.Bar.defaults=mergeChartConfig(chart.Bar.defaults,charJSPersonalDefaultOptionsBar);var c=b?mergeChartConfig(chart.Bar.defaults,b):chart.Bar.defaults;return new Bar(a,c,context)},this.HorizontalBar=function(a,b){chart.HorizontalBar.defaults={annotateBarMinimumDetectionHeight:0,inGraphDataShow:!1,inGraphDataPaddingX:3,inGraphDataPaddingY:0,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"left",inGraphDataVAlign:"middle",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataXPosition:3,inGraphDataYPosition:2,scaleOverlay:!1,scaleOverride:!1,scaleOverride2:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineStyle:"solid",scaleLineWidth:1,scaleShowLabels:!0,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineStyle:"solid",scaleGridLineWidth:1,scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,showYAxisMin:!0,rotateLabels:"smart",barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,barBorderRadius:0,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3 + ' (' + v6 + ' %)'%>",reverseOrder:!1},isIE()<9&&0!=isIE()&&(chart.HorizontalBar.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.HorizontalBar.defaults)),chart.HorizontalBar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.HorizontalBar.defaults),chart.HorizontalBar.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.HorizontalBar.defaults),chart.HorizontalBar.defaults=mergeChartConfig(chart.HorizontalBar.defaults,charJSPersonalDefaultOptions),chart.HorizontalBar.defaults=mergeChartConfig(chart.HorizontalBar.defaults,charJSPersonalDefaultOptionsHorizontalBar);var c=b?mergeChartConfig(chart.HorizontalBar.defaults,b):chart.HorizontalBar.defaults;return new HorizontalBar(a,c,context)},chart.defaults={},chart.defaults.IExplorer8={annotateBackgroundColor:"black",annotateFontColor:"white"},chart.defaults.commonOptions={chartTextScale:1,chartLineScale:1,chartSpaceScale:1,multiGraph:!1,clearRect:!0,dynamicDisplay:!1,graphSpaceBefore:5,graphSpaceAfter:5,canvasBorders:!1,canvasBackgroundColor:"none",canvasBordersWidth:3,canvasBordersStyle:"solid",canvasBordersColor:"black",zeroValue:1e-10,graphTitle:"",graphTitleFontFamily:"'Arial'",graphTitleFontSize:24,graphTitleFontStyle:"bold",graphTitleFontColor:"#666",graphTitleSpaceBefore:5,graphTitleSpaceAfter:5,graphTitleBorders:!1,graphTitleBordersColor:"black",graphTitleBordersXSpace:3,graphTitleBordersYSpace:3,graphTitleBordersWidth:1,graphTitleBordersStyle:"solid",graphTitleBackgroundColor:"none",graphSubTitle:"",graphSubTitleFontFamily:"'Arial'",graphSubTitleFontSize:18,graphSubTitleFontStyle:"normal",graphSubTitleFontColor:"#666",graphSubTitleSpaceBefore:5,graphSubTitleSpaceAfter:5,graphSubTitleBorders:!1,graphSubTitleBordersColor:"black",graphSubTitleBordersXSpace:3,graphSubTitleBordersYSpace:3,graphSubTitleBordersWidth:1,graphSubTitleBordersStyle:"solid",graphSubTitleBackgroundColor:"none",footNote:"",footNoteFontFamily:"'Arial'",footNoteFontSize:8,footNoteFontStyle:"bold",footNoteFontColor:"#666",footNoteSpaceBefore:5,footNoteSpaceAfter:5,footNoteBorders:!1,footNoteBordersColor:"black",footNoteBordersXSpace:3,footNoteBordersYSpace:3,footNoteBordersWidth:1,footNoteBordersStyle:"solid",footNoteBackgroundColor:"none",legend:!1,showSingleLegend:!1,maxLegendCols:999,legendPosY:4,legendPosX:-2,legendFontFamily:"'Arial'",legendFontSize:12,legendFontStyle:"normal",legendFontColor:"#666",legendBlockSize:15,legendBorders:!0,legendBordersStyle:"solid",legendBordersWidth:1,legendBordersColors:"#666",legendBordersSpaceBefore:5,legendBordersSpaceAfter:5,legendBordersSpaceLeft:5,legendBordersSpaceRight:5,legendSpaceBeforeText:5,legendSpaceAfterText:5,legendSpaceLeftText:5,legendSpaceRightText:5,legendSpaceBetweenTextVertical:5,legendSpaceBetweenTextHorizontal:5,legendSpaceBetweenBoxAndText:5,legendFillColor:"rgba(0,0,0,0)",legendXPadding:0,legendYPadding:0,inGraphDataBorders:!1,inGraphDataBordersColor:"black",inGraphDataBordersXSpace:3,inGraphDataBordersYSpace:3,inGraphDataBordersWidth:1,inGraphDataBordersStyle:"solid",inGraphDataBackgroundColor:"none",annotateDisplay:!1,annotateRelocate:!1,savePng:!1,savePngOutput:"NewWindow",savePngFunction:"mousedown right",savePngBackgroundColor:"WHITE",annotateFunction:"mousemove",annotateFontFamily:"'Arial'",annotateBorder:"none",annotateBorderRadius:"2px",annotateBackgroundColor:"rgba(0,0,0,0.8)",annotateFontSize:12,annotateFontColor:"white",annotateFontStyle:"normal",annotatePadding:"3px",annotateClassName:"",annotateFunctionIn:null,annotateFunctionOut:null,detectMouseOnText:!1,crossText:[""],crossTextIter:["all"],crossTextOverlay:[!0],crossTextFontFamily:["'Arial'"],crossTextFontSize:[12],crossTextFontStyle:["normal"],crossTextFontColor:["rgba(220,220,220,1)"],crossTextRelativePosX:[2],crossTextRelativePosY:[2],crossTextBaseline:["middle"],crossTextAlign:["center"],crossTextPosX:[0],crossTextPosY:[0],crossTextAngle:[0],crossTextFunction:null,crossTextBorders:[!1],crossTextBordersColor:["black"],crossTextBordersXSpace:[3],crossTextBordersYSpace:[3],crossTextBordersWidth:[1],crossTextBordersStyle:["solid"],crossTextBackgroundColor:["none"],crossImage:[void 0],crossImageIter:["all"],crossImageOverlay:[!0],crossImageRelativePosX:[2],crossImageRelativePosY:[2],crossImageBaseline:["middle"],crossImageAlign:["center"],crossImagePosX:[0],crossImagePosY:[0],crossImageAngle:[0],spaceTop:0,spaceBottom:0,spaceRight:0,spaceLeft:0,decimalSeparator:".",thousandSeparator:"",roundNumber:"none",roundPct:-1,templatesOpenTag:"<%=",templatesCloseTag:"%>",fmtV1:"none",fmtV2:"none",fmtV3:"none",fmtV4:"none",fmtV5:"none",fmtV6:"none",fmtV6T:"none",fmtV7:"none",fmtV8:"none",fmtV8T:"none",fmtV9:"none",fmtV10:"none",fmtV11:"none",fmtV12:"none",fmtV13:"none",fmtXLabel:"none",fmtYLabel:"none",fmtYLabel2:"none",fmtLegend:"none",animationStartValue:0,animationStopValue:1,animationCount:1,animationPauseTime:5,animationBackward:!1,animationStartWithDataset:1,animationStartWithData:1,animationLeftToRight:!1,animationByDataset:!1,defaultStrokeColor:"rgba(220,220,220,1)",defaultFillColor:"rgba(220,220,220,0.5)",defaultLineWidth:2,graphMaximized:!1,contextMenu:!0,mouseDownRight:null,mouseDownLeft:null,mouseDownMiddle:null,mouseMove:null,mouseOut:null,mouseWheel:null,savePngName:"canvas",responsive:!1,responsiveMinWidth:0,responsiveMinHeight:0,responsiveMaxWidth:9999999,responsiveMaxHeight:9999999,maintainAspectRatio:!0,responsiveScaleContent:!1,responsiveWindowInitialWidth:!1,pointMarker:"circle",initFunction:null,beforeDrawFunction:null,endDrawDataFunction:null,endDrawScaleFunction:null},chart.defaults.PieAndDoughnut={inGraphDataShow:!1,inGraphDataPaddingRadius:5,inGraphDataPaddingAngle:0,inGraphDataTmpl:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>",inGraphDataAlign:"off-center",inGraphDataVAlign:"off-center",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataRadiusPosition:3,inGraphDataAnglePosition:2,inGraphDataMinimumAngle:0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeStyle:"solid",segmentStrokeWidth:2,percentageInnerCutout:50,animation:!0,animationByData:!1,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,onAnimationComplete:null,annotateLabel:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>",startAngle:90,totalAmplitude:360,radiusScale:1},chart.defaults.xyAxisCommonOptions={maxBarWidth:-1,yAxisMinimumInterval:"none",yAxisMinimumInterval2:"none",yScaleLabelsMinimumWidth:0,xScaleLabelsMinimumWidth:0,yAxisLeft:!0,yAxisRight:!1,xAxisBottom:!0,xAxisTop:!1,xAxisSpaceBetweenLabels:5,fullWidthGraph:!1,yAxisLabel:"",yAxisLabel2:"",yAxisFontFamily:"'Arial'",yAxisFontSize:16,yAxisFontStyle:"normal",yAxisFontColor:"#666",yAxisLabelSpaceRight:5,yAxisLabelSpaceLeft:5,yAxisSpaceRight:5,yAxisSpaceLeft:5,yAxisLabelBorders:!1,yAxisLabelBordersColor:"black",yAxisLabelBordersXSpace:3,yAxisLabelBordersYSpace:3,yAxisLabelBordersWidth:1,yAxisLabelBordersStyle:"solid",yAxisLabelBackgroundColor:"none",xAxisLabel:"",xAxisFontFamily:"'Arial'",xAxisFontSize:16,xAxisFontStyle:"normal",xAxisFontColor:"#666",xAxisLabelSpaceBefore:5,xAxisLabelSpaceAfter:5,xAxisSpaceBefore:5,xAxisSpaceAfter:5,xAxisLabelBorders:!1,xAxisLabelBordersColor:"black",xAxisLabelBordersXSpace:3,xAxisLabelBordersYSpace:3,xAxisLabelBordersWidth:1,xAxisLabelBordersStyle:"solid",xAxisLabelBackgroundColor:"none",showXLabels:1,firstLabelToShow:1,showYLabels:1,firstYLabelToShow:1,yAxisUnit:"",yAxisUnit2:"",yAxisUnitFontFamily:"'Arial'",yAxisUnitFontSize:8,yAxisUnitFontStyle:"normal",yAxisUnitFontColor:"#666",yAxisUnitSpaceBefore:5,yAxisUnitSpaceAfter:5,yAxisUnitBorders:!1,yAxisUnitBordersColor:"black",yAxisUnitBordersXSpace:3,yAxisUnitBordersYSpace:3,yAxisUnitBordersWidth:1,yAxisUnitBordersStyle:"solid",yAxisUnitBackgroundColor:"none"};var clear=function(a){a.clearRect(0,0,width,height)},PolarArea=function(a,b,c){function w(d){for(var g=0;g<a.length;g++){var h=1,i=1;if(b.animation&&(b.animateScale&&(h=d),b.animateRotate&&(i=d)),correctedRotateAnimation=animationCorrection(i,a,b,g,-1,0).mainVal,void 0!==a[g].value){if(c.beginPath(),"ByArc"==b.animationByData)endAngle=r[g].startAngle+correctedRotateAnimation*r[g].segmentAngle,c.arc(l,m,h*r[g].radiusOffset,r[g].startAngle,endAngle,!1);else if(b.animationByData){if(!(r[g].startAngle-r[g].firstAngle<2*correctedRotateAnimation*Math.PI))continue;endAngle=r[g].endAngle,r[g].endAngle-r[g].firstAngle>2*correctedRotateAnimation*Math.PI&&(endAngle=r[g].firstAngle+2*correctedRotateAnimation*Math.PI),c.arc(l,m,h*r[g].radiusOffset,r[g].startAngle,endAngle,!1)}else c.arc(l,m,h*r[g].radiusOffset,r[g].firstAngle+correctedRotateAnimation*(r[g].startAngle-r[g].firstAngle),r[g].firstAngle+correctedRotateAnimation*(r[g].endAngle-r[g].firstAngle));c.lineTo(l,m),c.closePath(),c.fillStyle=setOptionValue(1,"COLOR",c,a,r,a[g].color,b.defaultFillColor,g,-1,{animationDecimal:d,scaleAnimation:h}),c.fill(),b.segmentShowStroke&&(c.strokeStyle=b.segmentStrokeColor,c.lineWidth=Math.ceil(c.chartLineScale*b.segmentStrokeWidth),c.setLineDash(lineStyleFn(setOptionValue(1,"SEGMENTSTROKESTYLE",c,a,r,a[g].segmentStrokeStyle,b.segmentStrokeStyle,g,-1,{animationDecimal:d,scaleAnimation:h}))),c.stroke(),c.setLineDash([]))}}if(d>=b.animationStopValue)for(g=0;g<a.length;g++)if(void 0!==a[g].value&&(jsGraphAnnotate[c.ChartNewId][jsGraphAnnotate[c.ChartNewId].length]=["ARC",g,-1,r,setOptionValue(1,"ANNOTATEDISPLAY",c,a,r,void 0,b.annotateDisplay,g,-1,{nullValue:!0})],setOptionValue(1,"INGRAPHDATASHOW",c,a,r,void 0,b.inGraphDataShow,g,-1,{nullValue:!0}))){1==setOptionValue(1,"INGRAPHDATAANGLEPOSITION",c,a,r,void 0,b.inGraphDataAnglePosition,g,-1,{nullValue:!0})?posAngle=r[g].realStartAngle+setOptionValue(1,"INGRAPHDATAPADDINANGLE",c,a,r,void 0,b.inGraphDataPaddingAngle,g,-1,{nullValue:!0})*(Math.PI/180):2==setOptionValue(1,"INGRAPHDATAANGLEPOSITION",c,a,r,void 0,b.inGraphDataAnglePosition,g,-1,{nullValue:!0})?posAngle=(2*r[g].realStartAngle-r[g].segmentAngle)/2+setOptionValue(1,"INGRAPHDATAPADDINANGLE",c,a,r,void 0,b.inGraphDataPaddingAngle,g,-1,{nullValue:!0})*(Math.PI/180):3==setOptionValue(1,"INGRAPHDATAANGLEPOSITION",c,a,r,void 0,b.inGraphDataAnglePosition,g,-1,{nullValue:!0})&&(posAngle=r[g].realStartAngle-r[g].segmentAngle+setOptionValue(1,"INGRAPHDATAPADDINANGLE",c,a,r,void 0,b.inGraphDataPaddingAngle,g,-1,{nullValue:!0})*(Math.PI/180)),1==setOptionValue(1,"INGRAPHDATARADIUSPOSITION",c,a,r,void 0,b.inGraphDataRadiusPosition,g,-1,{nullValue:!0})?labelRadius=0+setOptionValue(1,"INGRAPHDATAPADDINGRADIUS",c,a,r,void 0,b.inGraphDataPaddingRadius,g,-1,{nullValue:!0}):2==setOptionValue(1,"INGRAPHDATARADIUSPOSITION",c,a,r,void 0,b.inGraphDataRadiusPosition,g,-1,{nullValue:!0})?labelRadius=r[g].radiusOffset/2+setOptionValue(1,"INGRAPHDATAPADDINGRADIUS",c,a,r,void 0,b.inGraphDataPaddingRadius,g,-1,{nullValue:!0}):3==setOptionValue(1,"INGRAPHDATARADIUSPOSITION",c,a,r,void 0,b.inGraphDataRadiusPosition,g,-1,{nullValue:!0})?labelRadius=r[g].radiusOffset+setOptionValue(1,"INGRAPHDATAPADDINGRADIUS",c,a,r,void 0,b.inGraphDataPaddingRadius,g,-1,{nullValue:!0}):4==setOptionValue(1,"INGRAPHDATARADIUSPOSITION",c,a,r,void 0,b.inGraphDataRadiusPosition,g,-1,{nullValue:!0})&&(labelRadius=e*f.steps+setOptionValue(1,"INGRAPHDATAPADDINGRADIUS",c,a,r,void 0,b.inGraphDataPaddingRadius,g,-1,{nullValue:!0})),c.save(),"off-center"==setOptionValue(1,"INGRAPHDATAALIGN",c,a,r,void 0,b.inGraphDataAlign,g,-1,{nullValue:!0})?"inRadiusAxis"==setOptionValue(1,"INGRAPHDATAROTATE",c,a,r,void 0,b.inGraphDataRotate,g,-1,{nullValue:!0})||(posAngle+2*Math.PI)%(2*Math.PI)>3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<Math.PI/2?c.textAlign="left":c.textAlign="right":"to-center"==setOptionValue(1,"INGRAPHDATAALIGN",c,a,r,void 0,b.inGraphDataAlign,g,-1,{nullValue:!0})?"inRadiusAxis"==setOptionValue(1,"INGRAPHDATAROTATE",c,a,r,void 0,b.inGraphDataRotate,g,-1,{nullValue:!0})||(posAngle+2*Math.PI)%(2*Math.PI)>3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<Math.PI/2?c.textAlign="right":c.textAlign="left":c.textAlign=setOptionValue(1,"INGRAPHDATAALIGN",c,a,r,void 0,b.inGraphDataAlign,g,-1,{nullValue:!0}),"off-center"==setOptionValue(1,"INGRAPHDATAVALIGN",c,a,r,void 0,b.inGraphDataVAlign,g,-1,{nullValue:!0})?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI?c.textBaseline="top":c.textBaseline="bottom":"to-center"==setOptionValue(1,"INGRAPHDATAVALIGN",c,a,r,void 0,b.inGraphDataVAlign,g,-1,{nullValue:!0})?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI?c.textBaseline="bottom":c.textBaseline="top":c.textBaseline=setOptionValue(1,"INGRAPHDATAVALIGN",c,a,r,void 0,b.inGraphDataVAlign,g,-1,{nullValue:!0}),c.font=setOptionValue(1,"INGRAPHDATAFONTSTYLE",c,a,r,void 0,b.inGraphDataFontStyle,g,-1,{nullValue:!0})+" "+setOptionValue(c.chartTextScale,"INGRAPHDATAFONTSIZE",c,a,r,void 0,b.inGraphDataFontSize,g,-1,{nullValue:!0})+"px "+setOptionValue(1,"INGRAPHDATAFONTFAMILY",c,a,r,void 0,b.inGraphDataFontFamily,g,-1,{nullValue:!0}),c.fillStyle=setOptionValue(1,"INGRAPHDATAFONTCOLOR",c,a,r,void 0,b.inGraphDataFontColor,g,-1,{nullValue:!0});var j=tmplbis(setOptionValue(1,"INGRAPHDATATMPL",c,a,r,void 0,b.inGraphDataTmpl,g,-1,{nullValue:!0}),r[g],b);c.translate(l+labelRadius*Math.cos(posAngle),m-labelRadius*Math.sin(posAngle));var n=0;n="inRadiusAxis"==setOptionValue(1,"INGRAPHDATAROTATE",c,a,r,void 0,b.inGraphDataRotate,g,-1,{nullValue:!0})?2*Math.PI-posAngle:"inRadiusAxisRotateLabels"==setOptionValue(1,"INGRAPHDATAROTATE",c,a,r,void 0,b.inGraphDataRotate,g,-1,{nullValue:!0})?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI/2&&(posAngle+2*Math.PI)%(2*Math.PI)<3*Math.PI/2?3*Math.PI-posAngle:2*Math.PI-posAngle:setOptionValue(1,"INGRAPHDATAROTATE",c,a,r,void 0,b.inGraphDataRotate,g,-1,{nullValue:!0})*(Math.PI/180),c.rotate(n),setTextBordersAndBackground(c,j,setOptionValue(c.chartTextScale,"INGRAPHDATAFONTSIZE",c,a,r,void 0,b.inGraphDataFontSize,g,-1,{nullValue:!0}),0,0,setOptionValue(1,"INGRAPHDATABORDERS",c,a,r,void 0,b.inGraphDataBorders,g,-1,{nullValue:!0}),setOptionValue(1,"INGRAPHDATABORDERSCOLOR",c,a,r,void 0,b.inGraphDataBordersColor,g,-1,{nullValue:!0}),setOptionValue(c.chartLineScale,"INGRAPHDATABORDERSWIDTH",c,a,r,void 0,b.inGraphDataBordersWidth,g,-1,{nullValue:!0}),setOptionValue(c.chartSpaceScale,"INGRAPHDATABORDERSXSPACE",c,a,r,void 0,b.inGraphDataBordersXSpace,g,-1,{nullValue:!0}),setOptionValue(c.chartSpaceScale,"INGRAPHDATABORDERSYSPACE",c,a,r,void 0,b.inGraphDataBordersYSpace,g,-1,{nullValue:!0}),setOptionValue(1,"INGRAPHDATABORDERSSTYLE",c,a,r,void 0,b.inGraphDataBordersStyle,g,-1,{nullValue:!0}),setOptionValue(1,"INGRAPHDATABACKGROUNDCOLOR",c,a,r,void 0,b.inGraphDataBackgroundColor,g,-1,{nullValue:!0}),"INGRAPHDATA"),c.fillTextMultiLine(j,0,0,c.textBaseline,setOptionValue(c.chartTextScale,"INGRAPHDATAFONTSIZE",c,a,r,void 0,b.inGraphDataFontSize,g,-1,{nullValue:!0}),!0,b.detectMouseOnText,c,"INGRAPHDATA_TEXTMOUSE",n,l+labelRadius*Math.cos(posAngle),m-labelRadius*Math.sin(posAngle),g,-1),c.restore()}k.legendMsr.dispLegend&&drawLegend(k.legendMsr,a,b,c,"PolarArea")}function x(){for(var a=0;a<f.steps;a++)if(b.scaleShowLine&&(a+1)%b.scaleGridLinesStep==0&&(c.beginPath(),c.arc(l,m,e*(a+1),4*Math.PI-p,4*Math.PI-q,!0),c.strokeStyle=b.scaleLineColor,c.lineWidth=Math.ceil(c.chartLineScale*b.scaleLineWidth),c.setLineDash(lineStyleFn(b.scaleLineStyle)),c.stroke(),c.setLineDash([])),b.scaleShowLabels){Math.abs(b.totalAmplitude-360)<b.zeroValue?scaleAngle=Math.PI/2:scaleAngle=(p+q)/2,c.textAlign="center",c.font=b.scaleFontStyle+" "+Math.ceil(c.chartTextScale*b.scaleFontSize).toString()+"px "+b.scaleFontFamily;var d=f.labels[a+1];if(b.scaleShowLabelBackdrop){var g=c.measureTextMultiLine(d,Math.ceil(c.chartTextScale*b.scaleFontSize));c.fillStyle=b.scaleBackdropColor,c.beginPath(),c.rect(Math.round(l+Math.cos(scaleAngle)*(e*(a+1))-g/2-Math.ceil(c.chartSpaceScale*b.scaleBackdropPaddingX)),Math.round(m-Math.sin(scaleAngle)*(e*(a+1))-.5*Math.ceil(c.chartTextScale*b.scaleFontSize)-Math.ceil(c.chartSpaceScale*b.scaleBackdropPaddingY)),Math.round(g+2*Math.ceil(c.chartSpaceScale*b.scaleBackdropPaddingX)),Math.round(Math.ceil(c.chartTextScale*b.scaleFontSize)+2*Math.ceil(c.chartSpaceScale*b.scaleBackdropPaddingY))),c.fill()}c.textBaseline="middle",c.fillStyle=b.scaleFontColor,c.fillTextMultiLine(d,l+Math.cos(scaleAngle)*(e*(a+1)),m-Math.sin(scaleAngle)*(e*(a+1)),c.textBaseline,Math.ceil(c.chartTextScale*b.scaleFontSize),!0,b.detectMouseOnText,c,"SCALE_TEXTMOUSE",0,0,0,a,-1)}}function y(){for(var d=-Number.MAX_VALUE,e=Number.MAX_VALUE,f=0;f<a.length;f++)void 0!==a[f].value&&(1*a[f].value>d&&(d=1*a[f].value),1*a[f].value<e&&(e=1*a[f].value));d<e&&(d=0,e=0),Math.abs(d-e)<b.zeroValue&&(Math.abs(d)<b.zeroValue&&(d=.9),d>0?(d*=1.1,e*=.9):(d*=.9,e*=1.1)),"function"==typeof b.graphMin?e=setOptionValue(1,"GRAPHMIN",c,a,r,void 0,b.graphMin,-1,-1,{nullValue:!0}):isNaN(b.graphMin)||(e=b.graphMin),"function"==typeof b.graphMax?d=setOptionValue(1,"GRAPHMAX",c,a,r,void 0,b.graphMax,-1,-1,{nullValue:!0}):isNaN(b.graphMax)||(d=b.graphMax);var i=Math.floor(h/(.66*g)),j=Math.floor(h/g*.5);return d<e&&(e=d-1),{maxValue:d,minValue:e,maxSteps:i,minSteps:j}}var e,f,g,h,i,j,k,l,m;if(c.tpchart="PolarArea",c.tpdata=1,init_and_start(c,a,b)){var n=((b.startAngle*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),o=((b.totalAmplitude*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI);o<=b.zeroValue&&(o=2*Math.PI);var p=(n-o+4*Math.PI)%(2*Math.PI),q=p+o,r=initPassVariableData_part1(a,b,c);if(i=y(),b.logarithmic=!1,b.logarithmic2=!1,j=b.scaleShowLabels?b.scaleLabel:"",b.scaleOverride){var s=setOptionValue(1,"SCALESTARTVALUE",c,a,r,void 0,b.scaleStartValue,-1,-1,{nullValue:!0}),t=setOptionValue(1,"SCALESTEPS",c,a,r,void 0,b.scaleSteps,-1,-1,{nullValue:!0}),u=setOptionValue(1,"SCALESTEPWIDTH",c,a,r,void 0,b.scaleStepWidth,-1,-1,{nullValue:!0});f={steps:t,stepValue:u,graphMin:s,graphMax:s+t*u,labels:[]},populateLabels(1,b,j,f.labels,f.steps,s,f.graphMax,u),k=setMeasures(a,b,c,height,width,f.labels,null,!0,!1,!1,!1,!0,"PolarArea")}else f=calculateScale(1,b,i.maxSteps,i.minSteps,i.maxValue,i.minValue,j),k=setMeasures(a,b,c,height,width,f.labels,null,!0,!1,!1,!1,!0,"PolarArea");var v=calculatePieDrawingSize(c,k,b,a,r);l=v.midPieX,m=v.midPieY,e=Math.floor(v.radius/f.steps),e>0?(initPassVariableData_part2(r,a,b,c,{midPosX:l,midPosY:m,int_radius:0,ext_radius:e*f.steps,calculatedScale:f,scaleHop:e}),animationLoop(b,x,w,c,k.clrx,k.clry,k.clrwidth,k.clrheight,l,m,l-(Min([k.availableHeight,k.availableWidth])/2-5),m+(Min([k.availableHeight,k.availableWidth])/2-5),a,r)):testRedraw(c,a,b)}},Radar=function(a,b,c){function r(d){var e=2*Math.PI/a.datasets[0].data.length;c.save();for(var f=0;f<a.datasets.length;f++){for(var g=-1,h=0;h<a.datasets[f].data.length;h++){var i=animationCorrection(d,a,b,f,h,1).animVal;i>1&&(i-=1),void 0!==a.datasets[f].data[h]&&(-1==g?(c.beginPath(),c.moveTo(l+i*n[f][h].offsetX,m-i*n[f][h].offsetY),g=h):c.lineTo(l+i*n[f][h].offsetX,m-i*n[f][h].offsetY))}if(c.closePath(),b.datasetFill?c.fillStyle=setOptionValue(1,"COLOR",c,a,n,a.datasets[f].fillColor,b.defaultFillColor,f,-1,{animationValue:i,midPosX:n[f][0].midPosX,midPosY:n[f][0].midPosY,ext_radius:(b.animationLeftToRight?1:i)*n[f][0].calculated_offset_max}):c.fillStyle="rgba(0,0,0,0)",c.strokeStyle=setOptionValue(1,"STROKECOLOR",c,a,n,a.datasets[f].strokeColor,b.defaultStrokeColor,f,-1,{nullvalue:null}),c.lineWidth=Math.ceil(c.chartLineScale*b.datasetStrokeWidth),c.fill(),c.setLineDash(lineStyleFn(setOptionValue(1,"LINEDASH",c,a,n,a.datasets[f].datasetStrokeStyle,b.datasetStrokeStyle,f,h,{nullvalue:null}))),c.stroke(),c.setLineDash([]),b.pointDot&&(!b.animationLeftToRight||b.animationLeftToRight&&d>=1)){c.beginPath(),c.fillStyle=setOptionValue(1,"MARKERFILLCOLOR",c,a,n,a.datasets[f].pointColor,b.defaultStrokeColor,f,-1,{nullvalue:!0}),c.strokeStyle=setOptionValue(1,"MARKERSTROKESTYLE",c,a,n,a.datasets[f].pointStrokeColor,b.defaultStrokeColor,f,-1,{nullvalue:!0}),c.lineWidth=setOptionValue(c.chartLineScale,"MARKERLINEWIDTH",c,a,n,a.datasets[f].pointDotStrokeWidth,b.pointDotStrokeWidth,f,-1,{nullvalue:!0});for(var j=0;j<a.datasets[f].data.length;j++)if(void 0!==a.datasets[f].data[j]){c.beginPath();var o=setOptionValue(1,"MARKERSHAPE",c,a,n,a.datasets[f].markerShape,b.markerShape,f,j,{nullvalue:!0}),p=setOptionValue(c.chartSpaceScale,"MARKERRADIUS",c,a,n,a.datasets[f].pointDotRadius,b.pointDotRadius,f,j,{nullvalue:!0}),q=setOptionValue(1,"MARKERSTROKESTYLE",c,a,n,a.datasets[f].pointDotStrokeStyle,b.pointDotStrokeStyle,f,j,{nullvalue:!0});drawMarker(c,l+i*n[f][j].offsetX,m-i*n[f][j].offsetY,o,p,q)}}}if(c.restore(),d>=b.animationStopValue)for(f=0;f<a.datasets.length;f++)for(h=0;h<a.datasets[f].data.length;h++)if(void 0!==a.datasets[f].data[h]&&(jsGraphAnnotate[c.ChartNewId][jsGraphAnnotate[c.ChartNewId].length]=["POINT",f,h,n,setOptionValue(1,"ANNOTATEDISPLAY",c,a,n,void 0,b.annotateDisplay,f,h,{nullValue:!0})],setOptionValue(1,"INGRAPHDATASHOW",c,a,n,void 0,b.inGraphDataShow,f,h,{nullValue:!0}))){c.save(),c.beginPath(),c.textAlign=setOptionValue(1,"INGRAPHDATAALIGN",c,a,n,void 0,b.inGraphDataAlign,f,-1,{nullValue:!0}),c.textBaseline=setOptionValue(1,"INGRAPHDATAVALIGN",c,a,n,void 0,b.inGraphDataVAlign,f,-1,{nullValue:!0}),"off-center"==setOptionValue(1,"INGRAPHDATAALIGN",c,a,n,void 0,b.inGraphDataAlign,f,-1,{nullValue:!0})?"inRadiusAxis"==setOptionValue(1,"INGRAPHDATAROTATE",c,a,n,void 0,b.inGraphDataRotate,f,-1,{nullValue:!0})||(b.startAngle*Math.PI/180-h*e+4*Math.PI)%(2*Math.PI)>3*Math.PI/2||(b.startAngle*Math.PI/180-h*e+4*Math.PI)%(2*Math.PI)<=Math.PI/2?c.textAlign="left":c.textAlign="right":"to-center"==setOptionValue(1,"INGRAPHDATAALIGN",c,a,n,void 0,b.inGraphDataAlign,f,-1,{nullValue:!0})?"inRadiusAxis"==setOptionValue(1,"INGRAPHDATAROTATE",c,a,n,void 0,b.inGraphDataRotate,f,-1,{nullValue:!0})||(b.startAngle*Math.PI/180-h*e+4*Math.PI)%(2*Math.PI)>3*Math.PI/2||(b.startAngle*Math.PI/180-h*e+4*Math.PI)%(2*Math.PI)<Math.PI/2?c.textAlign="right":c.textAlign="left":c.textAlign=setOptionValue(1,"INGRAPHDATAALIGN",c,a,n,void 0,b.inGraphDataAlign,f,-1,{nullValue:!0}),"off-center"==setOptionValue(1,"INGRAPHDATAVALIGN",c,a,n,void 0,b.inGraphDataVAlign,f,-1,{nullValue:!0})?(b.startAngle*Math.PI/180-h*e+4*Math.PI)%(2*Math.PI)>Math.PI?c.textBaseline="bottom":c.textBaseline="top":"to-center"==setOptionValue(1,"INGRAPHDATAVALIGN",c,a,n,void 0,b.inGraphDataVAlign,f,-1,{nullValue:!0})?(b.startAngle*Math.PI/180-h*e+4*Math.PI)%(2*Math.PI)>Math.PI?c.textBaseline="top":c.textBaseline="bottom":c.textBaseline=setOptionValue(1,"INGRAPHDATAVALIGN",c,a,n,void 0,b.inGraphDataVAlign,f,-1,{nullValue:!0}),c.font=setOptionValue(1,"INGRAPHDATAFONTSTYLE",c,a,n,void 0,b.inGraphDataFontStyle,f,-1,{nullValue:!0})+" "+setOptionValue(c.chartTextScale,"INGRAPHDATAFONTSIZE",c,a,n,void 0,b.inGraphDataFontSize,f,-1,{nullValue:!0})+"px "+setOptionValue(1,"INGRAPHDATAFONTFAMILY",c,a,n,void 0,b.inGraphDataFontFamily,f,-1,{nullValue:!0}),c.fillStyle=setOptionValue(1,"INGRAPHDATAFONTCOLOR",c,a,n,void 0,b.inGraphDataFontColor,f,-1,{nullValue:!0});var r;1==setOptionValue(1,"INGRAPHDATARADIUSPOSITION",c,a,n,void 0,b.inGraphDataRadiusPosition,f,-1,{nullValue:!0})?r=0+setOptionValue(1,"INGRAPHDATAPADDINGRADIUS",c,a,n,void 0,b.inGraphDataPaddingRadius,f,-1,{nullValue:!0}):2==setOptionValue(1,"INGRAPHDATARADIUSPOSITION",c,a,n,void 0,b.inGraphDataRadiusPosition,f,-1,{nullValue:!0})?r=n[f][h].calculated_offset/2+setOptionValue(1,"INGRAPHDATAPADDINGRADIUS",c,a,n,void 0,b.inGraphDataPaddingRadius,f,-1,{nullValue:!0}):3==setOptionValue(1,"INGRAPHDATARADIUSPOSITION",c,a,n,void 0,b.inGraphDataRadiusPosition,f,-1,{nullValue:!0})&&(r=n[f][h].calculated_offset+setOptionValue(1,"INGRAPHDATAPADDINGRADIUS",c,a,n,void 0,b.inGraphDataPaddingRadius,f,-1,{nullValue:!0}));var s,t;n[f][h].calculated_offset>0?(s=l+n[f][h].offsetX*(r/n[f][h].calculated_offset),t=m-n[f][h].offsetY*(r/n[f][h].calculated_offset)):(s=l,t=m),c.translate(s,t);var u=0;u="inRadiusAxis"==setOptionValue(1,"INGRAPHDATAROTATE",c,a,n,void 0,b.inGraphDataRotate,f,-1,{nullValue:!0})?h*e:"inRadiusAxisRotateLabels"==setOptionValue(1,"INGRAPHDATAROTATE",c,a,n,void 0,b.inGraphDataRotate,f,-1,{nullValue:!0})?(h*e+2*Math.PI)%(2*Math.PI)>Math.PI/2&&(h*e+2*Math.PI)%(2*Math.PI)<3*Math.PI/2?3*Math.PI+h*e:2*Math.PI+h*e:setOptionValue(1,"INGRAPHDATAROTATE",c,a,n,void 0,b.inGraphDataRotate,f,-1,{nullValue:!0})*(Math.PI/180),c.rotate(u);var v=tmplbis(setOptionValue(1,"INGRAPHDATATMPL",c,a,n,void 0,b.inGraphDataTmpl,f,-1,{nullValue:!0}),n[f][h],b);setTextBordersAndBackground(c,v,setOptionValue(c.chartTextScale,"INGRAPHDATAFONTSIZE",c,a,n,void 0,b.inGraphDataFontSize,f,-1,{nullValue:!0}),0,0,setOptionValue(1,"INGRAPHDATABORDERS",c,a,n,void 0,b.inGraphDataBorders,f,-1,{nullValue:!0}),setOptionValue(1,"INGRAPHDATABORDERSCOLOR",c,a,n,void 0,b.inGraphDataBordersColor,f,-1,{nullValue:!0}),setOptionValue(c.chartLineScale,"INGRAPHDATABORDERSWIDTH",c,a,n,void 0,b.inGraphDataBordersWidth,f,-1,{nullValue:!0}),setOptionValue(c.chartSpaceScale,"INGRAPHDATABORDERSXSPACE",c,a,n,void 0,b.inGraphDataBordersXSpace,f,-1,{nullValue:!0}),setOptionValue(c.chartSpaceScale,"INGRAPHDATABORDERSYSPACE",c,a,n,void 0,b.inGraphDataBordersYSpace,f,-1,{nullValue:!0}),setOptionValue(1,"INGRAPHDATABORDERSSTYLE",c,a,n,void 0,b.inGraphDataBordersStyle,f,-1,{nullValue:!0}),setOptionValue(1,"INGRAPHDATABACKGROUNDCOLOR",c,a,n,void 0,b.inGraphDataBackgroundColor,f,-1,{nullValue:!0}),"INGRAPHDATA"),c.fillTextMultiLine(v,0,0,c.textBaseline,setOptionValue(c.chartTextScale,"INGRAPHDATAFONTSIZE",c,a,n,void 0,b.inGraphDataFontSize,f,-1,{nullValue:!0}),!0,b.detectMouseOnText,c,"INGRAPHDATA_TEXTMOUSE",u,s,t,f,h),c.restore()}k.legendMsr.dispLegend&&drawLegend(k.legendMsr,a,b,c,"Radar")}function s(){var g=2*Math.PI/a.datasets[0].data.length;if(c.save(),c.translate(l,m),c.rotate((90-b.startAngle)*Math.PI/180),b.angleShowLineOut){c.strokeStyle=b.angleLineColor,c.lineWidth=Math.ceil(c.chartLineScale*b.angleLineWidth);for(var h=0;h<a.datasets[0].data.length;h++)c.rotate(g),c.beginPath(),c.moveTo(0,0),c.lineTo(0,-d),c.setLineDash(lineStyleFn(setOptionValue(1,"ANGLELINESTYLE",c,a,n,void 0,b.angleLineStyle,h,-1,{nullValue:!0}))),c.stroke(),c.setLineDash([])}for(var i=0;i<f.steps;i++)if(c.beginPath(),b.scaleShowLine&&(i+1)%b.scaleGridLinesStep==0){c.strokeStyle=b.scaleLineColor,c.lineWidth=Math.ceil(c.chartLineScale*b.scaleLineWidth),c.moveTo(0,-e*(i+1));for(var j=0;j<a.datasets[0].data.length;j++)c.rotate(g),c.lineTo(0,-e*(i+1));c.closePath(),c.setLineDash(lineStyleFn(b.scaleLineStyle)),c.stroke(),c.setLineDash([])}if(c.rotate(-(90-b.startAngle)*Math.PI/180),b.scaleShowLabels)for(i=0;i<f.steps;i++){if(c.textAlign="center",c.font=b.scaleFontStyle+" "+Math.ceil(c.chartTextScale*b.scaleFontSize).toString()+"px "+b.scaleFontFamily,c.textBaseline="middle",b.scaleShowLabelBackdrop){var k=c.measureTextMultiLine(f.labels[i+1],Math.ceil(c.chartTextScale*b.scaleFontSize)).textWidth;c.fillStyle=b.scaleBackdropColor,c.beginPath(),c.rect(Math.round(Math.cos(b.startAngle*Math.PI/180)*(e*(i+1))-k/2-Math.ceil(c.chartSpaceScale*b.scaleBackdropPaddingX)),Math.round(-Math.sin(b.startAngle*Math.PI/180)*e*(i+1)-.5*Math.ceil(c.chartTextScale*b.scaleFontSize)-Math.ceil(c.chartSpaceScale*b.scaleBackdropPaddingY)),Math.round(k+2*Math.ceil(c.chartSpaceScale*b.scaleBackdropPaddingX)),Math.round(Math.ceil(c.chartTextScale*b.scaleFontSize)+2*Math.ceil(c.chartSpaceScale*b.scaleBackdropPaddingY))),c.fill()}c.fillStyle=b.scaleFontColor,c.fillTextMultiLine(f.labels[i+1],Math.cos(b.startAngle*Math.PI/180)*(e*(i+1)),-Math.sin(b.startAngle*Math.PI/180)*e*(i+1),c.textBaseline,Math.ceil(c.chartTextScale*b.scaleFontSize),!0,b.detectMouseOnText,c,"SCALE_TEXTMOUSE",0,l,m,i,-1)}for(var o=0;o<a.labels.length;o++){c.font=b.pointLabelFontStyle+" "+Math.ceil(c.chartTextScale*b.pointLabelFontSize).toString()+"px "+b.pointLabelFontFamily,c.fillStyle=b.pointLabelFontColor;for(var p=Math.sin((90-b.startAngle)*Math.PI/180+g*o)*(d+Math.ceil(c.chartTextScale*b.pointLabelFontSize)),q=Math.cos((90-b.startAngle)*Math.PI/180+g*o)*(d+Math.ceil(c.chartTextScale*b.pointLabelFontSize)),r=(90-b.startAngle)*Math.PI/180+g*o;r<0;)r+=2*Math.PI;for(;r>2*Math.PI;)r-=2*Math.PI;r==Math.PI||0==r?c.textAlign="center":r>Math.PI?c.textAlign="right":c.textAlign="left",c.textBaseline="middle",c.fillTextMultiLine(a.labels[o],p,-q,c.textBaseline,Math.ceil(c.chartTextScale*b.pointLabelFontSize),!0,b.detectMouseOnText,c,"LABEL_TEXTMOUSE",0,l,m,o,-1)}c.restore()}function t(){var e,f,h,i,j,m,n,p,q,r=2*Math.PI/a.datasets[0].data.length,s=b.startAngle*Math.PI/180;if(c.font=b.pointLabelFontStyle+" "+Math.ceil(c.chartTextScale*b.pointLabelFontSize).toString()+"px "+b.pointLabelFontFamily,b.graphMaximized)for(i=k.availableWidth/2,h=k.availableWidth/2,m=40,p=0;p<a.labels.length;p++)q=c.measureTextMultiLine(a.labels[p],Math.ceil(c.chartTextScale*b.scaleFontSize)).textWidth+c.measureTextMultiLine(a.labels[p],Math.ceil(c.chartTextScale*b.scaleFontSize)).textHeight,f=(k.availableWidth-q)/(1+Math.abs(Math.cos(s))),s<Math.PI/2&&s>-Math.PI/2||s>3*Math.PI/2?f<i&&(i=f):0!=Math.cos(s)&&f<h&&(h=f),s-=r;else i=k.availableWidth/2,h=k.availableWidth/2,m=1;for(n=0,0,l=i+k.leftNotUsableSize,e=i,j=0;j<m;++j,e+=(k.availableWidth-h-i)/m){for(d=Max([e,k.availableWidth-e]),s=b.startAngle*Math.PI/180,f=k.available,p=0;p<a.labels.length;p++)q=c.measureTextMultiLine(a.labels[p],Math.ceil(c.chartTextScale*b.scaleFontSize)).textWidth+c.measureTextMultiLine(a.labels[p],Math.ceil(c.chartTextScale*b.scaleFontSize)).textHeight,s<Math.PI/2&&s>-Math.PI/2||s>3*Math.PI/2?f=(k.availableWidth-e-q)/Math.abs(Math.cos(s)):Math.cos(0!=s)&&(f=(e-q)/Math.abs(Math.cos(s))),f<d&&(d=f),Math.sin(s)*k.availableHeight/2>k.availableHeight/2-2*Math.ceil(c.chartTextScale*b.scaleFontSize)&&(f=Math.sin(s)*k.availableHeight/2-1.5*Math.ceil(c.chartTextScale*b.scaleFontSize))<d&&(d=f),s-=r;d>n&&(n=d,l=e+k.leftNotUsableSize)}d=n-Math.ceil(c.chartTextScale*b.scaleFontSize)/2,g=Default(g,5)}function u(){for(var d=-Number.MAX_VALUE,e=Number.MAX_VALUE,f=0;f<a.datasets.length;f++)for(var i=0;i<a.datasets[f].data.length;i++)void 0!==a.datasets[f].data[i]&&(1*a.datasets[f].data[i]>d&&(d=1*a.datasets[f].data[i]),1*a.datasets[f].data[i]<e&&(e=1*a.datasets[f].data[i]));d<e&&(d=0,e=0),Math.abs(d-e)<b.zeroValue&&(Math.abs(d)<b.zeroValue&&(d=.9,e=-.9),d>0?(d*=1.1,e*=.9):(d*=.9,e*=1.1)),"function"==typeof b.graphMin?e=setOptionValue(1,"GRAPHMIN",c,a,n,void 0,b.graphMin,-1,-1,{nullValue:!0}):isNaN(b.graphMin)||(e=b.graphMin),"function"==typeof b.graphMax?d=setOptionValue(1,"GRAPHMAX",c,a,n,void 0,b.graphMax,-1,-1,{nullValue:!0}):isNaN(b.graphMax)||(d=b.graphMax);var j=Math.floor(h/(.66*g)),k=Math.floor(h/g*.5);return d<e&&(e=d-1),{maxValue:d,minValue:e,maxSteps:j,minSteps:k}}var d,e,f,g,h,i,j,k,l,m;if(c.tpchart="Radar",c.tpdata=0,init_and_start(c,a,b)){var n=initPassVariableData_part1(a,b,c);if(i=u(),b.logarithmic=!1,b.logarithmic2=!1,a.labels||(a.labels=[]),j=b.scaleShowLabels?b.scaleLabel:"",b.scaleOverride){var o=setOptionValue(1,"SCALESTARTVALUE",c,a,n,void 0,b.scaleStartValue,-1,-1,{nullValue:!0}),p=setOptionValue(1,"SCALESTEPS",c,a,n,void 0,b.scaleSteps,-1,-1,{nullValue:!0}),q=setOptionValue(1,"SCALESTEPWIDTH",c,a,n,void 0,b.scaleStepWidth,-1,-1,{nullValue:!0});f={steps:p,stepValue:q,graphMin:o,graphMax:o+p*q,labels:[]},populateLabels(1,b,j,f.labels,f.steps,o,f.graphMax,q),k=setMeasures(a,b,c,height,width,f.labels,null,!0,!1,!1,!0,b.datasetFill,"Radar")}else f=calculateScale(1,b,i.maxSteps,i.minSteps,i.maxValue,i.minValue,j),k=setMeasures(a,b,c,height,width,f.labels,null,!0,!1,!1,!0,b.datasetFill,"Radar");t(),m=k.topNotUsableSize+k.availableHeight/2,e=d/f.steps,initPassVariableData_part2(n,a,b,c,{midPosX:l,midPosY:m,calculatedScale:f,scaleHop:e,maxSize:d}),animationLoop(b,s,r,c,k.clrx,k.clry,k.clrwidth,k.clrheight,l,m,l-d,m+d,a,n)}},Pie=function(a,b,c){return c.tpchart="Pie",Doughnut(a,b,c)},Doughnut=function(a,b,c){function l(i){for(var l=(b.startAngle,Math.PI,Math.PI,Math.PI,Math.PI,Math.PI,0);l<a.length;l++){var m=1,n=1;if(b.animation&&(b.animateScale&&(m=i),b.animateRotate&&(n=i)),correctedRotateAnimation=animationCorrection(n,a,b,l,-1,0).mainVal,void 0!==a[l].value&&1*a[l].value>=0){if(c.beginPath(),"ByArc"==b.animationByData)endAngle=h[l].startAngle+correctedRotateAnimation*h[l].segmentAngle,c.arc(e,f,m*g,h[l].startAngle,endAngle,!1),c.arc(e,f,m*k,endAngle,h[l].startAngle,!0);else if(b.animationByData){if(!(h[l].startAngle-h[l].firstAngle<2*correctedRotateAnimation*Math.PI))continue;endAngle=h[l].endAngle,h[l].endAngle-h[l].firstAngle>2*correctedRotateAnimation*Math.PI&&(endAngle=h[l].firstAngle+2*correctedRotateAnimation*Math.PI),c.arc(e,f,m*g,h[l].startAngle,endAngle,!1),c.arc(e,f,m*k,endAngle,h[l].startAngle,!0)}else c.arc(e,f,m*g,h[l].firstAngle+correctedRotateAnimation*(h[l].startAngle-h[l].firstAngle),h[l].firstAngle+correctedRotateAnimation*(h[l].endAngle-h[l].firstAngle),!1),c.arc(e,f,m*k,h[l].firstAngle+correctedRotateAnimation*(h[l].endAngle-h[l].firstAngle),h[l].firstAngle+correctedRotateAnimation*(h[l].startAngle-h[l].firstAngle),!0);c.closePath(),c.fillStyle=setOptionValue(1,"COLOR",c,a,h,a[l].color,b.defaultFillColor,l,-1,{animationDecimal:i,scaleAnimation:m}),c.fill(),b.segmentShowStroke&&(c.lineWidth=Math.ceil(c.chartLineScale*b.segmentStrokeWidth),c.strokeStyle=b.segmentStrokeColor,c.setLineDash(lineStyleFn(setOptionValue(1,"SEGMENTSTROKESTYLE",c,a,h,a[l].segmentStrokeStyle,b.segmentStrokeStyle,l,-1,{animationDecimal:i,scaleAnimation:m}))),c.stroke(),c.setLineDash([]))}}if(i>=b.animationStopValue)for(l=0;l<a.length;l++)if(!(void 0===a[l].value||1*a[l].value<0)&&(jsGraphAnnotate[c.ChartNewId][jsGraphAnnotate[c.ChartNewId].length]=["ARC",l,-1,h,setOptionValue(1,"ANNOTATEDISPLAY",c,a,h,void 0,b.annotateDisplay,l,-1,{nullValue:!0})],setOptionValue(1,"INGRAPHDATASHOW",c,a,h,void 0,b.inGraphDataShow,l,-1,{nullValue:!0})&&h[l].segmentAngle>=Math.PI/180*setOptionValue(1,"INGRAPHDATAMINIMUMANGLE",c,a,h,void 0,b.inGraphDataMinimumAngle,l,-1,{nullValue:!0}))){1==setOptionValue(1,"INGRAPHDATAANGLEPOSITION",c,a,h,void 0,b.inGraphDataAnglePosition,l,-1,{nullValue:!0})?posAngle=h[l].realStartAngle+setOptionValue(1,"INGRAPHDATAPADDINANGLE",c,a,h,void 0,b.inGraphDataPaddingAngle,l,-1,{nullValue:!0})*(Math.PI/180):2==setOptionValue(1,"INGRAPHDATAANGLEPOSITION",c,a,h,void 0,b.inGraphDataAnglePosition,l,-1,{nullValue:!0})?posAngle=h[l].realStartAngle-h[l].segmentAngle/2+setOptionValue(1,"INGRAPHDATAPADDINANGLE",c,a,h,void 0,b.inGraphDataPaddingAngle,l,-1,{nullValue:!0})*(Math.PI/180):3==setOptionValue(1,"INGRAPHDATAANGLEPOSITION",c,a,h,void 0,b.inGraphDataAnglePosition,l,-1,{nullValue:!0})&&(posAngle=h[l].realStartAngle-h[l].segmentAngle+setOptionValue(1,"INGRAPHDATAPADDINANGLE",c,a,h,void 0,b.inGraphDataPaddingAngle,l,-1,{nullValue:!0})*(Math.PI/180)),1==setOptionValue(1,"INGRAPHDATARADIUSPOSITION",c,a,h,void 0,b.inGraphDataRadiusPosition,l,-1,{nullValue:!0})?labelRadius=k+setOptionValue(1,"INGRAPHDATAPADDINGRADIUS",c,a,h,void 0,b.inGraphDataPaddingRadius,l,-1,{nullValue:!0}):2==setOptionValue(1,"INGRAPHDATARADIUSPOSITION",c,a,h,void 0,b.inGraphDataRadiusPosition,l,-1,{nullValue:!0})?labelRadius=k+(g-k)/2+setOptionValue(1,"INGRAPHDATAPADDINGRADIUS",c,a,h,void 0,b.inGraphDataPaddingRadius,l,-1,{nullValue:!0}):3==setOptionValue(1,"INGRAPHDATARADIUSPOSITION",c,a,h,void 0,b.inGraphDataRadiusPosition,l,-1,{nullValue:!0})&&(labelRadius=g+setOptionValue(1,"INGRAPHDATAPADDINGRADIUS",c,a,h,void 0,b.inGraphDataPaddingRadius,l,-1,{nullValue:!0})),c.save(),"off-center"==setOptionValue(1,"INGRAPHDATAALIGN",c,a,h,void 0,b.inGraphDataAlign,l,-1,{nullValue:!0})?"inRadiusAxis"==setOptionValue(1,"INGRAPHDATAROTATE",c,a,h,void 0,b.inGraphDataRotate,l,-1,{nullValue:!0})||(posAngle+2*Math.PI)%(2*Math.PI)>3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<Math.PI/2?c.textAlign="left":c.textAlign="right":"to-center"==setOptionValue(1,"INGRAPHDATAALIGN",c,a,h,void 0,b.inGraphDataAlign,l,-1,{nullValue:!0})?"inRadiusAxis"==setOptionValue(1,"INGRAPHDATAROTATE",c,a,h,void 0,b.inGraphDataRotate,l,-1,{nullValue:!0})||(posAngle+2*Math.PI)%(2*Math.PI)>3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<Math.PI/2?c.textAlign="right":c.textAlign="left":c.textAlign=setOptionValue(1,"INGRAPHDATAALIGN",c,a,h,void 0,b.inGraphDataAlign,l,-1,{nullValue:!0}),"off-center"==setOptionValue(1,"INGRAPHDATAVALIGN",c,a,h,void 0,b.inGraphDataVAlign,l,-1,{nullValue:!0})?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI?c.textBaseline="top":c.textBaseline="bottom":"to-center"==setOptionValue(1,"INGRAPHDATAVALIGN",c,a,h,void 0,b.inGraphDataVAlign,l,-1,{nullValue:!0})?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI?c.textBaseline="bottom":c.textBaseline="top":c.textBaseline=setOptionValue(1,"INGRAPHDATAVALIGN",c,a,h,void 0,b.inGraphDataVAlign,l,-1,{nullValue:!0}),c.font=setOptionValue(1,"INGRAPHDATAFONTSTYLE",c,a,h,void 0,b.inGraphDataFontStyle,l,-1,{nullValue:!0})+" "+setOptionValue(c.chartTextScale,"INGRAPHDATAFONTSIZE",c,a,h,void 0,b.inGraphDataFontSize,l,-1,{nullValue:!0})+"px "+setOptionValue(1,"INGRAPHDATAFONTFAMILY",c,a,h,void 0,b.inGraphDataFontFamily,l,-1,{nullValue:!0}),c.fillStyle=setOptionValue(1,"INGRAPHDATAFONTCOLOR",c,a,h,void 0,b.inGraphDataFontColor,l,-1,{nullValue:!0});var o=tmplbis(setOptionValue(1,"INGRAPHDATATMPL",c,a,h,void 0,b.inGraphDataTmpl,l,-1,{nullValue:!0}),h[l],b);c.translate(e+labelRadius*Math.cos(posAngle),f-labelRadius*Math.sin(posAngle));var p=0;p="inRadiusAxis"==setOptionValue(1,"INGRAPHDATAROTATE",c,a,h,void 0,b.inGraphDataRotate,l,-1,{nullValue:!0})?2*Math.PI-posAngle:"inRadiusAxisRotateLabels"==setOptionValue(1,"INGRAPHDATAROTATE",c,a,h,void 0,b.inGraphDataRotate,l,-1,{nullValue:!0})?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI/2&&(posAngle+2*Math.PI)%(2*Math.PI)<3*Math.PI/2?3*Math.PI-posAngle:2*Math.PI-posAngle:setOptionValue(1,"INGRAPHDATAROTATE",c,a,h,void 0,b.inGraphDataRotate,l,-1,{nullValue:!0})*(Math.PI/180),c.rotate(p),setTextBordersAndBackground(c,o,setOptionValue(c.chartTextScale,"INGRAPHDATAFONTSIZE",c,a,h,void 0,b.inGraphDataFontSize,l,-1,{nullValue:!0}),0,0,setOptionValue(1,"INGRAPHDATABORDERS",c,a,h,void 0,b.inGraphDataBorders,l,-1,{nullValue:!0}),setOptionValue(1,"INGRAPHDATABORDERSCOLOR",c,a,h,void 0,b.inGraphDataBordersColor,l,-1,{nullValue:!0}),setOptionValue(c.chartLineScale,"INGRAPHDATABORDERSWIDTH",c,a,h,void 0,b.inGraphDataBordersWidth,l,-1,{nullValue:!0}),setOptionValue(c.chartSpaceScale,"INGRAPHDATABORDERSXSPACE",c,a,h,void 0,b.inGraphDataBordersXSpace,l,-1,{nullValue:!0}),setOptionValue(c.chartSpaceScale,"INGRAPHDATABORDERSYSPACE",c,a,h,void 0,b.inGraphDataBordersYSpace,l,-1,{nullValue:!0}),setOptionValue(1,"INGRAPHDATABORDERSSTYLE",c,a,h,void 0,b.inGraphDataBordersStyle,l,-1,{nullValue:!0}),setOptionValue(1,"INGRAPHDATABACKGROUNDCOLOR",c,a,h,void 0,b.inGraphDataBackgroundColor,l,-1,{nullValue:!0}),"INGRAPHDATA"),c.fillTextMultiLine(o,0,0,c.textBaseline,setOptionValue(c.chartTextScale,"INGRAPHDATAFONTSIZE",c,a,h,void 0,b.inGraphDataFontSize,l,-1,{nullValue:!0}),!0,b.detectMouseOnText,c,"INGRAPHDATA_TEXTMOUSE",p,e+labelRadius*Math.cos(posAngle),f-labelRadius*Math.sin(posAngle),l,-1),c.restore()}d.legendMsr.dispLegend&&drawLegend(d.legendMsr,a,b,c,"Doughnut")}var d,e,f,g;if(void 0===c.tpchart&&(c.tpchart="Doughnut"),c.tpdata=1,init_and_start(c,a,b)){var h=initPassVariableData_part1(a,b,c);b.startAngle,Math.PI,Math.PI,Math.PI,Math.PI,Math.PI;b.logarithmic=!1,b.logarithmic2=!1,d=setMeasures(a,b,c,height,width,"none",null,!0,!1,!1,!1,!0,"Doughnut");var j=calculatePieDrawingSize(c,d,b,a,h);e=j.midPieX,f=j.midPieY,g=j.radius;var k;k="Pie"==c.tpchart?0:g*(b.percentageInnerCutout/100),g>0?(initPassVariableData_part2(h,a,b,c,{midPosX:e,midPosY:f,int_radius:k,ext_radius:g}),animationLoop(b,null,l,c,d.clrx,d.clry,d.clrwidth,d.clrheight,e,f,e-g,f+g,a,h)):testRedraw(c,a,b)}},Line=function(data,config,ctx){function drawLines(a){drawLinesDataset(a,data,config,ctx,statData,{xAxisPosY:xAxisPosY,yAxisPosX:yAxisPosX,valueHop:valueHop,nbValueHop:data.labels.length-1}),a>=1&&"function"==typeof drawMath&&drawMath(ctx,config,data,msr,{xAxisPosY:xAxisPosY,yAxisPosX:yAxisPosX,valueHop:valueHop,scaleHop:scaleHop,zeroY:zeroY,calculatedScale:calculatedScale,calculateOffset:calculateOffset,statData:statData}),msr.legendMsr.dispLegend&&drawLegend(msr.legendMsr,data,config,ctx,"Line")}function drawScale(){if(!1!==config.drawXScaleLine)for(var a=0;a<config.drawXScaleLine.length;a++){ctx.lineWidth=config.drawXScaleLine[a].lineWidth?config.drawXScaleLine[a].lineWidth:Math.ceil(ctx.chartLineScale*config.scaleLineWidth),ctx.strokeStyle=config.drawXScaleLine[a].lineColor?config.drawXScaleLine[a].lineColor:config.scaleLineColor,ctx.beginPath();var b;switch(config.drawXScaleLine[a].position){case"bottom":b=xAxisPosY;break;case"top":b=xAxisPosY-msr.availableHeight-Math.ceil(ctx.chartLineScale*config.scaleTickSizeTop);break;case"0":case 0:0!=zeroY&&(b=xAxisPosY-zeroY)}ctx.moveTo(yAxisPosX-Math.ceil(ctx.chartLineScale*config.scaleTickSizeLeft),b),ctx.lineTo(yAxisPosX+msr.availableWidth+Math.ceil(ctx.chartLineScale*config.scaleTickSizeRight),b),ctx.setLineDash(lineStyleFn(config.scaleLineStyle)),ctx.stroke(),ctx.setLineDash([])}for(var c=0;c<data.labels.length;c++)ctx.beginPath(),ctx.moveTo(yAxisPosX+c*valueHop,xAxisPosY+Math.ceil(ctx.chartLineScale*config.scaleTickSizeBottom)),ctx.lineWidth=Math.ceil(ctx.chartLineScale*config.scaleGridLineWidth),ctx.strokeStyle=config.scaleGridLineColor,config.scaleShowGridLines&&c>0&&c%config.scaleXGridLinesStep==0?ctx.lineTo(yAxisPosX+c*valueHop,xAxisPosY-msr.availableHeight-Math.ceil(ctx.chartLineScale*config.scaleTickSizeTop)):ctx.lineTo(yAxisPosX+c*valueHop,xAxisPosY),ctx.setLineDash(lineStyleFn(config.scaleGridLineStyle)),ctx.stroke(),ctx.setLineDash([]);ctx.lineWidth=Math.ceil(ctx.chartLineScale*config.scaleLineWidth),ctx.strokeStyle=config.scaleLineColor,ctx.beginPath(),ctx.moveTo(yAxisPosX,xAxisPosY+Math.ceil(ctx.chartLineScale*config.scaleTickSizeBottom)),ctx.lineTo(yAxisPosX,xAxisPosY-msr.availableHeight-Math.ceil(ctx.chartLineScale*config.scaleTickSizeTop)),ctx.setLineDash(lineStyleFn(config.scaleLineStyle)),ctx.stroke(),ctx.setLineDash([]);for(var d=0;d<calculatedScale.steps;d++)ctx.beginPath(),ctx.moveTo(yAxisPosX-Math.ceil(ctx.chartLineScale*config.scaleTickSizeLeft),xAxisPosY-(d+1)*scaleHop),ctx.lineWidth=Math.ceil(ctx.chartLineScale*config.scaleGridLineWidth),ctx.strokeStyle=config.scaleGridLineColor,config.scaleShowGridLines&&(d+1)%config.scaleYGridLinesStep==0?ctx.lineTo(yAxisPosX+msr.availableWidth+Math.ceil(ctx.chartLineScale*config.scaleTickSizeRight),xAxisPosY-(d+1)*scaleHop):ctx.lineTo(yAxisPosX,xAxisPosY-(d+1)*scaleHop),ctx.setLineDash(lineStyleFn(config.scaleGridLineStyle)),ctx.stroke(),ctx.setLineDash([])}function drawLabels(){if(ctx.font=config.scaleFontStyle+" "+Math.ceil(ctx.chartTextScale*config.scaleFontSize).toString()+"px "+config.scaleFontFamily,(config.xAxisTop||config.xAxisBottom)&&(ctx.textBaseline="top",msr.rotateLabels>90?(ctx.save(),ctx.textAlign="left"):msr.rotateLabels>0?(ctx.save(),ctx.textAlign="right"):ctx.textAlign="center",ctx.fillStyle=config.scaleFontColor,config.xAxisBottom))for(var a=0;a<data.labels.length;a++)showLabels(ctx,data,config,a)&&(ctx.save(),msr.rotateLabels>0?(ctx.translate(yAxisPosX+a*valueHop-msr.highestXLabel/2,msr.xLabelPos),ctx.rotate(-msr.rotateLabels*(Math.PI/180)),ctx.fillTextMultiLine(fmtChartJS(config,data.labels[a],config.fmtXLabel),0,0,ctx.textBaseline,Math.ceil(ctx.chartTextScale*config.scaleFontSize),!0,config.detectMouseOnText,ctx,"XSCALE_TEXTMOUSE",-msr.rotateLabels*(Math.PI/180),yAxisPosX+a*valueHop-msr.highestXLabel/2,msr.xLabelPos,a,-1)):ctx.fillTextMultiLine(fmtChartJS(config,data.labels[a],config.fmtXLabel),yAxisPosX+a*valueHop,msr.xLabelPos,ctx.textBaseline,Math.ceil(ctx.chartTextScale*config.scaleFontSize),!0,config.detectMouseOnText,ctx,"XSCALE_TEXTMOUSE",0,0,0,a,-1),ctx.restore());ctx.textAlign="right",ctx.textBaseline="middle";for(var b=config.showYAxisMin?-1:0;b<calculatedScale.steps;b++)config.scaleShowLabels&&showYLabels(ctx,data,config,b+1,calculatedScale.labels[b+1])&&(config.yAxisLeft&&(ctx.textAlign="right",ctx.fillTextMultiLine(calculatedScale.labels[b+1],yAxisPosX-(Math.ceil(ctx.chartLineScale*config.scaleTickSizeLeft)+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceRight)),xAxisPosY-(b+1)*scaleHop,ctx.textBaseline,Math.ceil(ctx.chartTextScale*config.scaleFontSize),!0,config.detectMouseOnText,ctx,"YLEFTAXIS_TEXTMOUSE",0,0,0,-1,b)),config.yAxisRight&&!valueBounds.dbAxis&&(ctx.textAlign="left",ctx.fillTextMultiLine(calculatedScale.labels[b+1],yAxisPosX+msr.availableWidth+(Math.ceil(ctx.chartLineScale*config.scaleTickSizeRight)+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceRight)),xAxisPosY-(b+1)*scaleHop,ctx.textBaseline,Math.ceil(ctx.chartTextScale*config.scaleFontSize),!0,config.detectMouseOnText,ctx,"YRIGHTAXIS_TEXTMOUSE",0,0,0,-1,b)));if(config.yAxisRight&&valueBounds.dbAxis)for(b=config.showYAxisMin?-1:0;b<calculatedScale2.steps;b++)config.scaleShowLabels&&(ctx.textAlign="left",ctx.fillTextMultiLine(calculatedScale2.labels[b+1],yAxisPosX+msr.availableWidth+(Math.ceil(ctx.chartLineScale*config.scaleTickSizeRight)+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceRight)),xAxisPosY-(b+1)*scaleHop2,ctx.textBaseline,Math.ceil(ctx.chartTextScale*config.scaleFontSize),!0,config.detectMouseOnText,ctx,"YRIGHTAXIS_TEXTMOUSE",0,0,0,-1,b))}function getValueBounds(){for(var upperValue=-Number.MAX_VALUE,lowerValue=Number.MAX_VALUE,upperValue2=-Number.MAX_VALUE,lowerValue2=Number.MAX_VALUE,secondAxis=!1,firstAxis=!1,mathValueHeight,i=0;i<data.datasets.length;i++){var mathFctName=data.datasets[i].drawMathDeviation,mathValueHeight=0;if("function"==typeof eval(mathFctName)){var parameter={data:data,datasetNr:i};mathValueHeightVal=window[mathFctName](parameter)}else mathValueHeightVal=0;for(var j=0;j<data.datasets[i].data.length;j++)mathValueHeight="object"==typeof mathValueHeightVal?mathValueHeightVal[Math.min(mathValueHeightVal.length,j)]:mathValueHeightVal,void 0!==data.datasets[i].data[j]&&(2==data.datasets[i].axis?(secondAxis=!0,1*data.datasets[i].data[j]+mathValueHeight>upperValue2&&(upperValue2=1*data.datasets[i].data[j]+mathValueHeight),1*data.datasets[i].data[j]-mathValueHeight<lowerValue2&&(lowerValue2=1*data.datasets[i].data[j]-mathValueHeight)):(firstAxis=!0,1*data.datasets[i].data[j]+mathValueHeight>upperValue&&(upperValue=1*data.datasets[i].data[j]+mathValueHeight),1*data.datasets[i].data[j]-mathValueHeight<lowerValue&&(lowerValue=1*data.datasets[i].data[j]-mathValueHeight)))}upperValue<lowerValue&&(upperValue=0,lowerValue=0),Math.abs(upperValue-lowerValue)<config.zeroValue&&(Math.abs(upperValue)<config.zeroValue&&(upperValue=.9),upperValue>0?(upperValue*=1.1,lowerValue*=.9):(upperValue*=.9,lowerValue*=1.1)),"function"==typeof config.graphMin?lowerValue=setOptionValue(1,"GRAPHMIN",ctx,data,statData,void 0,config.graphMin,-1,-1,{nullValue:!0}):isNaN(config.graphMin)||(lowerValue=config.graphMin),"function"==typeof config.graphMax?upperValue=setOptionValue(1,"GRAPHMAX",ctx,data,statData,void 0,config.graphMax,-1,-1,{nullValue:!0}):isNaN(config.graphMax)||(upperValue=config.graphMax),secondAxis&&(upperValue2<lowerValue2&&(upperValue2=0,lowerValue2=0),Math.abs(upperValue2-lowerValue2)<config.zeroValue&&(Math.abs(upperValue2)<config.zeroValue&&(upperValue2=.9),upperValue2>0?(upperValue2*=1.1,lowerValue2*=.9):(upperValue2*=.9,lowerValue2*=1.1)),"function"==typeof config.graphMin2?lowerValue2=setOptionValue(1,"GRAPHMIN",ctx,data,statData,void 0,config.graphMin2,-1,-1,{nullValue:!0}):isNaN(config.graphMin2)||(lowerValue2=config.graphMin2),"function"==typeof config.graphMax2?upperValue2=setOptionValue(1,"GRAPHMAX",ctx,data,statData,void 0,config.graphMax2,-1,-1,{nullValue:!0}):isNaN(config.graphMax2)||(upperValue2=config.graphMax2)),!firstAxis&&secondAxis&&(upperValue=upperValue2,lowerValue=lowerValue2),labelHeight=Math.ceil(ctx.chartTextScale*config.scaleFontSize),scaleHeight=msr.availableHeight;var maxSteps=Math.floor(scaleHeight/(.66*labelHeight)),minSteps=Math.floor(scaleHeight/labelHeight*.5);return upperValue<lowerValue&&(lowerValue=upperValue-1),upperValue2<lowerValue2&&(lowerValue2=upperValue2-1),{maxValue:upperValue,minValue:lowerValue,maxValue2:upperValue2,minValue2:lowerValue2,dbAxis:secondAxis,maxSteps:maxSteps,minSteps:minSteps}}var maxSize,scaleHop,scaleHop2,calculatedScale,calculatedScale2,labelHeight,scaleHeight,valueBounds,labelTemplateString,labelTemplateString2,valueHop,widestXLabel,xAxisLength,yAxisPosX,xAxisPosY,rotateLabels=0,msr,zeroY=0,zeroY2=0;if(ctx.tpchart="Line",ctx.tpdata=0,init_and_start(ctx,data,config)){for(var mxlgt=0,i=0;i<data.datasets.length;i++)mxlgt=Max([mxlgt,data.datasets[i].data.length]);if(1==mxlgt){for("string"==typeof data.labels[0]&&(data.labels=["",data.labels[0],""]),i=0;i<data.datasets.length;i++)data.datasets[i].data[0],data.datasets[i].data=[void 0,data.datasets[i].data[0],void 0];mxlgt=3}var statData=initPassVariableData_part1(data,config,ctx);for(i=0;i<data.datasets.length;i++)statData[i][0].tpchart="Line";msr=setMeasures(data,config,ctx,height,width,"nihil",[""],!1,!1,!0,!0,config.datasetFill,"Line"),valueBounds=getValueBounds(),!1!==config.logarithmic&&valueBounds.minValue<=0&&(config.logarithmic=!1),!1!==config.logarithmic2&&valueBounds.minValue2<=0&&(config.logarithmic2=!1);var OrderOfMagnitude=calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.maxValue)+1))-calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.minValue)));("fuzzy"==config.logarithmic&&OrderOfMagnitude<4||config.scaleOverride)&&(config.logarithmic=!1);var OrderOfMagnitude2=calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.maxValue2)+1))-calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.minValue2)));if(("fuzzy"==config.logarithmic2&&OrderOfMagnitude2<4||config.scaleOverride2)&&(config.logarithmic2=!1),labelTemplateString=config.scaleShowLabels?config.scaleLabel:"",labelTemplateString2=config.scaleShowLabels2?config.scaleLabel2:"",config.scaleOverride){var scaleStartValue=setOptionValue(1,"SCALESTARTVALUE",ctx,data,statData,void 0,config.scaleStartValue,-1,-1,{nullValue:!0}),scaleSteps=setOptionValue(1,"SCALESTEPS",ctx,data,statData,void 0,config.scaleSteps,-1,-1,{nullValue:!0}),scaleStepWidth=setOptionValue(1,"SCALESTEPWIDTH",ctx,data,statData,void 0,config.scaleStepWidth,-1,-1,{nullValue:!0});calculatedScale={steps:scaleSteps,stepValue:scaleStepWidth,graphMin:scaleStartValue,graphMax:scaleStartValue+scaleSteps*scaleStepWidth,labels:[]},populateLabels(1,config,labelTemplateString,calculatedScale.labels,calculatedScale.steps,scaleStartValue,calculatedScale.graphMax,scaleStepWidth)}else valueBounds.maxSteps>0&&valueBounds.minSteps>0&&(calculatedScale=calculateScale(1,config,valueBounds.maxSteps,valueBounds.minSteps,valueBounds.maxValue,valueBounds.minValue,labelTemplateString));if(valueBounds.dbAxis)if(config.scaleOverride2){var scaleStartValue2=setOptionValue(1,"SCALESTARTVALUE2",ctx,data,statData,void 0,config.scaleStartValue2,-1,-1,{nullValue:!0}),scaleSteps2=setOptionValue(1,"SCALESTEPS2",ctx,data,statData,void 0,config.scaleSteps2,-1,-1,{nullValue:!0}),scaleStepWidth2=setOptionValue(1,"SCALESTEPWIDTH2",ctx,data,statData,void 0,config.scaleStepWidth2,-1,-1,{nullValue:!0});calculatedScale2={steps:scaleSteps2,stepValue:scaleStepWidth2,graphMin:scaleStartValue2,graphMax:scaleStartValue2+scaleSteps2*scaleStepWidth2,labels:[]},populateLabels(2,config,labelTemplateString2,calculatedScale2.labels,calculatedScale2.steps,scaleStartValue2,calculatedScale2.graphMax,scaleStepWidth2)}else valueBounds.maxSteps>0&&valueBounds.minSteps>0&&(calculatedScale2=calculateScale(2,config,valueBounds.maxSteps,valueBounds.minSteps,valueBounds.maxValue2,valueBounds.minValue2,labelTemplateString2));else calculatedScale2={steps:0,stepValue:0,graphMin:0,graphMax:0,labels:null};if(valueBounds.maxSteps>0&&valueBounds.minSteps>0){msr=setMeasures(data,config,ctx,height,width,calculatedScale.labels,calculatedScale2.labels,!1,!1,!0,!0,config.datasetFill,"Line");var prevHeight=msr.availableHeight;msr.availableHeight=msr.availableHeight-Math.ceil(ctx.chartLineScale*config.scaleTickSizeBottom)-Math.ceil(ctx.chartLineScale*config.scaleTickSizeTop),msr.availableWidth=msr.availableWidth-Math.ceil(ctx.chartLineScale*config.scaleTickSizeLeft)-Math.ceil(ctx.chartLineScale*config.scaleTickSizeRight),scaleHop=Math.floor(msr.availableHeight/calculatedScale.steps),scaleHop2=Math.floor(msr.availableHeight/calculatedScale2.steps),valueHop=Math.floor(msr.availableWidth/(data.labels.length-1)),(0==valueHop||config.fullWidthGraph)&&(valueHop=msr.availableWidth/(data.labels.length-1)),msr.clrwidth=msr.clrwidth-(msr.availableWidth-(data.labels.length-1)*valueHop),msr.availableWidth=(data.labels.length-1)*valueHop,msr.availableHeight=calculatedScale.steps*scaleHop,msr.xLabelPos+=Math.ceil(ctx.chartLineScale*config.scaleTickSizeBottom)+Math.ceil(ctx.chartLineScale*config.scaleTickSizeTop)-(prevHeight-msr.availableHeight),msr.clrheight+=Math.ceil(ctx.chartLineScale*config.scaleTickSizeBottom)+Math.ceil(ctx.chartLineScale*config.scaleTickSizeTop)-(prevHeight-msr.availableHeight),yAxisPosX=msr.leftNotUsableSize+Math.ceil(ctx.chartLineScale*config.scaleTickSizeLeft),xAxisPosY=msr.topNotUsableSize+msr.availableHeight+Math.ceil(ctx.chartLineScale*config.scaleTickSizeTop),drawLabels(),valueBounds.minValue<0&&(zeroY=calculateOffset(config.logarithmic,0,calculatedScale,scaleHop)),valueBounds.minValue2<0&&(zeroY2=calculateOffset(config.logarithmic2,0,calculatedScale2,scaleHop2)),initPassVariableData_part2(statData,data,config,ctx,{xAxisPosY:xAxisPosY,yAxisPosX:yAxisPosX,valueHop:valueHop,nbValueHop:data.labels.length-1,scaleHop:scaleHop,zeroY:zeroY,calculatedScale:calculatedScale,logarithmic:config.logarithmic,scaleHop2:scaleHop2,zeroY2:zeroY2,msr:msr,calculatedScale2:calculatedScale2,logarithmic2:config.logarithmic2}),animationLoop(config,drawScale,drawLines,ctx,msr.clrx,msr.clry,msr.clrwidth,msr.clrheight,yAxisPosX+msr.availableWidth/2,xAxisPosY-msr.availableHeight/2,yAxisPosX,xAxisPosY,data,statData)}else testRedraw(ctx,data,config)}},StackedBar=function(a,b,c){function C(d){c.lineWidth=Math.ceil(c.chartLineScale*b.barStrokeWidth);for(var e=0;e<a.datasets.length;e++)if("Line"!=a.datasets[e].type)for(var f=0;f<a.datasets[e].data.length;f++){var g=animationCorrection(d,a,b,e,f,1).animVal;if(g>1&&(g-=1),void 0!==a.datasets[e].data[f]&&1*a.datasets[e].data[f]!=0){var h,i;b.animationByDataset?(h=s[e][f].yPosBottom,i=s[e][f].yPosTop,i=h+g*(i-h)):(h=s[s[e][f].firstNotMissing][f].yPosBottom-g*(s[s[e][f].firstNotMissing][f].yPosBottom-s[e][f].yPosBottom),i=s[s[e][f].firstNotMissing][f].yPosBottom-g*(s[s[e][f].firstNotMissing][f].yPosBottom-s[e][f].yPosTop)),c.fillStyle=setOptionValue(1,"COLOR",c,a,s,a.datasets[e].fillColor,b.defaultFillColor,e,f,{animationValue:g,xPosLeft:s[e][f].xPosLeft,yPosBottom:h,xPosRight:s[e][f].xPosRight,yPosTop:i}),c.strokeStyle=setOptionValue(1,"STROKECOLOR",c,a,s,a.datasets[e].strokeColor,b.defaultStrokeColor,e,f,{nullvalue:null}),0!=g&&h!=i&&(c.beginPath(),c.moveTo(s[e][f].xPosLeft,h),c.lineTo(s[e][f].xPosLeft,i),c.lineTo(s[e][f].xPosRight,i),c.lineTo(s[e][f].xPosRight,h),b.barShowStroke&&(c.setLineDash(lineStyleFn(setOptionValue(1,"STROKESTYLE",c,a,s,a.datasets[e].datasetStrokeStyle,b.datasetStrokeStyle,e,f,{nullvalue:null}))),c.stroke(),c.setLineDash([])),c.closePath(),c.fill())}}if(drawLinesDataset(d,a,b,c,s,{xAxisPosY:o,yAxisPosX:n,valueHop:k,nbValueHop:a.labels.length}),d>=b.animationStopValue){var j=0,l=0;for(e=0;e<a.datasets.length;e++)for(f=0;f<a.datasets[e].data.length;f++)if(void 0!==a.datasets[e].data[f]&&(jsGraphAnnotate[c.ChartNewId][jsGraphAnnotate[c.ChartNewId].length]=["RECT",e,f,s,setOptionValue(1,"ANNOTATEDISPLAY",c,a,s,void 0,b.annotateDisplay,e,f,{nullValue:!0})],setOptionValue(1,"INGRAPHDATASHOW",c,a,s,void 0,b.inGraphDataShow,e,f,{nullValue:!0}))){c.save(),c.textAlign=setOptionValue(1,"INGRAPHDATAALIGN",c,a,s,void 0,b.inGraphDataAlign,e,f,{nullValue:!0}),c.textBaseline=setOptionValue(1,"INGRAPHDATAVALIGN",c,a,s,void 0,b.inGraphDataVAlign,e,f,{nullValue:!0}),c.font=setOptionValue(1,"INGRAPHDATAFONTSTYLE",c,a,s,void 0,b.inGraphDataFontStyle,e,f,{nullValue:!0})+" "+setOptionValue(c.chartTextScale,"INGRAPHDATAFONTSIZE",c,a,s,void 0,b.inGraphDataFontSize,e,f,{nullValue:!0})+"px "+setOptionValue(1,"INGRAPHDATAFONTFAMILY",c,a,s,void 0,b.inGraphDataFontFamily,e,f,{nullValue:!0}),c.fillStyle=setOptionValue(1,"INGRAPHDATAFONTCOLOR",c,a,s,void 0,b.inGraphDataFontColor,e,f,{nullValue:!0});var m=tmplbis(setOptionValue(1,"INGRAPHDATATMPL",c,a,s,void 0,b.inGraphDataTmpl,e,f,{nullValue:!0}),s[e][f],b);if(c.beginPath(),c.beginPath(),j=0,l=0,1==setOptionValue(1,"INGRAPHDATAXPOSITION",c,a,s,void 0,b.inGraphDataXPosition,e,f,{nullValue:!0})?l=s[e][f].xPosLeft+setOptionValue(c.chartSpaceScale,"INGRAPHDATAPADDINGX",c,a,s,void 0,b.inGraphDataPaddingX,e,f,{nullValue:!0}):2==setOptionValue(1,"INGRAPHDATAXPOSITION",c,a,s,void 0,b.inGraphDataXPosition,e,f,{nullValue:!0})?l=s[e][f].xPosLeft+p/2+setOptionValue(c.chartSpaceScale,"INGRAPHDATAPADDINGX",c,a,s,void 0,b.inGraphDataPaddingX,e,f,{nullValue:!0}):3==setOptionValue(1,"INGRAPHDATAXPOSITION",c,a,s,void 0,b.inGraphDataXPosition,e,f,{nullValue:!0})&&(l=s[e][f].xPosLeft+p+setOptionValue(c.chartSpaceScale,"INGRAPHDATAPADDINGX",c,a,s,void 0,b.inGraphDataPaddingX,e,f,{nullValue:!0})),1==setOptionValue(1,"INGRAPHDATAYPOSITION",c,a,s,void 0,b.inGraphDataYPosition,e,f,{nullValue:!0})?j=s[e][f].yPosBottom-setOptionValue(c.chartSpaceScale,"INGRAPHDATAPADDINGY",c,a,s,void 0,b.inGraphDataPaddingY,e,f,{nullValue:!0}):2==setOptionValue(1,"INGRAPHDATAYPOSITION",c,a,s,void 0,b.inGraphDataYPosition,e,f,{nullValue:!0})?j=(s[e][f].yPosTop+s[e][f].yPosBottom)/2-setOptionValue(c.chartSpaceScale,"INGRAPHDATAPADDINGY",c,a,s,void 0,b.inGraphDataPaddingY,e,f,{nullValue:!0}):3==setOptionValue(1,"INGRAPHDATAYPOSITION",c,a,s,void 0,b.inGraphDataYPosition,e,f,{nullValue:!0})&&(j=s[e][f].yPosTop-setOptionValue(c.chartSpaceScale,"INGRAPHDATAPADDINGY",c,a,s,void 0,b.inGraphDataPaddingY,e,f,{nullValue:!0})),j>r.topNotUsableSize){c.translate(l,j);var q=setOptionValue(1,"INGRAPHDATAROTATE",c,a,s,void 0,b.inGraphDataRotate,e,f,{nullValue:!0})*(Math.PI/180);c.rotate(q),setTextBordersAndBackground(c,m,setOptionValue(c.chartTextScale,"INGRAPHDATAFONTSIZE",c,a,s,void 0,b.inGraphDataFontSize,e,f,{nullValue:!0}),0,0,setOptionValue(1,"INGRAPHDATABORDERS",c,a,s,void 0,b.inGraphDataBorders,e,f,{nullValue:!0}),setOptionValue(1,"INGRAPHDATABORDERSCOLOR",c,a,s,void 0,b.inGraphDataBordersColor,e,f,{nullValue:!0}),setOptionValue(c.chartLineScale,"INGRAPHDATABORDERSWIDTH",c,a,s,void 0,b.inGraphDataBordersWidth,e,f,{nullValue:!0}),setOptionValue(c.chartSpaceScale,"INGRAPHDATABORDERSXSPACE",c,a,s,void 0,b.inGraphDataBordersXSpace,e,f,{nullValue:!0}),setOptionValue(c.chartSpaceScale,"INGRAPHDATABORDERSYSPACE",c,a,s,void 0,b.inGraphDataBordersYSpace,e,f,{nullValue:!0}),setOptionValue(1,"INGRAPHDATABORDERSSTYLE",c,a,s,void 0,b.inGraphDataBordersStyle,e,f,{nullValue:!0}),setOptionValue(1,"INGRAPHDATABACKGROUNDCOLOR",c,a,s,void 0,b.inGraphDataBackgroundColor,e,f,{nullValue:!0}),"INGRAPHDATA"),c.fillTextMultiLine(m,0,0,c.textBaseline,setOptionValue(c.chartTextScale,"INGRAPHDATAFONTSIZE",c,a,s,void 0,b.inGraphDataFontSize,e,f,{nullValue:!0}),!0,b.detectMouseOnText,c,"INGRAPHDATA_TEXTMOUSE",q,l,j,e,f)}c.restore()}}r.legendMsr.dispLegend&&drawLegend(r.legendMsr,a,b,c,"StackedBar")}function D(){c.lineWidth=Math.ceil(c.chartLineScale*b.scaleLineWidth),c.strokeStyle=b.scaleLineColor,c.setLineDash(lineStyleFn(b.scaleLineStyle)),c.beginPath(),c.moveTo(n-Math.ceil(c.chartLineScale*b.scaleTickSizeLeft),o),c.lineTo(n+r.availableWidth+Math.ceil(c.chartLineScale*b.scaleTickSizeRight),o),c.stroke(),c.setLineDash([]),c.setLineDash(lineStyleFn(b.scaleGridLineStyle));for(var d=0;d<a.labels.length;d++)c.beginPath(),c.moveTo(n+d*k,o+Math.ceil(c.chartLineScale*b.scaleTickSizeBottom)),c.lineWidth=Math.ceil(c.chartLineScale*b.scaleGridLineWidth),c.strokeStyle=b.scaleGridLineColor,b.scaleShowGridLines&&d>0&&d%b.scaleXGridLinesStep==0?c.lineTo(n+d*k,o-r.availableHeight-Math.ceil(c.chartLineScale*b.scaleTickSizeTop)):c.lineTo(n+d*k,o),c.stroke();c.setLineDash([]),c.lineWidth=Math.ceil(c.chartLineScale*b.scaleLineWidth),c.strokeStyle=b.scaleLineColor,c.setLineDash(lineStyleFn(b.scaleLineStyle)),c.beginPath(),c.moveTo(n,o+Math.ceil(c.chartLineScale*b.scaleTickSizeBottom)),c.lineTo(n,o-r.availableHeight-Math.ceil(c.chartLineScale*b.scaleTickSizeTop)),c.stroke(),c.setLineDash([]),c.setLineDash(lineStyleFn(b.scaleGridLineStyle));for(var g=b.showYAxisMin?-1:0;g<f.steps;g++)c.beginPath(),c.moveTo(n-Math.ceil(c.chartLineScale*b.scaleTickSizeLeft),o-(g+1)*e),c.lineWidth=Math.ceil(c.chartLineScale*b.scaleGridLineWidth),c.strokeStyle=b.scaleGridLineColor,b.scaleShowGridLines&&(g+1)%b.scaleYGridLinesStep==0?c.lineTo(n+r.availableWidth+Math.ceil(c.chartLineScale*b.scaleTickSizeRight),o-(g+1)*e):c.lineTo(n,o-(g+1)*e),c.stroke();c.setLineDash([])}function E(){if(c.font=b.scaleFontStyle+" "+Math.ceil(c.chartTextScale*b.scaleFontSize).toString()+"px "+b.scaleFontFamily,(b.xAxisTop||b.xAxisBottom)&&(c.textBaseline="top",r.rotateLabels>90?(c.save(),c.textAlign="left"):r.rotateLabels>0?(c.save(),c.textAlign="right"):c.textAlign="center",c.fillStyle=b.scaleFontColor,b.xAxisBottom))for(var d=0;d<a.labels.length;d++)showLabels(c,a,b,d)&&(c.save(),r.rotateLabels>0?(c.translate(n+Math.ceil(c.chartSpaceScale*b.barValueSpacing)+d*k+z+p/2-r.highestXLabel/2,r.xLabelPos),c.rotate(-r.rotateLabels*(Math.PI/180)),c.fillTextMultiLine(fmtChartJS(b,a.labels[d],b.fmtXLabel),0,0,c.textBaseline,Math.ceil(c.chartTextScale*b.scaleFontSize),!0,b.detectMouseOnText,c,"XAXIS_TEXTMOUSE",-r.rotateLabels*(Math.PI/180),n+Math.ceil(c.chartSpaceScale*b.barValueSpacing)+d*k+z+p/2-r.highestXLabel/2,r.xLabelPos,d,-1)):c.fillTextMultiLine(fmtChartJS(b,a.labels[d],b.fmtXLabel),n+Math.ceil(c.chartSpaceScale*b.barValueSpacing)+d*k+z+p/2,r.xLabelPos,c.textBaseline,Math.ceil(c.chartTextScale*b.scaleFontSize),!0,b.detectMouseOnText,c,"XAXIS_TEXTMOUSE",0,0,0,d,-1),c.restore());c.textAlign="right",c.textBaseline="middle";for(var g=b.showYAxisMin?-1:0;g<f.steps;g++)b.scaleShowLabels&&showYLabels(c,a,b,g+1,f.labels[g+1])&&(b.yAxisLeft&&(c.textAlign="right",c.fillTextMultiLine(f.labels[g+1],n-(Math.ceil(c.chartLineScale*b.scaleTickSizeLeft)+Math.ceil(c.chartSpaceScale*b.yAxisSpaceRight)),o-(g+1)*e,c.textBaseline,Math.ceil(c.chartTextScale*b.scaleFontSize),!0,b.detectMouseOnText,c,"YLEFTAXIS_TEXTMOUSE",0,0,0,-1,g)),b.yAxisRight&&(c.textAlign="left",c.fillTextMultiLine(f.labels[g+1],n+r.availableWidth+(Math.ceil(c.chartLineScale*b.scaleTickSizeRight)+Math.ceil(c.chartSpaceScale*b.yAxisSpaceRight)),o-(g+1)*e,c.textBaseline,Math.ceil(c.chartTextScale*b.scaleFontSize),!0,b.detectMouseOnText,c,"YRIGHTAXIS_TEXTMOUSE",0,0,0,-1,g)))}function F(){for(var d=-Number.MAX_VALUE,e=Number.MAX_VALUE,f=-Number.MAX_VALUE,i=Number.MAX_VALUE,j=[],k=[],l=0,m=0,n=0;n<a.datasets.length;n++)for(var o=0;o<a.datasets[n].data.length;o++)1*a.datasets[n].data[o]>0?("Bar"==s[n][0].tpchart?(void 0===j[o]&&(j[o]=0),j[o]+=1*a.datasets[n].data[o],d=Math.max(d,j[o])):d=Math.max(d,1*a.datasets[n].data[o]),e=Math.min(e,1*a.datasets[n].data[o]),l=1):"number"==typeof(1*a.datasets[n].data[o])&&void 0!==a.datasets[n].data[o]&&("Bar"==s[n][0].tpchart?(void 0===k[o]&&(k[o]=0),k[o]+=1*a.datasets[n].data[o],i=Math.min(i,k[o])):i=Math.min(i,1*a.datasets[n].data[o]),f=Math.max(f,1*a.datasets[n].data[o]),m=1);var p,q;0==l?(p=f,q=i):0==m?(p=d,q=e):(p=d,q=i),"function"==typeof b.graphMin?q=setOptionValue(1,"GRAPHMIN",c,a,s,void 0,b.graphMin,-1,-1,{nullValue:!0}):isNaN(b.graphMin)||(q=b.graphMin),"function"==typeof b.graphMax?p=setOptionValue(1,"GRAPHMAX",c,a,s,void 0,b.graphMax,-1,-1,{nullValue:!0}):isNaN(b.graphMax)||(p=b.graphMax),p<q&&(p=0,q=0),Math.abs(p-q)<b.zeroValue&&(Math.abs(p)<b.zeroValue&&(p=.9),p>0?(p*=1.1,q*=.9):(p*=.9,q*=1.1)),g=Math.ceil(c.chartTextScale*b.scaleFontSize),h=r.availableHeight;var t=Math.floor(h/(.66*g)),u=Math.floor(h/g*.5);return p<q&&(q=p-1),{maxValue:p,minValue:q,maxSteps:t,minSteps:u}}var e,f,g,h,i,j,k,n,o,p,r;if(c.tpchart="StackedBar",c.tpdata=0,init_and_start(c,a,b)){for(var s=initPassVariableData_part1(a,b,c),t=a.datasets.length,u=0;u<a.datasets.length;u++)"Line"==a.datasets[u].type?(s[u][0].tpchart="Line",t--):s[u][0].tpchart="Bar";if(b.logarithmic=!1,r=setMeasures(a,b,c,height,width,"nihil",[""],!0,!1,!0,!0,!0,"StackedBar"),i=F(),i.maxSteps>0&&i.minSteps>0){if(j=b.scaleShowLabels?b.scaleLabel:"",b.scaleOverride){var v=setOptionValue(1,"SCALESTARTVALUE",c,a,s,void 0,b.scaleStartValue,-1,-1,{nullValue:!0}),w=setOptionValue(1,"SCALESTEPS",c,a,s,void 0,b.scaleSteps,-1,-1,{nullValue:!0}),x=setOptionValue(1,"SCALESTEPWIDTH",c,a,s,void 0,b.scaleStepWidth,-1,-1,{nullValue:!0});f={steps:w,stepValue:x,graphMin:v,labels:[]};for(var u=0;u<=f.steps;u++)j&&f.labels.push(tmpl(j,{value:fmtChartJS(b,1*(v+x*u).toFixed(getDecimalPlaces(x)),b.fmtYLabel)},b));r=setMeasures(a,b,c,height,width,f.labels,null,!0,!1,!0,!0,!0,"StackedBar")}else f=calculateScale(1,b,i.maxSteps,i.minSteps,i.maxValue,i.minValue,j),r=setMeasures(a,b,c,height,width,f.labels,null,!0,!1,!0,!0,!0,"StackedBar");var y=r.availableHeight;r.availableHeight=r.availableHeight-Math.ceil(c.chartLineScale*b.scaleTickSizeBottom)-Math.ceil(c.chartLineScale*b.scaleTickSizeTop),r.availableWidth=r.availableWidth-Math.ceil(c.chartLineScale*b.scaleTickSizeLeft)-Math.ceil(c.chartLineScale*b.scaleTickSizeRight),e=Math.floor(r.availableHeight/f.steps),k=Math.floor(r.availableWidth/a.labels.length),(0==k||b.fullWidthGraph)&&(k=r.availableWidth/a.labels.length),r.clrwidth=r.clrwidth-(r.availableWidth-a.labels.length*k),r.availableWidth=a.labels.length*k,r.availableHeight=f.steps*e,r.xLabelPos+=Math.ceil(c.chartLineScale*b.scaleTickSizeBottom)+Math.ceil(c.chartLineScale*b.scaleTickSizeTop)-(y-r.availableHeight),r.clrheight+=Math.ceil(c.chartLineScale*b.scaleTickSizeBottom)+Math.ceil(c.chartLineScale*b.scaleTickSizeTop)-(y-r.availableHeight),n=r.leftNotUsableSize+Math.ceil(c.chartLineScale*b.scaleTickSizeLeft),o=r.topNotUsableSize+r.availableHeight+Math.ceil(c.chartLineScale*b.scaleTickSizeTop),p=k-2*Math.ceil(c.chartLineScale*b.scaleGridLineWidth)-2*Math.ceil(c.chartSpaceScale*b.barValueSpacing)-(1*Math.ceil(c.chartSpaceScale*b.barDatasetSpacing)-1)-Math.ceil(c.chartLineScale*b.barStrokeWidth)/2-1,p>=0&&p<=1&&(p=1),p<0&&p>=-1&&(p=-1);var z;1*b.maxBarWidth>0&&p>1*b.maxBarWidth?(z=(p-1*b.maxBarWidth)/2,p=1*b.maxBarWidth):z=0;var A=0,B=0;i.minValue<0&&(A=calculateOffset(!1,0,f,e)),i.minValue2<0&&(B=calculateOffset(b.logarithmic2,0,calculatedScale2,scaleHop2)),E(),initPassVariableData_part2(s,a,b,c,{msr:r,zeroY:A,zeroY2:B,logarithmic:!1,logarithmic2:!1,calculatedScale:f,additionalSpaceBetweenBars:z,scaleHop:e,valueHop:k,yAxisPosX:n,xAxisPosY:o,barWidth:p}),animationLoop(b,D,C,c,r.clrx,r.clry,r.clrwidth,r.clrheight,n+r.availableWidth/2,o-r.availableHeight/2,n,o,a,s)}else testRedraw(c,a,b)}},HorizontalStackedBar=function(a,b,c){function y(a,b,c){var d=b.steps*b.stepValue,e=a-b.graphMin,f=CapValue(e/d,1,0);return c*b.steps*f}function z(d){c.lineWidth=Math.ceil(c.chartLineScale*b.barStrokeWidth);for(var e=0;e<a.datasets.length;e++)for(var f=0;f<a.datasets[e].data.length;f++){var g=animationCorrection(d,a,b,e,f,1).animVal;if(g>1&&(g-=1),void 0!==a.datasets[e].data[f]&&1*a.datasets[e].data[f]!=0){var h,i;b.animationByDataset?(h=s[e][f].xPosLeft,i=s[e][f].xPosRight,i=h+g*(i-h)):(h=s[s[e][f].firstNotMissing][f].xPosLeft+g*(s[e][f].xPosLeft-s[s[e][f].firstNotMissing][f].xPosLeft),i=s[s[e][f].firstNotMissing][f].xPosLeft+g*(s[e][f].xPosRight-s[s[e][f].firstNotMissing][f].xPosLeft)),c.fillStyle=setOptionValue(1,"COLOR",c,a,s,a.datasets[e].fillColor,b.defaultFillColor,e,f,{animationValue:g,xPosLeft:h,yPosBottom:s[e][f].yPosBottom,xPosRight:i,yPosTop:s[e][f].yPosBottom}),c.strokeStyle=setOptionValue(1,"STROKECOLOR",c,a,s,a.datasets[e].strokeColor,b.defaultStrokeColor,e,f,{nullvalue:null}),0!=g&&s[e][f].xPosLeft!=s[e][f].xPosRight&&(c.beginPath(),c.moveTo(h,s[e][f].yPosTop),c.lineTo(i,s[e][f].yPosTop),c.lineTo(i,s[e][f].yPosBottom),c.lineTo(h,s[e][f].yPosBottom),c.lineTo(h,s[e][f].yPosTop),b.barShowStroke&&(c.setLineDash(lineStyleFn(setOptionValue(1,"STROKESTYLE",c,a,s,a.datasets[e].datasetStrokeStyle,b.datasetStrokeStyle,e,f,{nullvalue:null}))),c.stroke(),c.setLineDash([])),c.closePath(),c.fill())}}if(d>=b.animationStopValue){var j=0,k=0;for(e=0;e<a.datasets.length;e++)for(f=0;f<a.datasets[e].data.length;f++)if(void 0!==a.datasets[e].data[f]&&(jsGraphAnnotate[c.ChartNewId][jsGraphAnnotate[c.ChartNewId].length]=["RECT",e,f,s,setOptionValue(1,"ANNOTATEDISPLAY",c,a,s,void 0,b.annotateDisplay,e,f,{nullValue:!0})],setOptionValue(1,"INGRAPHDATASHOW",c,a,s,void 0,b.inGraphDataShow,e,f,{nullValue:!0}))){c.save(),c.textAlign=setOptionValue(1,"INGRAPHDATAALIGN",c,a,s,void 0,b.inGraphDataAlign,e,f,{nullValue:!0}),c.textBaseline=setOptionValue(1,"INGRAPHDATAVALIGN",c,a,s,void 0,b.inGraphDataVAlign,e,f,{nullValue:!0}),c.font=setOptionValue(1,"INGRAPHDATAFONTSTYLE",c,a,s,void 0,b.inGraphDataFontStyle,e,f,{nullValue:!0})+" "+setOptionValue(c.chartTextScale,"INGRAPHDATAFONTSIZE",c,a,s,void 0,b.inGraphDataFontSize,e,f,{nullValue:!0})+"px "+setOptionValue(1,"INGRAPHDATAFONTFAMILY",c,a,s,void 0,b.inGraphDataFontFamily,e,f,{nullValue:!0}),c.fillStyle=setOptionValue(1,"INGRAPHDATAFONTCOLOR",c,a,s,void 0,b.inGraphDataFontColor,e,f,{nullValue:!0});var l=tmplbis(setOptionValue(1,"INGRAPHDATATMPL",c,a,s,void 0,b.inGraphDataTmpl,e,f,{nullValue:!0}),s[e][f],b);c.beginPath(),j=0,k=0,1==setOptionValue(1,"INGRAPHDATAXPOSITION",c,a,s,void 0,b.inGraphDataXPosition,e,f,{nullValue:!0})?k=s[e][f].xPosLeft+setOptionValue(c.chartSpaceScale,"INGRAPHDATAPADDINGX",c,a,s,void 0,b.inGraphDataPaddingX,e,f,{nullValue:!0}):2==setOptionValue(1,"INGRAPHDATAXPOSITION",c,a,s,void 0,b.inGraphDataXPosition,e,f,{nullValue:!0})?k=s[e][f].xPosLeft+(s[e][f].xPosRight-s[e][f].xPosLeft)/2+setOptionValue(c.chartSpaceScale,"INGRAPHDATAPADDINGX",c,a,s,void 0,b.inGraphDataPaddingX,e,f,{nullValue:!0}):3==setOptionValue(1,"INGRAPHDATAXPOSITION",c,a,s,void 0,b.inGraphDataXPosition,e,f,{nullValue:!0})&&(k=s[e][f].xPosRight+setOptionValue(c.chartSpaceScale,"INGRAPHDATAPADDINGX",c,a,s,void 0,b.inGraphDataPaddingX,e,f,{nullValue:!0})),1==setOptionValue(1,"INGRAPHDATAYPOSITION",c,a,s,void 0,b.inGraphDataYPosition,e,f,{nullValue:!0})?j=s[e][f].yPosBottom-setOptionValue(c.chartSpaceScale,"INGRAPHDATAPADDINGY",c,a,s,void 0,b.inGraphDataPaddingY,e,f,{nullValue:!0}):2==setOptionValue(1,"INGRAPHDATAYPOSITION",c,a,s,void 0,b.inGraphDataYPosition,e,f,{nullValue:!0})?j=s[e][f].yPosBottom-p/2-setOptionValue(c.chartSpaceScale,"INGRAPHDATAPADDINGY",c,a,s,void 0,b.inGraphDataPaddingY,e,f,{nullValue:!0}):3==setOptionValue(1,"INGRAPHDATAYPOSITION",c,a,s,void 0,b.inGraphDataYPosition,e,f,{nullValue:!0})&&(j=s[e][f].yPosTop-setOptionValue(c.chartSpaceScale,"INGRAPHDATAPADDINGY",c,a,s,void 0,b.inGraphDataPaddingY,e,f,{nullValue:!0})),c.translate(k,j),rotateVal=setOptionValue(1,"INGRAPHDATAROTATE",c,a,s,void 0,b.inGraphDataRotate,e,f,{nullValue:!0})*(Math.PI/180),c.rotate(rotateVal),setTextBordersAndBackground(c,l,setOptionValue(c.chartTextScale,"INGRAPHDATAFONTSIZE",c,a,s,void 0,b.inGraphDataFontSize,e,f,{nullValue:!0}),0,0,setOptionValue(1,"INGRAPHDATABORDERS",c,a,s,void 0,b.inGraphDataBorders,e,f,{nullValue:!0}),setOptionValue(1,"INGRAPHDATABORDERSCOLOR",c,a,s,void 0,b.inGraphDataBordersColor,e,f,{nullValue:!0}),setOptionValue(c.chartLineScale,"INGRAPHDATABORDERSWIDTH",c,a,s,void 0,b.inGraphDataBordersWidth,e,f,{nullValue:!0}),setOptionValue(c.chartSpaceScale,"INGRAPHDATABORDERSXSPACE",c,a,s,void 0,b.inGraphDataBordersXSpace,e,f,{nullValue:!0}),setOptionValue(c.chartSpaceScale,"INGRAPHDATABORDERSYSPACE",c,a,s,void 0,b.inGraphDataBordersYSpace,e,f,{nullValue:!0}),setOptionValue(1,"INGRAPHDATABORDERSSTYLE",c,a,s,void 0,b.inGraphDataBordersStyle,e,f,{nullValue:!0}),setOptionValue(1,"INGRAPHDATABACKGROUNDCOLOR",c,a,s,void 0,b.inGraphDataBackgroundColor,e,f,{nullValue:!0}),"INGRAPHDATA"),c.fillTextMultiLine(l,0,0,c.textBaseline,setOptionValue(c.chartTextScale,"INGRAPHDATAFONTSIZE",c,a,s,void 0,b.inGraphDataFontSize,e,f,{nullValue:!0}),!0,b.detectMouseOnText,c,"INGRAPHDATA_TEXTMOUSE",rotateVal,k,j,e,f),c.restore()}}r.legendMsr.dispLegend&&drawLegend(r.legendMsr,a,b,c,"HorizontalStackedBar")}function A(){c.lineWidth=Math.ceil(c.chartLineScale*b.scaleLineWidth),c.strokeStyle=b.scaleLineColor,c.setLineDash(lineStyleFn(b.scaleLineStyle)),c.beginPath(),c.moveTo(n-Math.ceil(c.chartLineScale*b.scaleTickSizeLeft),o),c.lineTo(n+r.availableWidth,o),c.stroke(),c.setLineDash([]),c.setLineDash(lineStyleFn(b.scaleGridLineStyle));for(var d=b.showYAxisMin?-1:0;d<f.steps;d++)d>=0&&(c.beginPath(),c.moveTo(n+d*k,o+Math.ceil(c.chartLineScale*b.scaleTickSizeBottom)),c.lineWidth=Math.ceil(c.chartLineScale*b.scaleGridLineWidth),c.strokeStyle=b.scaleGridLineColor,b.scaleShowGridLines&&d>0&&d%b.scaleXGridLinesStep==0?c.lineTo(n+d*k,o-r.availableHeight-Math.ceil(c.chartLineScale*b.scaleTickSizeTop)):c.lineTo(n+d*k,o),c.stroke()),c.setLineDash([]);c.lineWidth=Math.ceil(c.chartLineScale*b.scaleLineWidth),c.strokeStyle=b.scaleLineColor,c.setLineDash(lineStyleFn(b.scaleLineStyle)),c.beginPath(),c.moveTo(n,o+Math.ceil(c.chartLineScale*b.scaleTickSizeBottom)),c.lineTo(n,o-r.availableHeight-Math.ceil(c.chartLineScale*b.scaleTickSizeTop)),c.stroke(),c.setLineDash([]),c.setLineDash(lineStyleFn(b.scaleGridLineStyle));for(var g=0;g<a.labels.length;g++)c.beginPath(),c.moveTo(n-Math.ceil(c.chartLineScale*b.scaleTickSizeLeft),o-(g+1)*e),c.lineWidth=Math.ceil(c.chartLineScale*b.scaleGridLineWidth),c.strokeStyle=b.scaleGridLineColor,b.scaleShowGridLines&&(g+1)%b.scaleYGridLinesStep==0?c.lineTo(n+r.availableWidth,o-(g+1)*e):c.lineTo(n,o-(g+1)*e),c.stroke();c.setLineDash([])}function B(){if(c.font=b.scaleFontStyle+" "+Math.ceil(c.chartTextScale*b.scaleFontSize).toString()+"px "+b.scaleFontFamily,b.scaleShowLabels&&(b.xAxisTop||b.xAxisBottom)&&(c.textBaseline="top",r.rotateLabels>90?(c.save(),c.textAlign="left"):r.rotateLabels>0?(c.save(),c.textAlign="right"):c.textAlign="center",c.fillStyle=b.scaleFontColor,b.xAxisBottom))for(var d=b.showYAxisMin?-1:0;d<f.steps;d++)showYLabels(c,a,b,d+1,f.labels[d+1])&&(c.save(),r.rotateLabels>0?(c.translate(n+(d+1)*k-r.highestXLabel/2,r.xLabelPos),c.rotate(-r.rotateLabels*(Math.PI/180)),c.fillTextMultiLine(f.labels[d+1],0,0,c.textBaseline,Math.ceil(c.chartTextScale*b.scaleFontSize),!0,b.detectMouseOnText,c,"XAXIS_TEXTMOUSE",-r.rotateLabels*(Math.PI/180),n+(d+1)*k-r.highestXLabel/2,r.xLabelPos,d,-1)):c.fillTextMultiLine(f.labels[d+1],n+(d+1)*k,r.xLabelPos,c.textBaseline,Math.ceil(c.chartTextScale*b.scaleFontSize),!0,b.detectMouseOnText,c,"XAXIS_TEXTMOUSE",0,0,0,d,-1),c.restore());c.textAlign="right",c.textBaseline="middle";for(var g=0;g<a.labels.length;g++)showLabels(c,a,b,g)&&(b.yAxisLeft&&(c.textAlign="right",c.fillTextMultiLine(fmtChartJS(b,a.labels[g],b.fmtXLabel),n-(Math.ceil(c.chartLineScale*b.scaleTickSizeLeft)+Math.ceil(c.chartSpaceScale*b.yAxisSpaceRight)),o-(g+1)*e+Math.ceil(c.chartSpaceScale*b.barValueSpacing)+x+p/2,c.textBaseline,Math.ceil(c.chartTextScale*b.scaleFontSize),!0,b.detectMouseOnText,c,"YLEFTAXIS_TEXTMOUSE",0,0,0,-1,g)),b.yAxisRight&&(c.textAlign="left",c.fillTextMultiLine(fmtChartJS(b,a.labels[g],b.fmtXLabel),n+r.availableWidth+(Math.ceil(c.chartLineScale*b.scaleTickSizeRight)+Math.ceil(c.chartSpaceScale*b.yAxisSpaceRight)),o-(g+1)*e+x+p/2,c.textBaseline,Math.ceil(c.chartTextScale*b.scaleFontSize),!0,b.detectMouseOnText,c,"YRIGHTAXIS_TEXTMOUSE",0,0,0,-1,g)))}function C(){for(var d=-Number.MAX_VALUE,e=Number.MAX_VALUE,j=(new Array(a.datasets.length),new Array(a.datasets.length),0);j<a.datasets.length;j++)for(var k=0;k<a.datasets[j].data.length;k++){var l=j,m=0,n=0;for(void 0!==a.datasets[0].data[k]&&(1*a.datasets[0].data[k]>0?(m+=1*a.datasets[0].data[k],m>d&&(d=m),m<e&&(e=m)):(n+=1*a.datasets[0].data[k],n>d&&(d=n),n<e&&(e=n)));l>0;)void 0!==a.datasets[l].data[k]&&(1*a.datasets[l].data[k]>0?(m+=1*a.datasets[l].data[k],m>d&&(d=m),m<e&&(e=m)):(n+=1*a.datasets[l].data[k],n>d&&(d=n),n<e&&(e=n))),l--}"function"==typeof b.graphMin?e=setOptionValue(1,"GRAPHMIN",c,a,s,void 0,b.graphMin,-1,-1,{nullValue:!0}):isNaN(b.graphMin)||(e=b.graphMin),"function"==typeof b.graphMax?d=setOptionValue(1,"GRAPHMAX",c,a,s,void 0,b.graphMax,-1,-1,{nullValue:!0}):isNaN(b.graphMax)||(d=b.graphMax),d<e&&(d=0,e=0),Math.abs(d-e)<b.zeroValue&&(Math.abs(d)<b.zeroValue&&(d=.9),d>0?(d*=1.1,e*=.9):(d*=.9,e*=1.1)),g=Math.ceil(c.chartTextScale*b.scaleFontSize),h=r.availableHeight;var o=Math.floor(h/(.66*g)),p=Math.floor(h/g*.5);return d<e&&(e=d-1),{maxValue:d,minValue:e,maxSteps:o,minSteps:p}}var e,f,g,h,i,j,k,n,o,p,r;if(b.reverseOrder&&void 0===c.reversed&&(c.reversed=!0,a=reverseData(a)),c.tpchart="HorizontalStackedBar",c.tpdata=0,init_and_start(c,a,b)){var s=initPassVariableData_part1(a,b,c);if(b.logarithmic=!1,r=setMeasures(a,b,c,height,width,"nihil",[""],!0,!0,!0,!0,!0,"HorizontalStackedBar"),i=C(),i.maxSteps>0&&i.minSteps>0){if(j=b.scaleShowLabels?b.scaleLabel:"",b.scaleOverride){var t=setOptionValue(1,"SCALESTARTVALUE",c,a,s,void 0,b.scaleStartValue,-1,-1,{nullValue:!0}),u=setOptionValue(1,"SCALESTEPS",c,a,s,void 0,b.scaleSteps,-1,-1,{nullValue:!0}),v=setOptionValue(1,"SCALESTEPWIDTH",c,a,s,void 0,b.scaleStepWidth,-1,-1,{nullValue:!0});f={steps:u,stepValue:v,graphMin:t,labels:[]};for(var w=0;w<=f.steps;w++)j&&f.labels.push(tmpl(j,{value:fmtChartJS(b,1*(t+v*w).toFixed(getDecimalPlaces(v)),b.fmtYLabel)},b));r=setMeasures(a,b,c,height,width,f.labels,null,!0,!0,!0,!0,!0,"HorizontalStackedBar")}else f=calculateScale(1,b,i.maxSteps,i.minSteps,i.maxValue,i.minValue,j),r=setMeasures(a,b,c,height,width,f.labels,null,!0,!0,!0,!0,!0,"HorizontalStackedBar");r.availableHeight=r.availableHeight-Math.ceil(c.chartLineScale*b.scaleTickSizeBottom)-Math.ceil(c.chartLineScale*b.scaleTickSizeTop),r.availableWidth=r.availableWidth-Math.ceil(c.chartLineScale*b.scaleTickSizeLeft)-Math.ceil(c.chartLineScale*b.scaleTickSizeRight),e=Math.floor(r.availableHeight/a.labels.length),k=Math.floor(r.availableWidth/f.steps),(0==k||b.fullWidthGraph)&&(k=r.availableWidth/f.steps),r.clrwidth=r.clrwidth-(r.availableWidth-f.steps*k),r.availableWidth=f.steps*k,r.availableHeight=a.labels.length*e,n=r.leftNotUsableSize+Math.ceil(c.chartLineScale*b.scaleTickSizeLeft),o=r.topNotUsableSize+r.availableHeight+Math.ceil(c.chartLineScale*b.scaleTickSizeTop),p=e-2*Math.ceil(c.chartLineScale*b.scaleGridLineWidth)-2*Math.ceil(c.chartSpaceScale*b.barValueSpacing)-(1*Math.ceil(c.chartSpaceScale*b.barDatasetSpacing)-1)-Math.ceil(c.chartLineScale*b.barStrokeWidth)/2-1,p>=0&&p<=1&&(p=1),p<0&&p>=-1&&(p=-1);var x;1*b.maxBarWidth>0&&p>1*b.maxBarWidth?(x=(p-1*b.maxBarWidth)/2,p=1*b.maxBarWidth):x=0,B(),zeroY=y(0,f,e),initPassVariableData_part2(s,a,b,c,{yAxisPosX:n,additionalSpaceBetweenBars:x,xAxisPosY:o,barWidth:p,zeroY:zeroY,scaleHop:e,valueHop:k,calculatedScale:f}),animationLoop(b,A,z,c,r.clrx,r.clry,r.clrwidth,r.clrheight,n+r.availableWidth/2,o-r.availableHeight/2,n,o,a,s)}else testRedraw(c,a,b)}},Bar=function(data,config,ctx){function drawBars(a){ctx.lineWidth=Math.ceil(ctx.chartLineScale*config.barStrokeWidth);for(var e=0;e<data.datasets.length;e++)if("Line"!=data.datasets[e].type)for(var f=0;f<data.datasets[e].data.length;f++)if(void 0!==data.datasets[e].data[f]){var g=animationCorrection(a,data,config,e,f,1).animVal;g>1&&(g-=1);var h=g*statData[e][f].barHeight+Math.ceil(ctx.chartLineScale*config.barStrokeWidth)/2;ctx.fillStyle=setOptionValue(1,"COLOR",ctx,data,statData,data.datasets[e].fillColor,config.defaultFillColor,e,f,{animationValue:g,xPosLeft:statData[e][f].xPosLeft,yPosBottom:statData[e][f].yPosBottom,xPosRight:statData[e][f].xPosLeft+barWidth,yPosTop:statData[e][f].yPosBottom-h}),ctx.strokeStyle=setOptionValue(1,"STROKECOLOR",ctx,data,statData,data.datasets[e].strokeColor,config.defaultStrokeColor,e,f,{nullvalue:null}),roundRect(ctx,statData[e][f].xPosLeft,statData[e][f].yPosBottom,barWidth,h,config.barShowStroke,config.barBorderRadius,e,f,data.datasets[e].data[f]<0?-1:1)}if(drawLinesDataset(a,data,config,ctx,statData,{xAxisPosY:xAxisPosY,yAxisPosX:yAxisPosX,valueHop:valueHop,nbValueHop:data.labels.length}),a>=config.animationStopValue)for(e=0;e<data.datasets.length;e++)for(f=0;f<data.datasets[e].data.length;f++)if(void 0!==data.datasets[e].data[f]&&"Line"!=data.datasets[e].type&&(jsGraphAnnotate[ctx.ChartNewId][jsGraphAnnotate[ctx.ChartNewId].length]=["RECT",e,f,statData,setOptionValue(1,"ANNOTATEDISPLAY",ctx,data,statData,void 0,config.annotateDisplay,e,f,{nullValue:!0})],setOptionValue(1,"INGRAPHDATASHOW",ctx,data,statData,void 0,config.inGraphDataShow,e,f,{nullValue:!0}))){ctx.save(),ctx.textAlign=setOptionValue(1,"INGRAPHDATAALIGN",ctx,data,statData,void 0,config.inGraphDataAlign,e,f,{nullValue:!0}),ctx.textBaseline=setOptionValue(1,"INGRAPHDATAVALIGN",ctx,data,statData,void 0,config.inGraphDataVAlign,e,f,{nullValue:!0}),ctx.font=setOptionValue(1,"INGRAPHDATAFONTSTYLE",ctx,data,statData,void 0,config.inGraphDataFontStyle,e,f,{nullValue:!0})+" "+setOptionValue(ctx.chartTextScale,"INGRAPHDATAFONTSIZE",ctx,data,statData,void 0,config.inGraphDataFontSize,e,f,{nullValue:!0})+"px "+setOptionValue(1,"INGRAPHDATAFONTFAMILY",ctx,data,statData,void 0,config.inGraphDataFontFamily,e,f,{nullValue:!0}),ctx.fillStyle=setOptionValue(1,"INGRAPHDATAFONTCOLOR",ctx,data,statData,void 0,config.inGraphDataFontColor,e,f,{nullValue:!0}),statData[e][f].yPosBottom,statData[e][f].yPosTop,ctx.beginPath();var i=0,j=0;1==setOptionValue(1,"INGRAPHDATAXPOSITION",ctx,data,statData,void 0,config.inGraphDataXPosition,e,f,{nullValue:!0})?j=statData[e][f].xPosLeft+setOptionValue(ctx.chartSpaceScale,"INGRAPHDATAPADDINGX",ctx,data,statData,void 0,config.inGraphDataPaddingX,e,f,{nullValue:!0}):2==setOptionValue(1,"INGRAPHDATAXPOSITION",ctx,data,statData,void 0,config.inGraphDataXPosition,e,f,{nullValue:!0})?j=statData[e][f].xPosLeft+barWidth/2+setOptionValue(ctx.chartSpaceScale,"INGRAPHDATAPADDINGX",ctx,data,statData,void 0,config.inGraphDataPaddingX,e,f,{nullValue:!0}):3==setOptionValue(1,"INGRAPHDATAXPOSITION",ctx,data,statData,void 0,config.inGraphDataXPosition,e,f,{nullValue:!0})&&(j=statData[e][f].xPosLeft+barWidth+setOptionValue(ctx.chartSpaceScale,"INGRAPHDATAPADDINGX",ctx,data,statData,void 0,config.inGraphDataPaddingX,e,f,{nullValue:!0})),1==setOptionValue(1,"INGRAPHDATAYPOSITION",ctx,data,statData,void 0,config.inGraphDataYPosition,e,f,{nullValue:!0})?i=statData[e][f].yPosBottom-setOptionValue(ctx.chartSpaceScale,"INGRAPHDATAPADDINGY",ctx,data,statData,void 0,config.inGraphDataPaddingY,e,f,{nullValue:!0}):2==setOptionValue(1,"INGRAPHDATAYPOSITION",ctx,data,statData,void 0,config.inGraphDataYPosition,e,f,{nullValue:!0})?i=(statData[e][f].yPosBottom+statData[e][f].yPosTop)/2-setOptionValue(ctx.chartSpaceScale,"INGRAPHDATAPADDINGY",ctx,data,statData,void 0,config.inGraphDataPaddingY,e,f,{nullValue:!0}):3==setOptionValue(1,"INGRAPHDATAYPOSITION",ctx,data,statData,void 0,config.inGraphDataYPosition,e,f,{nullValue:!0})&&(i=statData[e][f].yPosTop-setOptionValue(ctx.chartSpaceScale,"INGRAPHDATAPADDINGY",ctx,data,statData,void 0,config.inGraphDataPaddingY,e,f,{nullValue:!0})),ctx.translate(j,i);var k=tmplbis(setOptionValue(1,"INGRAPHDATATMPL",ctx,data,statData,void 0,config.inGraphDataTmpl,e,f,{nullValue:!0}),statData[e][f],config);rotateVal=setOptionValue(1,"INGRAPHDATAROTATE",ctx,data,statData,void 0,config.inGraphDataRotate,e,f,{nullValue:!0})*(Math.PI/180),ctx.rotate(rotateVal),setTextBordersAndBackground(ctx,k,setOptionValue(ctx.chartTextScale,"INGRAPHDATAFONTSIZE",ctx,data,statData,void 0,config.inGraphDataFontSize,e,f,{nullValue:!0}),0,0,setOptionValue(1,"INGRAPHDATABORDERS",ctx,data,statData,void 0,config.inGraphDataBorders,e,f,{nullValue:!0}),setOptionValue(1,"INGRAPHDATABORDERSCOLOR",ctx,data,statData,void 0,config.inGraphDataBordersColor,e,f,{nullValue:!0}),setOptionValue(ctx.chartLineScale,"INGRAPHDATABORDERSWIDTH",ctx,data,statData,void 0,config.inGraphDataBordersWidth,e,f,{nullValue:!0}),setOptionValue(ctx.chartSpaceScale,"INGRAPHDATABORDERSXSPACE",ctx,data,statData,void 0,config.inGraphDataBordersXSpace,e,f,{nullValue:!0}),setOptionValue(ctx.chartSpaceScale,"INGRAPHDATABORDERSYSPACE",ctx,data,statData,void 0,config.inGraphDataBordersYSpace,e,f,{nullValue:!0}),setOptionValue(1,"INGRAPHDATABORDERSSTYLE",ctx,data,statData,void 0,config.inGraphDataBordersStyle,e,f,{nullValue:!0}),setOptionValue(1,"INGRAPHDATABACKGROUNDCOLOR",ctx,data,statData,void 0,config.inGraphDataBackgroundColor,e,f,{nullValue:!0}),"INGRAPHDATA"),ctx.fillTextMultiLine(k,0,0,ctx.textBaseline,setOptionValue(ctx.chartTextScale,"INGRAPHDATAFONTSIZE",ctx,data,statData,void 0,config.inGraphDataFontSize,e,f,{nullValue:!0}),!0,config.detectMouseOnText,ctx,"INGRAPHDATA_TEXTMOUSE",rotateVal,j,i,e,f),ctx.restore()}a>=1&&"function"==typeof drawMath&&drawMath(ctx,config,data,msr,{xAxisPosY:xAxisPosY,yAxisPosX:yAxisPosX,valueHop:valueHop,scaleHop:scaleHop,zeroY:zeroY,calculatedScale:calculatedScale,calculateOffset:calculateOffset,additionalSpaceBetweenBars:additionalSpaceBetweenBars,barWidth:barWidth}),msr.legendMsr.dispLegend&&drawLegend(msr.legendMsr,data,config,ctx,"Bar")}function roundRect(a,b,c,d,e,f,g,h,i,j){a.beginPath(),a.setLineDash(lineStyleFn(setOptionValue(1,"STROKESTYLE",a,data,statData,data.datasets[h].datasetStrokeStyle,config.datasetStrokeStyle,h,i,{nullvalue:null}))),a.moveTo(b+g,c),a.lineTo(b+d-g,c),a.quadraticCurveTo(b+d,c,b+d,c),a.lineTo(b+d,c-e+j*g),a.quadraticCurveTo(b+d,c-e,b+d-g,c-e),a.lineTo(b+g,c-e),a.quadraticCurveTo(b,c-e,b,c-e+j*g),a.lineTo(b,c),a.quadraticCurveTo(b,c,b+g,c),f&&a.stroke(),a.closePath(),a.fill(),a.setLineDash([])}function drawScale(){ctx.lineWidth=Math.ceil(ctx.chartLineScale*config.scaleLineWidth),ctx.strokeStyle=config.scaleLineColor,ctx.setLineDash(lineStyleFn(config.scaleLineStyle)),ctx.beginPath(),ctx.moveTo(yAxisPosX-Math.ceil(ctx.chartLineScale*config.scaleTickSizeLeft),xAxisPosY),ctx.lineTo(yAxisPosX+msr.availableWidth+Math.ceil(ctx.chartLineScale*config.scaleTickSizeRight),xAxisPosY),ctx.stroke(),ctx.setLineDash([]),ctx.setLineDash(lineStyleFn(config.scaleGridLineStyle));for(var a=0;a<data.labels.length;a++)ctx.beginPath(),ctx.moveTo(yAxisPosX+a*valueHop,xAxisPosY+Math.ceil(ctx.chartLineScale*config.scaleTickSizeBottom)),ctx.lineWidth=Math.ceil(ctx.chartLineScale*config.scaleGridLineWidth),ctx.strokeStyle=config.scaleGridLineColor,config.scaleShowGridLines&&a>0&&a%config.scaleXGridLinesStep==0?ctx.lineTo(yAxisPosX+a*valueHop,xAxisPosY-msr.availableHeight-Math.ceil(ctx.chartLineScale*config.scaleTickSizeTop)):ctx.lineTo(yAxisPosX+a*valueHop,xAxisPosY),ctx.stroke();ctx.setLineDash([]),ctx.lineWidth=Math.ceil(ctx.chartLineScale*config.scaleLineWidth),ctx.strokeStyle=config.scaleLineColor,ctx.setLineDash(lineStyleFn(config.scaleLineStyle)),ctx.beginPath(),ctx.moveTo(yAxisPosX,xAxisPosY+Math.ceil(ctx.chartLineScale*config.scaleTickSizeBottom)),ctx.lineTo(yAxisPosX,xAxisPosY-msr.availableHeight-Math.ceil(ctx.chartLineScale*config.scaleTickSizeTop)),ctx.stroke(),ctx.setLineDash([]),ctx.setLineDash(lineStyleFn(config.scaleGridLineStyle));for(var b=0;b<calculatedScale.steps;b++)ctx.beginPath(),ctx.moveTo(yAxisPosX-Math.ceil(ctx.chartLineScale*config.scaleTickSizeLeft),xAxisPosY-(b+1)*scaleHop),ctx.lineWidth=Math.ceil(ctx.chartLineScale*config.scaleGridLineWidth),ctx.strokeStyle=config.scaleGridLineColor,config.scaleShowGridLines&&(b+1)%config.scaleYGridLinesStep==0?ctx.lineTo(yAxisPosX+msr.availableWidth+Math.ceil(ctx.chartLineScale*config.scaleTickSizeRight),xAxisPosY-(b+1)*scaleHop):ctx.lineTo(yAxisPosX,xAxisPosY-(b+1)*scaleHop),ctx.stroke();ctx.setLineDash([])}function drawLabels(){if(ctx.font=config.scaleFontStyle+" "+Math.ceil(ctx.chartTextScale*config.scaleFontSize).toString()+"px "+config.scaleFontFamily,(config.xAxisTop||config.xAxisBottom)&&(ctx.textBaseline="top",msr.rotateLabels>90?(ctx.save(),ctx.textAlign="left"):msr.rotateLabels>0?(ctx.save(),ctx.textAlign="right"):ctx.textAlign="center",ctx.fillStyle=config.scaleFontColor,config.xAxisBottom))for(var a=0;a<data.labels.length;a++)showLabels(ctx,data,config,a)&&(ctx.save(),msr.rotateLabels>0?(ctx.translate(yAxisPosX+a*valueHop+valueHop/2-msr.highestXLabel/2,msr.xLabelPos),ctx.rotate(-msr.rotateLabels*(Math.PI/180)),ctx.fillTextMultiLine(fmtChartJS(config,data.labels[a],config.fmtXLabel),0,0,ctx.textBaseline,Math.ceil(ctx.chartTextScale*config.scaleFontSize),!0,config.detectMouseOnText,ctx,"XAXIS_TEXTMOUSE",-msr.rotateLabels*(Math.PI/180),yAxisPosX+a*valueHop+valueHop/2-msr.highestXLabel/2,msr.xLabelPos,a,-1)):ctx.fillTextMultiLine(fmtChartJS(config,data.labels[a],config.fmtXLabel),yAxisPosX+a*valueHop+valueHop/2,msr.xLabelPos,ctx.textBaseline,Math.ceil(ctx.chartTextScale*config.scaleFontSize),!0,config.detectMouseOnText,ctx,"XAXIS_TEXTMOUSE",0,0,0,a,-1),ctx.restore());ctx.textAlign="right",ctx.textBaseline="middle";for(var b=config.showYAxisMin?-1:0;b<calculatedScale.steps;b++)config.scaleShowLabels&&showYLabels(ctx,data,config,b+1,calculatedScale.labels[b+1])&&(config.yAxisLeft&&(ctx.textAlign="right",ctx.fillTextMultiLine(calculatedScale.labels[b+1],yAxisPosX-(Math.ceil(ctx.chartLineScale*config.scaleTickSizeLeft)+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceRight)),xAxisPosY-(b+1)*scaleHop,ctx.textBaseline,Math.ceil(ctx.chartTextScale*config.scaleFontSize),!0,config.detectMouseOnText,ctx,"YLEFTAXIS_TEXTMOUSE",0,0,0,-1,b)),config.yAxisRight&&!valueBounds.dbAxis&&(ctx.textAlign="left",ctx.fillTextMultiLine(calculatedScale.labels[b+1],yAxisPosX+msr.availableWidth+(Math.ceil(ctx.chartLineScale*config.scaleTickSizeRight)+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceRight)),xAxisPosY-(b+1)*scaleHop,ctx.textBaseline,Math.ceil(ctx.chartTextScale*config.scaleFontSize),!0,config.detectMouseOnText,ctx,"YRIGHTAXIS_TEXTMOUSE",0,0,0,-1,b)));if(config.yAxisRight&&valueBounds.dbAxis)for(b=config.showYAxisMin?-1:0;b<calculatedScale2.steps;b++)config.scaleShowLabels&&(ctx.textAlign="left",ctx.fillTextMultiLine(calculatedScale2.labels[b+1],yAxisPosX+msr.availableWidth+(Math.ceil(ctx.chartLineScale*config.scaleTickSizeRight)+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceRight)),xAxisPosY-(b+1)*scaleHop2,ctx.textBaseline,Math.ceil(ctx.chartTextScale*config.scaleFontSize),!0,config.detectMouseOnText,ctx,"YRIGHTAXIS_TEXTMOUSE",0,0,0,-1,b))}function getValueBounds(){for(var upperValue=-Number.MAX_VALUE,lowerValue=Number.MAX_VALUE,upperValue2=-Number.MAX_VALUE,lowerValue2=Number.MAX_VALUE,secondAxis=!1,firstAxis=!1,mathValueHeight,i=0;i<data.datasets.length;i++){var mathFctName=data.datasets[i].drawMathDeviation,mathValueHeight=0;if("function"==typeof eval(mathFctName)){var parameter={data:data,datasetNr:i};mathValueHeightVal=window[mathFctName](parameter)}else mathValueHeightVal=0;for(var j=0;j<data.datasets[i].data.length;j++)mathValueHeight="object"==typeof mathValueHeightVal?mathValueHeightVal[Math.min(mathValueHeightVal.length,j)]:mathValueHeightVal,void 0!==data.datasets[i].data[j]&&(2==data.datasets[i].axis?(secondAxis=!0,1*data.datasets[i].data[j]+mathValueHeight>upperValue2&&(upperValue2=1*data.datasets[i].data[j]+mathValueHeight),1*data.datasets[i].data[j]-mathValueHeight<lowerValue2&&(lowerValue2=1*data.datasets[i].data[j]-mathValueHeight)):(firstAxis=!0,1*data.datasets[i].data[j]+mathValueHeight>upperValue&&(upperValue=1*data.datasets[i].data[j]+mathValueHeight),1*data.datasets[i].data[j]-mathValueHeight<lowerValue&&(lowerValue=1*data.datasets[i].data[j]-mathValueHeight)))}upperValue<lowerValue&&(upperValue=0,lowerValue=0),Math.abs(upperValue-lowerValue)<config.zeroValue&&(Math.abs(upperValue)<config.zeroValue&&(upperValue=.9),upperValue>0?(upperValue*=1.1,lowerValue*=.9):(upperValue*=.9,lowerValue*=1.1)),"function"==typeof config.graphMin?lowerValue=setOptionValue(1,"GRAPHMIN",ctx,data,statData,void 0,config.graphMin,-1,-1,{nullValue:!0}):isNaN(config.graphMin)||(lowerValue=config.graphMin),"function"==typeof config.graphMax?upperValue=setOptionValue(1,"GRAPHMAX",ctx,data,statData,void 0,config.graphMax,-1,-1,{nullValue:!0}):isNaN(config.graphMax)||(upperValue=config.graphMax),secondAxis&&(upperValue2<lowerValue2&&(upperValue2=0,lowerValue2=0),Math.abs(upperValue2-lowerValue2)<config.zeroValue&&(Math.abs(upperValue2)<config.zeroValue&&(upperValue2=.9),upperValue2>0?(upperValue2*=1.1,lowerValue2*=.9):(upperValue2*=.9,lowerValue2*=1.1)),"function"==typeof config.graphMin2?lowerValue2=setOptionValue(1,"GRAPHMIN",ctx,data,statData,void 0,config.graphMin2,-1,-1,{nullValue:!0}):isNaN(config.graphMin2)||(lowerValue2=config.graphMin2),"function"==typeof config.graphMax2?upperValue2=setOptionValue(1,"GRAPHMAX",ctx,data,statData,void 0,config.graphMax2,-1,-1,{nullValue:!0}):isNaN(config.graphMax2)||(upperValue2=config.graphMax2)),!firstAxis&&secondAxis&&(upperValue=upperValue2,lowerValue=lowerValue2),labelHeight=Math.ceil(ctx.chartTextScale*config.scaleFontSize),scaleHeight=msr.availableHeight;var maxSteps=Math.floor(scaleHeight/(.66*labelHeight)),minSteps=Math.floor(scaleHeight/labelHeight*.5);return upperValue<lowerValue&&(lowerValue=upperValue-1),upperValue2<lowerValue2&&(lowerValue2=upperValue2-1),{maxValue:upperValue,minValue:lowerValue,maxValue2:upperValue2,minValue2:lowerValue2,dbAxis:secondAxis,maxSteps:maxSteps,minSteps:minSteps}}var maxSize,scaleHop,scaleHop2,calculatedScale,calculatedScale2,labelHeight,scaleHeight,valueBounds,labelTemplateString,labelTemplateString2,valueHop,widestXLabel,xAxisLength,yAxisPosX,xAxisPosY,barWidth,rotateLabels=0,msr;if(ctx.tpchart="Bar",ctx.tpdata=0,init_and_start(ctx,data,config)){for(var statData=initPassVariableData_part1(data,config,ctx),nrOfBars=data.datasets.length,i=0;i<data.datasets.length;i++)"Line"==data.datasets[i].type?(statData[i][0].tpchart="Line",nrOfBars--):statData[i][0].tpchart="Bar";var bufferDataset,l=0;if(msr=setMeasures(data,config,ctx,height,width,"nihil",[""],!0,!1,!0,!0,!0,"Bar"),valueBounds=getValueBounds(),valueBounds.minValue<=0&&(config.logarithmic=!1),valueBounds.maxSteps>0&&valueBounds.minSteps>0){!1!==config.logarithmic&&valueBounds.minValue<=0&&(config.logarithmic=!1),!1!==config.logarithmic2&&valueBounds.minValue2<=0&&(config.logarithmic2=!1);var OrderOfMagnitude=calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.maxValue)+1))-calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.minValue)));("fuzzy"==config.logarithmic&&OrderOfMagnitude<4||config.scaleOverride)&&(config.logarithmic=!1);var OrderOfMagnitude2=calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.maxValue2)+1))-calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.minValue2)));if(("fuzzy"==config.logarithmic2&&OrderOfMagnitude2<4||config.scaleOverride2)&&(config.logarithmic2=!1),labelTemplateString=config.scaleShowLabels?config.scaleLabel:"",labelTemplateString2=config.scaleShowLabels2?config.scaleLabel2:"",config.scaleOverride){var scaleStartValue=setOptionValue(1,"SCALESTARTVALUE",ctx,data,statData,void 0,config.scaleStartValue,-1,-1,{nullValue:!0}),scaleSteps=setOptionValue(1,"SCALESTEPS",ctx,data,statData,void 0,config.scaleSteps,-1,-1,{nullValue:!0}),scaleStepWidth=setOptionValue(1,"SCALESTEPWIDTH",ctx,data,statData,void 0,config.scaleStepWidth,-1,-1,{nullValue:!0});calculatedScale={steps:scaleSteps,stepValue:scaleStepWidth,graphMin:scaleStartValue,graphMax:scaleStartValue+scaleSteps*scaleStepWidth,labels:[]},populateLabels(1,config,labelTemplateString,calculatedScale.labels,calculatedScale.steps,scaleStartValue,calculatedScale.graphMax,scaleStepWidth)}else calculatedScale=calculateScale(1,config,valueBounds.maxSteps,valueBounds.minSteps,valueBounds.maxValue,valueBounds.minValue,labelTemplateString);if(valueBounds.dbAxis)if(config.scaleOverride2){var scaleStartValue2=setOptionValue(1,"SCALESTARTVALUE2",ctx,data,statData,void 0,config.scaleStartValue2,-1,-1,{nullValue:!0}),scaleSteps2=setOptionValue(1,"SCALESTEPS2",ctx,data,statData,void 0,config.scaleSteps2,-1,-1,{nullValue:!0}),scaleStepWidth2=setOptionValue(1,"SCALESTEPWIDTH2",ctx,data,statData,void 0,config.scaleStepWidth2,-1,-1,{nullValue:!0});calculatedScale2={steps:scaleSteps2,stepValue:scaleStepWidth2,graphMin:scaleStartValue2,graphMax:scaleStartValue2+scaleSteps2*scaleStepWidth2,labels:[]},populateLabels(2,config,labelTemplateString2,calculatedScale2.labels,calculatedScale2.steps,scaleStartValue2,calculatedScale2.graphMax,scaleStepWidth2)}else calculatedScale2=calculateScale(2,config,valueBounds.maxSteps,valueBounds.minSteps,valueBounds.maxValue2,valueBounds.minValue2,labelTemplateString2);else calculatedScale2={steps:0,stepValue:0,graphMin:0,graphMax:0,labels:null};msr=setMeasures(data,config,ctx,height,width,calculatedScale.labels,calculatedScale2.labels,!0,!1,!0,!0,!0,"Bar");var prevHeight=msr.availableHeight;msr.availableHeight=msr.availableHeight-Math.ceil(ctx.chartLineScale*config.scaleTickSizeBottom)-Math.ceil(ctx.chartLineScale*config.scaleTickSizeTop),msr.availableWidth=msr.availableWidth-Math.ceil(ctx.chartLineScale*config.scaleTickSizeLeft)-Math.ceil(ctx.chartLineScale*config.scaleTickSizeRight),scaleHop=Math.floor(msr.availableHeight/calculatedScale.steps),scaleHop2=Math.floor(msr.availableHeight/calculatedScale2.steps),valueHop=Math.floor(msr.availableWidth/data.labels.length),(0==valueHop||config.fullWidthGraph)&&(valueHop=msr.availableWidth/data.labels.length),msr.clrwidth=msr.clrwidth-(msr.availableWidth-data.labels.length*valueHop),msr.availableWidth=data.labels.length*valueHop,msr.availableHeight=calculatedScale.steps*scaleHop,msr.xLabelPos+=Math.ceil(ctx.chartLineScale*config.scaleTickSizeBottom)+Math.ceil(ctx.chartLineScale*config.scaleTickSizeTop)-(prevHeight-msr.availableHeight),msr.clrheight+=Math.ceil(ctx.chartLineScale*config.scaleTickSizeBottom)+Math.ceil(ctx.chartLineScale*config.scaleTickSizeTop)-(prevHeight-msr.availableHeight),yAxisPosX=msr.leftNotUsableSize+Math.ceil(ctx.chartLineScale*config.scaleTickSizeLeft),xAxisPosY=msr.topNotUsableSize+msr.availableHeight+Math.ceil(ctx.chartLineScale*config.scaleTickSizeTop),barWidth=(valueHop-2*Math.ceil(ctx.chartLineScale*config.scaleGridLineWidth)-2*Math.ceil(ctx.chartSpaceScale*config.barValueSpacing)-(Math.ceil(ctx.chartSpaceScale*config.barDatasetSpacing)*nrOfBars-1)-(Math.ceil(ctx.chartLineScale*config.barStrokeWidth)/2*nrOfBars-1))/nrOfBars,barWidth>=0&&barWidth<=1&&(barWidth=1),barWidth<0&&barWidth>=-1&&(barWidth=-1);var additionalSpaceBetweenBars;1*config.maxBarWidth>0&&barWidth>1*config.maxBarWidth?(additionalSpaceBetweenBars=nrOfBars*(barWidth-1*config.maxBarWidth)/2,barWidth=1*config.maxBarWidth):additionalSpaceBetweenBars=0;var zeroY=0,zeroY2=0;valueBounds.minValue<0&&(zeroY=calculateOffset(config.logarithmic,0,calculatedScale,scaleHop)),valueBounds.minValue2<0&&(zeroY2=calculateOffset(config.logarithmic2,0,calculatedScale2,scaleHop2)),initPassVariableData_part2(statData,data,config,ctx,{msr:msr,yAxisPosX:yAxisPosX,xAxisPosY:xAxisPosY,valueHop:valueHop,nbValueHop:data.labels.length-1,barWidth:barWidth,additionalSpaceBetweenBars:additionalSpaceBetweenBars,zeroY:zeroY,zeroY2:zeroY2,calculatedScale:calculatedScale,calculatedScale2:calculatedScale2,scaleHop:scaleHop,scaleHop2:scaleHop2}),drawLabels(),animationLoop(config,drawScale,drawBars,ctx,msr.clrx,msr.clry,msr.clrwidth,msr.clrheight,yAxisPosX+msr.availableWidth/2,xAxisPosY-msr.availableHeight/2,yAxisPosX,xAxisPosY,data,statData)}else testRedraw(ctx,data,config)}},HorizontalBar=function(a,b,c){function y(d){for(var e=0;e<a.datasets.length;e++)for(var f=0;f<a.datasets[e].data.length;f++){c.lineWidth=Math.ceil(c.chartLineScale*b.barStrokeWidth);var g=animationCorrection(d,a,b,e,f,1).animVal;g>1&&(g-=1);var h=g*s[e][f].barWidth+Math.ceil(c.chartLineScale*b.barStrokeWidth)/2;c.fillStyle=setOptionValue(1,"COLOR",c,a,s,a.datasets[e].fillColor,b.defaultFillColor,e,f,{animationValue:g,xPosLeft:s[e][f].xPosLeft,yPosBottom:s[e][f].yPosBottom,xPosRight:s[e][f].xPosLeft+h,yPosTop:s[e][f].yPosBottom}),c.strokeStyle=setOptionValue(1,"STROKECOLOR",c,a,s,a.datasets[e].strokeColor,b.defaultStrokeColor,e,f,{nullvalue:null}),void 0!==a.datasets[e].data[f]&&z(c,s[e][f].yPosTop,s[e][f].xPosLeft,p,h,b.barShowStroke,b.barBorderRadius,0,e,f,a.datasets[e].data[f]<0?-1:1)}if(d>=b.animationStopValue)for(e=0;e<a.datasets.length;e++)for(f=0;f<a.datasets[e].data.length;f++)if(void 0!==a.datasets[e].data[f]&&(jsGraphAnnotate[c.ChartNewId][jsGraphAnnotate[c.ChartNewId].length]=["RECT",e,f,s,setOptionValue(1,"ANNOTATEDISPLAY",c,a,s,void 0,b.annotateDisplay,e,f,{nullValue:!0})],setOptionValue(1,"INGRAPHDATASHOW",c,a,s,void 0,b.inGraphDataShow,e,f,{nullValue:!0}))){c.save(),c.textAlign=setOptionValue(1,"INGRAPHDATAALIGN",c,a,s,void 0,b.inGraphDataAlign,e,f,{nullValue:!0}),c.textBaseline=setOptionValue(1,"INGRAPHDATAVALIGN",c,a,s,void 0,b.inGraphDataVAlign,e,f,{nullValue:!0}),c.font=setOptionValue(1,"INGRAPHDATAFONTSTYLE",c,a,s,void 0,b.inGraphDataFontStyle,e,f,{nullValue:!0})+" "+setOptionValue(c.chartTextScale,"INGRAPHDATAFONTSIZE",c,a,s,void 0,b.inGraphDataFontSize,e,f,{nullValue:!0})+"px "+setOptionValue(1,"INGRAPHDATAFONTFAMILY",c,a,s,void 0,b.inGraphDataFontFamily,e,f,{nullValue:!0}),c.fillStyle=setOptionValue(1,"INGRAPHDATAFONTCOLOR",c,a,s,void 0,b.inGraphDataFontColor,e,f,{nullValue:!0}),c.beginPath();var i=0,j=0;1==setOptionValue(1,"INGRAPHDATAYPOSITION",c,a,s,void 0,b.inGraphDataYPosition,e,f,{nullValue:!0})?i=s[e][f].yPosTop-setOptionValue(c.chartSpaceScale,"INGRAPHDATAPADDINGY",c,a,s,void 0,b.inGraphDataPaddingY,e,f,{nullValue:!0})+p:2==setOptionValue(1,"INGRAPHDATAYPOSITION",c,a,s,void 0,b.inGraphDataYPosition,e,f,{nullValue:!0})?i=s[e][f].yPosTop+p/2-setOptionValue(c.chartSpaceScale,"INGRAPHDATAPADDINGY",c,a,s,void 0,b.inGraphDataPaddingY,e,f,{nullValue:!0}):3==setOptionValue(1,"INGRAPHDATAYPOSITION",c,a,s,void 0,b.inGraphDataYPosition,e,f,{nullValue:!0})&&(i=s[e][f].yPosTop-setOptionValue(c.chartSpaceScale,"INGRAPHDATAPADDINGY",c,a,s,void 0,b.inGraphDataPaddingY,e,f,{nullValue:!0})),1==setOptionValue(1,"INGRAPHDATAXPOSITION",c,a,s,void 0,b.inGraphDataXPosition,e,f,{nullValue:!0})?j=s[e][f].xPosLeft+setOptionValue(c.chartSpaceScale,"INGRAPHDATAPADDINGX",c,a,s,void 0,b.inGraphDataPaddingX,e,f,{nullValue:!0}):2==setOptionValue(1,"INGRAPHDATAXPOSITION",c,a,s,void 0,b.inGraphDataXPosition,e,f,{nullValue:!0})?j=(s[e][f].xPosLeft+s[e][f].xPosRight)/2+setOptionValue(c.chartSpaceScale,"INGRAPHDATAPADDINGX",c,a,s,void 0,b.inGraphDataPaddingX,e,f,{nullValue:!0}):3==setOptionValue(1,"INGRAPHDATAXPOSITION",c,a,s,void 0,b.inGraphDataXPosition,e,f,{nullValue:!0})&&(j=s[e][f].xPosRight+setOptionValue(c.chartSpaceScale,"INGRAPHDATAPADDINGX",c,a,s,void 0,b.inGraphDataPaddingX,e,f,{nullValue:!0})),c.translate(j,i);var k=tmplbis(setOptionValue(1,"INGRAPHDATATMPL",c,a,s,void 0,b.inGraphDataTmpl,e,f,{nullValue:!0}),s[e][f],b),l=setOptionValue(1,"INGRAPHDATAROTATE",c,a,s,void 0,b.inGraphDataRotate,e,f,{nullValue:!0})*(Math.PI/180);c.rotate(l),setTextBordersAndBackground(c,k,setOptionValue(c.chartTextScale,"INGRAPHDATAFONTSIZE",c,a,s,void 0,b.inGraphDataFontSize,e,f,{nullValue:!0}),0,0,setOptionValue(1,"INGRAPHDATABORDERS",c,a,s,void 0,b.inGraphDataBorders,e,f,{nullValue:!0}),setOptionValue(1,"INGRAPHDATABORDERSCOLOR",c,a,s,void 0,b.inGraphDataBordersColor,e,f,{nullValue:!0}),setOptionValue(c.chartLineScale,"INGRAPHDATABORDERSWIDTH",c,a,s,void 0,b.inGraphDataBordersWidth,e,f,{nullValue:!0}),setOptionValue(c.chartSpaceScale,"INGRAPHDATABORDERSXSPACE",c,a,s,void 0,b.inGraphDataBordersXSpace,e,f,{nullValue:!0}),setOptionValue(c.chartSpaceScale,"INGRAPHDATABORDERSYSPACE",c,a,s,void 0,b.inGraphDataBordersYSpace,e,f,{nullValue:!0}),setOptionValue(1,"INGRAPHDATABORDERSSTYLE",c,a,s,void 0,b.inGraphDataBordersStyle,e,f,{nullValue:!0}),setOptionValue(1,"INGRAPHDATABACKGROUNDCOLOR",c,a,s,void 0,b.inGraphDataBackgroundColor,e,f,{nullValue:!0}),"INGRAPHDATA"),c.fillTextMultiLine(k,0,0,c.textBaseline,setOptionValue(c.chartTextScale,"INGRAPHDATAFONTSIZE",c,a,s,void 0,b.inGraphDataFontSize,e,f,{nullValue:!0}),!0,b.detectMouseOnText,c,"INGRAPHDATA_TEXTMOUSE",l,j,i,e,f),c.restore()}r.legendMsr.dispLegend&&drawLegend(r.legendMsr,a,b,c,"HorizontalBar")}function z(c,d,e,f,g,h,i,j,k,l,m){c.beginPath(),c.moveTo(e+j,d+i),c.lineTo(e+j,d+f-i),c.quadraticCurveTo(e+j,d+f,e+j,d+f),c.lineTo(e+g-m*i,d+f),c.quadraticCurveTo(e+g,d+f,e+g,d+f-i),c.lineTo(e+g,d+i),c.quadraticCurveTo(e+g,d,e+g-m*i,d),c.lineTo(e+j,d),c.quadraticCurveTo(e+j,d,e+j,d+i),h&&(c.setLineDash(lineStyleFn(setOptionValue(1,"STROKESTYLE",c,a,s,a.datasets[k].datasetStrokeStyle,b.datasetStrokeStyle,k,l,{nullvalue:null}))),c.stroke(),c.setLineDash([])),c.closePath(),c.fill()}function A(){c.lineWidth=Math.ceil(c.chartLineScale*b.scaleLineWidth),c.strokeStyle=b.scaleLineColor,c.setLineDash(lineStyleFn(b.scaleLineStyle)),c.beginPath(),c.moveTo(n-Math.ceil(c.chartLineScale*b.scaleTickSizeLeft),o),c.lineTo(n+r.availableWidth+Math.ceil(c.chartLineScale*b.scaleTickSizeRight),o),c.stroke(),c.setLineDash([]),c.setLineDash(lineStyleFn(b.scaleGridLineStyle));for(var d=b.showYAxisMin?-1:0;d<f.steps;d++)d>=0&&(c.beginPath(),c.moveTo(n+d*k,o+Math.ceil(c.chartLineScale*b.scaleTickSizeBottom)),c.lineWidth=Math.ceil(c.chartLineScale*b.scaleGridLineWidth),c.strokeStyle=b.scaleGridLineColor,b.scaleShowGridLines&&d>0&&d%b.scaleXGridLinesStep==0?c.lineTo(n+d*k,o-r.availableHeight-Math.ceil(c.chartLineScale*b.scaleTickSizeTop)):c.lineTo(n+d*k,o),c.stroke());c.setLineDash([]),c.lineWidth=Math.ceil(c.chartLineScale*b.scaleLineWidth),c.strokeStyle=b.scaleLineColor,c.setLineDash(lineStyleFn(b.scaleLineStyle)),c.beginPath(),c.moveTo(n,o+Math.ceil(c.chartLineScale*b.scaleTickSizeBottom)),c.lineTo(n,o-r.availableHeight-Math.ceil(c.chartLineScale*b.scaleTickSizeTop)),c.stroke(),c.setLineDash([]),c.setLineDash(lineStyleFn(b.scaleGridLineStyle));for(var g=0;g<a.labels.length;g++)c.beginPath(),c.moveTo(n-Math.ceil(c.chartLineScale*b.scaleTickSizeLeft),o-(g+1)*e),c.lineWidth=Math.ceil(c.chartLineScale*b.scaleGridLineWidth),c.strokeStyle=b.scaleGridLineColor,b.scaleShowGridLines&&(g+1)%b.scaleYGridLinesStep==0?c.lineTo(n+r.availableWidth+Math.ceil(c.chartLineScale*b.scaleTickSizeRight),o-(g+1)*e):c.lineTo(n,o-(g+1)*e),c.stroke();c.setLineDash([])}function B(){if(c.font=b.scaleFontStyle+" "+Math.ceil(c.chartTextScale*b.scaleFontSize).toString()+"px "+b.scaleFontFamily,b.scaleShowLabels&&(b.xAxisTop||b.xAxisBottom)&&(c.textBaseline="top",r.rotateLabels>90?(c.save(),c.textAlign="left"):r.rotateLabels>0?(c.save(),c.textAlign="right"):c.textAlign="center",c.fillStyle=b.scaleFontColor,b.xAxisBottom))for(var d=b.showYAxisMin?-1:0;d<f.steps;d++)showYLabels(c,a,b,d+1,f.labels[d+1])&&(c.save(),r.rotateLabels>0?(c.translate(n+(d+1)*k-r.highestXLabel/2,r.xLabelPos),c.rotate(-r.rotateLabels*(Math.PI/180)),c.fillTextMultiLine(f.labels[d+1],0,0,c.textBaseline,Math.ceil(c.chartTextScale*b.scaleFontSize),!0,b.detectMouseOnText,c,"XAXIS_TEXTMOUSE",-r.rotateLabels*(Math.PI/180),n+(d+1)*k-r.highestXLabel/2,r.xLabelPos,d,-1)):c.fillTextMultiLine(f.labels[d+1],n+(d+1)*k,r.xLabelPos,c.textBaseline,Math.ceil(c.chartTextScale*b.scaleFontSize),!0,b.detectMouseOnText,c,"XAXIS_TEXTMOUSE",0,0,0,d,-1),c.restore());c.textAlign="right",c.textBaseline="middle";for(var g=0;g<a.labels.length;g++)showLabels(c,a,b,g)&&(b.yAxisLeft&&(c.textAlign="right",c.fillTextMultiLine(fmtChartJS(b,a.labels[g],b.fmtXLabel),n-(Math.ceil(c.chartLineScale*b.scaleTickSizeLeft)+Math.ceil(c.chartSpaceScale*b.yAxisSpaceRight)),o-g*e-e/2,c.textBaseline,Math.ceil(c.chartTextScale*b.scaleFontSize),!0,b.detectMouseOnText,c,"YLEFTAXIS_TEXTMOUSE",0,0,0,-1,g)),b.yAxisRight&&(c.textAlign="left",c.fillTextMultiLine(fmtChartJS(b,a.labels[g],b.fmtXLabel),n+r.availableWidth+(Math.ceil(c.chartLineScale*b.scaleTickSizeRight)+Math.ceil(c.chartSpaceScale*b.yAxisSpaceRight)),o-g*e-e/2,c.textBaseline,Math.ceil(c.chartTextScale*b.scaleFontSize),!0,b.detectMouseOnText,c,"YRIGHTAXIS_TEXTMOUSE",0,0,0,-1,g)))}function C(){for(var d=-Number.MAX_VALUE,e=Number.MAX_VALUE,f=0;f<a.datasets.length;f++)for(var i=0;i<a.datasets[f].data.length;i++)void 0!==a.datasets[f].data[i]&&(1*a.datasets[f].data[i]>d&&(d=1*a.datasets[f].data[i]),1*a.datasets[f].data[i]<e&&(e=1*a.datasets[f].data[i]));d<e&&(d=0,e=0),Math.abs(d-e)<b.zeroValue&&(Math.abs(d)<b.zeroValue&&(d=.9),d>0?(d*=1.1,e*=.9):(d*=.9,e*=1.1)),"function"==typeof b.graphMin?e=setOptionValue(1,"GRAPHMIN",c,a,s,void 0,b.graphMin,-1,-1,{nullValue:!0}):isNaN(b.graphMin)||(e=b.graphMin),"function"==typeof b.graphMax?d=setOptionValue(1,"GRAPHMAX",c,a,s,void 0,b.graphMax,-1,-1,{nullValue:!0}):isNaN(b.graphMax)||(d=b.graphMax),g=Math.ceil(c.chartTextScale*b.scaleFontSize),h=r.availableHeight;var j=Math.floor(h/(.66*g)),k=Math.floor(h/g*.5);return d<e&&(e=d-1),{maxValue:d,minValue:e,maxSteps:j,minSteps:k}}var e,f,g,h,i,j,k,n,o,p,r;if(c.tpchart="HorizontalBar",c.tpdata=0,init_and_start(c,a,b)){b.reverseOrder&&void 0===c.reversed&&(c.reversed=!0,a=reverseData(a));var s=initPassVariableData_part1(a,b,c);if(r=setMeasures(a,b,c,height,width,"nihil",[""],!0,!0,!0,!0,!0,"StackedBar"),i=C(),i.minValue<=0&&(b.logarithmic=!1),i.maxSteps>0&&i.minSteps>0){if(!1!==b.logarithmic&&i.minValue<=0&&(b.logarithmic=!1),j=b.scaleShowLabels?b.scaleLabel:"",b.scaleOverride){var t=setOptionValue(1,"SCALESTARTVALUE",c,a,s,void 0,b.scaleStartValue,-1,-1,{nullValue:!0}),u=setOptionValue(1,"SCALESTEPS",c,a,s,void 0,b.scaleSteps,-1,-1,{nullValue:!0}),v=setOptionValue(1,"SCALESTEPWIDTH",c,a,s,void 0,b.scaleStepWidth,-1,-1,{nullValue:!0});f={steps:u,stepValue:v,graphMin:t,graphMax:t+u*v,labels:[]},populateLabels(1,b,j,f.labels,f.steps,t,f.graphMax,v),r=setMeasures(a,b,c,height,width,f.labels,null,!0,!0,!0,!0,!0,"HorizontalBar")}else f=calculateScale(1,b,i.maxSteps,i.minSteps,i.maxValue,i.minValue,j),r=setMeasures(a,b,c,height,width,f.labels,null,!0,!0,!0,!0,!0,"HorizontalBar");r.availableHeight=r.availableHeight-Math.ceil(c.chartLineScale*b.scaleTickSizeBottom)-Math.ceil(c.chartLineScale*b.scaleTickSizeTop),r.availableWidth=r.availableWidth-Math.ceil(c.chartLineScale*b.scaleTickSizeLeft)-Math.ceil(c.chartLineScale*b.scaleTickSizeRight),e=Math.floor(r.availableHeight/a.labels.length),k=Math.floor(r.availableWidth/f.steps),(0==k||b.fullWidthGraph)&&(k=r.availableWidth/f.steps),r.clrwidth=r.clrwidth-(r.availableWidth-f.steps*k),r.availableWidth=f.steps*k,r.availableHeight=a.labels.length*e,n=r.leftNotUsableSize+Math.ceil(c.chartLineScale*b.scaleTickSizeLeft),o=r.topNotUsableSize+r.availableHeight+Math.ceil(c.chartLineScale*b.scaleTickSizeTop),p=(e-2*Math.ceil(c.chartLineScale*b.scaleGridLineWidth)-2*Math.ceil(c.chartSpaceScale*b.barValueSpacing)-(Math.ceil(c.chartSpaceScale*b.barDatasetSpacing)*a.datasets.length-1)-(Math.ceil(c.chartLineScale*b.barStrokeWidth)/2*a.datasets.length-1))/a.datasets.length,p>=0&&p<=1&&(p=1),p<0&&p>=-1&&(p=-1);var w;1*b.maxBarWidth>0&&p>1*b.maxBarWidth?(w=a.datasets.length*(p-1*b.maxBarWidth)/2,p=1*b.maxBarWidth):w=0;var x=0;i.minValue<0&&(x=calculateOffset(b.logarithmic,0,f,k)),B(),initPassVariableData_part2(s,a,b,c,{yAxisPosX:n,xAxisPosY:o,barWidth:p,additionalSpaceBetweenBars:w,zeroY:x,scaleHop:e,valueHop:k,calculatedScale:f}),animationLoop(b,A,y,c,r.clrx,r.clry,r.clrwidth,r.clrheight,n+r.availableWidth/2,o-r.availableHeight/2,n,o,a,s)}else testRedraw(c,a,b)}},requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}(),cache={}};