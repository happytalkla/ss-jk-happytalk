<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
		PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
		"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="menu">

	<!-- 메뉴 리스트 -->
	<select id="selectMenuList" resultType="MenuVO" parameterType="MenuVO">
		/* menu.selectMenuList */
		SELECT
			 MENU_ID menuId
			,MENU_NM menuNm
			,MENU_DIV menuDiv
			,LOCALE locale
			,MENU_DC menuDc
			,MENU_PATH menuPath
			,LEVEL menuLvl
			,MENU_NUM menuNum
			,UPR_MENU_ID uprMenuId
			,LEFT_MENU_YN leftMenuYn
			,USER_AUTH userAuth
			,USE_YN useYn
			,CHAT chat
			,CREATE_DT createDt
			,CREATER creater
			,UPDATE_DT updateDt
			,UPDATER updater		
		FROM shfda.tb_MENU
		<where>
			MENU_DIV = #{menuDiv}
  			AND LOCALE = #{locale}
  			AND USE_YN = #{useYn}
  			<if test="userAuth != null">
  			AND USER_AUTH like '%' || #{userAuth} || '%'
  			</if>
		</where>
		START WITH UPR_MENU_ID IS NULL 
		CONNECT BY PRIOR MENU_ID = UPR_MENU_ID	
		ORDER SIBLINGS BY MENU_NUM		
		
	</select>
</mapper>
