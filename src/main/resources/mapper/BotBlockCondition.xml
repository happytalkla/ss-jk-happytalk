<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
		PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
		"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="BotBlockCondition">

	<select id="select" resultType="BotBlockCondition">
		/* BotBlockCondition.select */
		select *
		from shfda.tb_bot_block_condition
		<where>
			<if test="id != null">
			and id = #{id}
			</if>
			<if test="blockId != null">
			and block_id = #{blockId}
			</if>
			<if test="targetBlockId != null">
			and target_block_id = #{targetBlockId}
			</if>
			<if test="conditionId != null">
			and condition_id = #{conditionId}
			</if>
			<if test="conditionPropertyId != null">
			and condition_property_id = #{conditionPropertyId}
			</if>
		</where>

		<if test="orderby != null">
		order by ${orderby}
		</if>
	</select>

	<update id="save">
		/* BotBlockCondition.save */
		merge into shfda.tb_bot_block_condition
		using dual
		on (id = #{id})

		when not matched then
		insert
		(
		    id,
		    block_id,
		    modified,
		    modifier,
		    sort,
		    target_block_id,
		    condition_id,
		    condition_property_id
		)
		values
		(
			 shfda.seq_bot_block_condition.nextval
			, #{blockId}
			, sysdate
			, 1
			, #{sort}
			, #{targetBlockId}
			, #{conditionId}
			, #{conditionPropertyId}
		)

		when matched then
		update
		set
		    block_id = #{blockId},
		    modified = sysdate,
		    modifier = 1,
		    sort = #{sort},
		    target_block_id = #{targetBlockId},
		    condition_id = #{conditionId},
		    condition_property_id = #{conditionPropertyId}
		where
			id = #{id}
	</update>

	<update id="delete">
		/* BotBlockCondition.delete */
		delete from shfda.tb_bot_block_condition
		where
			<if test="id != null">
			id = #{id}
			</if>
	</update>
</mapper>
